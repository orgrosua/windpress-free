import{g as V}from"./index-BbP3371Q.js";import{a9 as Y,D as _,E as z,F as O,aj as P,C as J,O as Z,P as ee,ak as x,al as te,am as G,y as ne,z as j,af as re}from"./runtime-core.esm-bundler-cDi-oBs7.js";import{c as oe,t as ae,s as se}from"./set--h_0VhSf.js";function R(e){return Z()?(ee(e),!0):!1}function M(e){return typeof e=="function"?e():Y(e)}const ie=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ue=Object.prototype.toString,le=e=>ue.call(e)==="[object Object]",W=()=>{};function ce(e,t){function n(...a){return new Promise((r,s)=>{Promise.resolve(e(()=>t.apply(this,a),{fn:t,thisArg:this,args:a})).then(r).catch(s)})}return n}const q=e=>e();function fe(e=q){const t=O(!0);function n(){t.value=!1}function a(){t.value=!0}const r=(...s)=>{t.value&&e(...s)};return{isActive:P(t),pause:n,resume:a,eventFilter:r}}function de(e){return x()}function me(...e){if(e.length!==1)return te(...e);const t=e[0];return typeof t=="function"?P(G(()=>({get:t,set:W}))):O(t)}function pe(e,t,n={}){const{eventFilter:a=q,...r}=n;return J(e,ce(a,t),r)}function ve(e,t,n={}){const{eventFilter:a,...r}=n,{eventFilter:s,pause:i,resume:f,isActive:v}=fe(a);return{stop:pe(e,t,{...r,eventFilter:s}),pause:i,resume:f,isActive:v}}function B(e,t=!0,n){de()?_(e,n):t?e():z(e)}function H(e){var t;const n=M(e);return(t=n==null?void 0:n.$el)!=null?t:n}const F=ie?window:void 0;function K(...e){let t,n,a,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,a,r]=e,t=F):[t,n,a,r]=e,!t)return W;Array.isArray(n)||(n=[n]),Array.isArray(a)||(a=[a]);const s=[],i=()=>{s.forEach(m=>m()),s.length=0},f=(m,u,b,g)=>(m.addEventListener(u,b,g),()=>m.removeEventListener(u,b,g)),v=J(()=>[H(t),M(r)],([m,u])=>{if(i(),!m)return;const b=le(u)?{...u}:u;s.push(...n.flatMap(g=>a.map(y=>f(m,g,y,b))))},{immediate:!0,flush:"post"}),d=()=>{v(),i()};return R(d),d}function ge(){const e=O(!1),t=x();return t&&_(()=>{e.value=!0},t),e}function ye(e){const t=ge();return j(()=>(t.value,!!e()))}function he(e,t={}){const{window:n=F}=t,a=ye(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let r;const s=O(!1),i=d=>{s.value=d.matches},f=()=>{r&&("removeEventListener"in r?r.removeEventListener("change",i):r.removeListener(i))},v=re(()=>{a.value&&(f(),r=n.matchMedia(M(e)),"addEventListener"in r?r.addEventListener("change",i):r.addListener(i),s.value=r.matches)});return R(()=>{v(),f(),r=void 0}),s}const T=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof V<"u"?V:typeof self<"u"?self:{},D="__vueuse_ssr_handlers__",we=be();function be(){return D in T||(T[D]=T[D]||{}),T[D]}function $(e,t){return we[e]||t}function Se(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const Ae={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},Q="vueuse-storage";function U(e,t,n,a={}){var r;const{flush:s="pre",deep:i=!0,listenToStorageChanges:f=!0,writeDefaults:v=!0,mergeDefaults:d=!1,shallow:m,window:u=F,eventFilter:b,onError:g=o=>{console.error(o)},initOnMounted:y}=a,p=(m?ne:O)(typeof t=="function"?t():t);if(!n)try{n=$("getDefaultStorage",()=>{var o;return(o=F)==null?void 0:o.localStorage})()}catch(o){g(o)}if(!n)return p;const w=M(t),k=Se(w),S=(r=a.serializer)!=null?r:Ae[k],{pause:L,resume:c}=ve(p,()=>N(p.value),{flush:s,deep:i,eventFilter:b});u&&f&&B(()=>{K(u,"storage",h),K(u,Q,I),y&&h()}),y||h();function A(o,l){u&&u.dispatchEvent(new CustomEvent(Q,{detail:{key:e,oldValue:o,newValue:l,storageArea:n}}))}function N(o){try{const l=n.getItem(e);if(o==null)A(l,null),n.removeItem(e);else{const E=S.write(o);l!==E&&(n.setItem(e,E),A(l,E))}}catch(l){g(l)}}function C(o){const l=o?o.newValue:n.getItem(e);if(l==null)return v&&w!=null&&n.setItem(e,S.write(w)),w;if(!o&&d){const E=S.read(l);return typeof d=="function"?d(E,w):k==="object"&&!Array.isArray(E)?{...w,...E}:E}else return typeof l!="string"?l:S.read(l)}function h(o){if(!(o&&o.storageArea!==n)){if(o&&o.key==null){p.value=w;return}if(!(o&&o.key!==e)){L();try{(o==null?void 0:o.newValue)!==S.write(p.value)&&(p.value=C(o))}catch(l){g(l)}finally{o?z(c):c()}}}}function I(o){h(o.detail)}return p}function Ee(e){return he("(prefers-color-scheme: dark)",e)}function Ce(e={}){const{selector:t="html",attribute:n="class",initialValue:a="auto",window:r=F,storage:s,storageKey:i="vueuse-color-scheme",listenToStorageChanges:f=!0,storageRef:v,emitAuto:d,disableTransition:m=!0}=e,u={auto:"",light:"light",dark:"dark",...e.modes||{}},b=Ee({window:r}),g=j(()=>b.value?"dark":"light"),y=v||(i==null?me(a):U(i,a,s,{window:r,listenToStorageChanges:f})),p=j(()=>y.value==="auto"?g.value:y.value),w=$("updateHTMLAttrs",(c,A,N)=>{const C=typeof c=="string"?r==null?void 0:r.document.querySelector(c):H(c);if(!C)return;let h;if(m&&(h=r.document.createElement("style"),h.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),r.document.head.appendChild(h)),A==="class"){const I=N.split(/\s/g);Object.values(u).flatMap(o=>(o||"").split(/\s/g)).filter(Boolean).forEach(o=>{I.includes(o)?C.classList.add(o):C.classList.remove(o)})}else C.setAttribute(A,N);m&&(r.getComputedStyle(h).opacity,document.head.removeChild(h))});function k(c){var A;w(t,n,(A=u[c])!=null?A:c)}function S(c){e.onChanged?e.onChanged(c,k):k(c)}J(p,S,{flush:"post",immediate:!0}),B(()=>S(p.value));const L=j({get(){return d?y.value:p.value},set(c){y.value=c}});try{return Object.assign(L,{store:y,system:g,state:p})}catch{return L}}function Oe(e,t){t=oe(t,e);for(var n=0,a=t.length;e!=null&&n<a;)e=e[ae(t[n++])];return n&&n==a?e:void 0}function X(e,t,n){var a=e==null?void 0:Oe(e,t);return a===void 0?n:a}function ke(e,t){const n=t!=null&&t.persist?U(t.persist,e):O(e),a={};function r(s,i){return a[s]||(a[s]=G((f,v)=>({get(){return f(),X(n.value,s,i)},set(d){se(n.value,s,d),v()}}))),a[s]}return{state:n,getVirtualRef:r}}export{ke as c,X as g,Ce as u};
