import{i as je,l as Fe,r as Oe,b as Ve,L as De,_ as N,T as Ue,P as Be,K as He,M as Re,N as Ke,O as Qe}from"./_plugin-vue_export-helper-Cps8Wh2c.js";import{l as Z}from"./logger-BTW-zIW3.js";import{o as Xe}from"./constant-YYj745Bx.js";import{i as P,a as ee,q as H,u as R,v as u,x as v,y as f,z as h,A as I,C as T,F as Ye,r as x,w as K,S as te,J as W,K as L,E as M,M as j,Q as F,B as Q,G as Ge,H as Je,D as Ne,T as Ze}from"./runtime-core.esm-bundler-C0d2UZ6m.js";import{Q as et}from"./lib-BXT8389d.js";import{__tla as tt}from"./build-Km0EQ9ar.js";import{__tla as ot}from"./oxide_parser_wasm-8nf_WcM4.js";import{g as nt}from"./intellisense-CgzKx6Lg.js";import{a as at}from"./index-B-USwDm2.js";import{s as it}from"./set-qX46P2hw.js";import"./index-BHzFOpFs.js";import"./isObject-B5R9K1Pz.js";import"./preload-helper-Tcd9XBoB.js";import"./_MapCache-C7aBjWBU.js";import"./isSymbol-DJmTqBMq.js";Promise.all([(()=>{try{return tt}catch{}})(),(()=>{try{return ot}catch{}})()]).then(async()=>{je({scope:"#windpressoxygen-variable-app"}),Fe.add(Oe,Ve);const oe={id:"windpressoxygen-variable-app-header",class:"bg:$(oxy-dark) cursor:grab bb:1|solid|gray-60"},ne={class:"flex gap:10 align-items:center fg:$(oxy-light-text)"},ae={class:"flex align-items:center px:12 py:2"},ie={class:"text-transform:none font:medium text:center flex-grow:1 gap:10 align-items:center cursor:default px:12 py:2"},se={__name:"PanelHeader",setup(o){const t=P("variableApp"),a=P("isOpen");function m(){const n=t.querySelector("#windpressoxygen-variable-app-header");let p=x(!1),i=0,d=0;K(p,g=>{g?(document.body.style.userSelect="none",document.body.querySelector("#ct-viewport-container").style.pointerEvents="none",n.style.cursor="grabbing"):(document.body.style.removeProperty("user-select"),document.body.querySelector("#ct-viewport-container").style.removeProperty("pointer-events"),n.style.cursor="grab")});const l=g=>{p.value=!0;const w=n.getBoundingClientRect();i=g.clientX-w.left,d=g.clientY-w.top};n.removeEventListener("mousedown",l),n.addEventListener("mousedown",l);const k=g=>{if(!p.value)return;const w=n.getBoundingClientRect(),y=g.clientX,r=g.clientY,c=y-i,b=r-d,E=c<0?0:c>window.innerWidth-w.width?window.innerWidth-w.width:c,S=b<0?0:b>window.innerHeight-w.height?window.innerHeight-w.height:b;t.style.left=`${E}px`,t.style.top=`${S}px`};document.removeEventListener("mousemove",k),document.addEventListener("mousemove",k);const C=g=>{p.value=!1};document.removeEventListener("mouseup",C),document.addEventListener("mouseup",C)}return ee(()=>{m()}),(n,p)=>{const i=H("inline-svg"),d=H("font-awesome-icon"),l=R("tooltip");return u(),v("div",oe,[f("div",ne,[f("div",ae,[h(i,{src:I(De),class:"inline-svg fill:current font:24"},null,8,["src"])]),T((u(),v("div",ie,[Ye(" WindPress ")])),[[l,{placement:"top",content:`v${n.windpressoxygen._version}`}]]),T((u(),v("button",{onClick:p[0]||(p[0]=k=>a.value=!I(a)),class:"flex align-items:center py:10 px:12 b:none fg:$(oxy-light-text) bg:transparent bg:$(oxy-hover):hover cursor:pointer"},[h(d,{icon:["fas","xmark"],class:"font:16"})])),[[l,{placement:"top",content:"Close"}]])])])}}},le={class:"flex-grow:1"},re={key:0,class:"expansion-panel__body"},ce={__name:"ExpansionPanel",props:{namespace:{type:String,required:!0},name:{type:String,required:!0}},setup(o,{expose:t}){const a=o,m=x(null),n=at(`windpressoxygen-variable-app.ui.expansion-panels.${a.namespace}`,{[`${a.name}`]:!1},void 0,{mergeDefaults:!0});function p(d){n.value[a.name]=d===null?!n.value[a.name]:d}function i(){m.value.scrollIntoView()}return t({togglePanel:p,scrollIntoView:i}),(d,l)=>{const k=H("font-awesome-icon");return u(),v("div",{ref_key:"sectionRef",ref:m,class:"expansion-panel mx:10 py:8 mr:4"},[f("div",{onClick:l[0]||(l[0]=C=>I(n)[o.name]=!I(n)[o.name]),class:W([{},"expansion-panel__header flex justify-content:space-between p:10 r:8 cursor:pointer"])},[f("div",le,[te(d.$slots,"header",{},void 0,!0)]),f("div",null,[h(k,{icon:["fas","chevron-right"],class:W([{"rotate(-90)":I(n)[o.name]},"~duration:300 font:18"])},null,8,["class"])])]),h(Ue,null,{default:L(()=>[I(n)[o.name]?(u(),v("div",re,[te(d.$slots,"default",{},void 0,!0)])):M("",!0)]),_:3})],512)}}},O=N(ce,[["__scopeId","data-v-dae2d6f2"]]),pe={class:"{m:10;pb:15}>div"},ue={class:"variable-section-title font:14 my:10"},de={class:"variable-section-items flex flex:row gap:8 flex-wrap:wrap"},ve=["onClick","onMouseenter"],me={class:"font:14"},X={__name:"CommonVariableItems",props:{variableItems:{type:Object,required:!0}},setup(o){return(t,a)=>{const m=R("tooltip");return u(),v("div",pe,[(u(!0),v(j,null,F(o.variableItems,(n,p)=>(u(),v("div",{key:p,class:""},[f("div",ue,Q(p.replace("_","-")),1),f("div",de,[n.length>0?(u(!0),v(j,{key:0},F(n,(i,d)=>T((u(),v("button",{key:d,onClick:l=>t.$emit("previewChose",l,i.key),onMouseenter:l=>t.$emit("previewEnter",l,i.key),onMouseleave:a[0]||(a[0]=l=>t.$emit("previewLeave")),class:"px:12 py:8 r:8 font:medium fg:$(oxy-light-text) bg:$(oxy-mid) bg:$(oxy-hover):hover b:0 flex-grow:1 flex-shrink:1 flex-basis:30% cursor:pointer {opacity:.5}>span opacity:100:hover>span"},[f("span",me,Q(i.label),1)],40,ve)),[[m,{placement:"top",content:`var(${i.key}, ${i.value})`}]])),128)):M("",!0)])]))),128))])}}},ye={class:"{m:10;pb:15}>div"},fe={class:"variable-section-title font:14 my:10"},ge={key:0,class:"variable-section-items"},be=["onClick","onMouseenter"],he=["onClick","onMouseenter"],we={__name:"ColorVariableItems",props:{variableItems:{type:Object,required:!0}},setup(o){return(t,a)=>{const m=R("tooltip");return u(),v("div",ye,[(u(!0),v(j,null,F(o.variableItems,(n,p)=>(u(),v("div",{key:p,class:""},[f("div",fe,Q(p),1),n.DEFAULT?(u(),v("div",ge,[T(f("button",{onClick:i=>t.$emit("previewChose",i,n.DEFAULT.key),onMouseenter:i=>t.$emit("previewEnter",i,n.DEFAULT.key),onMouseleave:a[0]||(a[0]=i=>t.$emit("previewLeave")),class:W([`bg:$(${n.DEFAULT.key.slice(2)})`,"w:full r:4 h:24 border:1|solid|transparent border:white:hover cursor:pointer"])},null,42,be),[[m,{placement:"top",content:`var(${n.DEFAULT.key}, ${n.DEFAULT.value})`}]])])):M("",!0),n.shades&&Object.keys(n.shades).length>0?(u(),v("div",{key:1,class:W([[{},Object.keys(n.shades).length>1?"rl:4>div:first-child>button rr:4>div:last-child>button":"",`grid-template-cols:repeat(${Object.keys(n.shades).length},auto)`],"variable-section-items grid r:4 overflow:hidden"])},[(u(!0),v(j,null,F(n.shades,(i,d)=>(u(),v("div",{key:d,class:"flex gap:10"},[T(f("button",{onClick:l=>t.$emit("previewChose",l,i.key),onMouseenter:l=>t.$emit("previewEnter",l,i.key),onMouseleave:a[1]||(a[1]=l=>t.$emit("previewLeave")),class:W([`bg:$(${i.key.slice(2)})`,"w:full h:24 border:1|solid|transparent border:white:hover cursor:pointer"])},null,42,he),[[m,{placement:"top",content:`var(${i.key}, ${i.value})`}]])]))),128))],2)):M("",!0)]))),128))])}}},V=o=>(Ge("data-v-064c3cdd"),o=o(),Je(),o),ke={id:"windpressoxygen-variable-app-body",class:"bg:$(oxy-dark) fg:$(oxy-light-text) rel w:full h:full overflow-y:scroll! bb:1|solid|gray-60>div:not(:last-child)"},xe=V(()=>f("span",{class:"font:semibold"},"Color",-1)),_e=V(()=>f("span",{class:"font:semibold"},"Typography",-1)),Ee=V(()=>f("span",{class:"font:semibold"},"Sizing",-1)),$e=1e3,Se={__name:"PanelBody",setup(o){const t=x({colors:{},typography:{},sizing:{}}),a=P("focusedInput"),m=P("recentVariableSelectionTimestamp"),n=P("tempInputValue"),p=P("variableApp");async function i(){const y=await Xe.contentWindow.wp.hooks.applyFilters("windpress.module.design_system.main_css"),r=await nt(await et(y));let c=p.querySelector("style#windpressoxygen-variable-app-body-style");c||(c=document.createElement("style"),c.id="windpressoxygen-variable-app-body-style",p.appendChild(c)),c.innerHTML=`
        #windpressoxygen-variable-app-body, #oxygen-sidebar {
            ${r.map(e=>`${e.key}:${e.value};`).join("")}
        }
    `;const b={};r.filter(e=>e.key.startsWith("--color")).forEach(e=>{const s=e.key.slice(8),$=s.split("-");let B="";if($.length>1){const qe=$[0],Me=$.slice(1).join("-");B=`${qe}.shades.'${Me}'`}else B=`${s}.DEFAULT`;it(b,B,e)}),t.value.colors=Object.keys(b).sort().reduce((e,s)=>(e[s]=b[s],e),{});const E={font_size:[],line_height:[],letter_spacing:[]};r.filter(e=>e.key.startsWith("--font-size-")&&!e.key.endsWith("--line-height")).forEach(e=>{const s=e.key.slice(12);E.font_size.push({key:e.key,label:s,value:e.value})}),r.filter(e=>e.key.startsWith("--line-height-")||e.key.endsWith("--line-height")).forEach(e=>{const s=e.key.startsWith("--line-height-")?e.key.slice(14):e.key.slice(2,-13);E.line_height.push({key:e.key,label:s,value:e.value})}),E.line_height.sort((e,s)=>e.label.startsWith("font-size-")&&!s.label.startsWith("font-size-")?1:!e.label.startsWith("font-size-")&&s.label.startsWith("font-size-")?-1:0),r.filter(e=>e.key.startsWith("--letter-spacing-")).forEach(e=>{const s=e.key.slice(17);E.letter_spacing.push({key:e.key,label:s,value:e.value})}),t.value.typography=E;const S={spacing:[],width:[],breakpoint:[]};r.filter(e=>e.key.startsWith("--spacing-")).forEach(e=>{const s=e.key.slice(10);S.spacing.push({key:e.key,label:s,value:e.value})}),r.filter(e=>e.key.startsWith("--width-")).forEach(e=>{const s=e.key.slice(8);S.width.push({key:e.key,label:s,value:e.value})}),r.filter(e=>e.key.startsWith("--breakpoint-")).forEach(e=>{const s=e.key.slice(13);S.breakpoint.push({key:e.key,label:s,value:e.value})}),t.value.sizing=S}const d=x(null),l=x(null),k=x(null);K(a,y=>{var r;if(y){const c=y,b=(r=c==null?void 0:c.parentElement)==null?void 0:r.classList.contains("oxygen-color-picker"),E=["font-size"].some(s=>{var $;return($=c==null?void 0:c.getAttribute("data-option"))==null?void 0:$.includes(s)}),S=["padding","margin","gap","width","height"].some(s=>{var $;return($=c==null?void 0:c.getAttribute("data-option"))==null?void 0:$.includes(s)});l.value.togglePanel(!1),k.value.togglePanel(!1),d.value.togglePanel(!1);async function e(){y.parentElement.querySelector(".oxygen-measure-box-unit-selector .oxygen-measure-box-units .oxygen-measure-box-unit:last-child").click(),setTimeout(()=>{y.focus()},100)}b?(d.value.togglePanel(!0),d.value.scrollIntoView()):E?(l.value.togglePanel(!0),l.value.scrollIntoView(),e()):S&&(k.value.togglePanel(!0),k.value.scrollIntoView(),e())}});function C(y,r){performance.now()-m.value<$e||a.value&&(a.value.value=`var(${r})`,a.value.dispatchEvent(new Event("input")),a.value.focus())}function g(y){!a.value||n.value===null||(a.value.value=n.value,a.value.dispatchEvent(new Event("input")),a.value.focus())}function w(y,r){var c,b;a.value&&(a.value.value=`var(${r})`,a.value.dispatchEvent(new Event("input")),a.value.focus(),n.value=`var(${r})`,m.value=performance.now(),(b=(c=a.value)==null?void 0:c.parentElement)!=null&&b.classList.contains("oxygen-color-picker")&&a.value.parentElement.querySelector(".oxygen-color-picker-color button")&&(a.value.parentElement.querySelector(".oxygen-color-picker-color button").style.backgroundColor=`var(${r})`))}return ee(()=>{i()}),new BroadcastChannel("windpress").addEventListener("message",async y=>{const r=y.data;r.source==="windpress/autocomplete"&&r.task==="windpress.main_css.saved.done"&&setTimeout(()=>{i()},1e3)}),(y,r)=>(u(),v("div",ke,[h(O,{namespace:"variable",name:"color",ref_key:"sectionColor",ref:d},{header:L(()=>[xe]),default:L(()=>[h(we,{variableItems:t.value.colors,onPreviewEnter:C,onPreviewLeave:g,onPreviewChose:w},null,8,["variableItems"])]),_:1},512),h(O,{namespace:"variable",name:"typography",ref_key:"sectionTypography",ref:l},{header:L(()=>[_e]),default:L(()=>[h(X,{variableItems:t.value.typography,onPreviewEnter:C,onPreviewLeave:g,onPreviewChose:w},null,8,["variableItems"])]),_:1},512),h(O,{namespace:"variable",name:"spacing",ref_key:"sectionSpacing",ref:k,class:""},{header:L(()=>[Ee]),default:L(()=>[h(X,{variableItems:t.value.sizing,onPreviewEnter:C,onPreviewLeave:g,onPreviewChose:w},null,8,["variableItems"])]),_:1},512)]))}},Le=N(Se,[["__scopeId","data-v-064c3cdd"]]),Ce={id:"windpressoxygen-variable-app-container",class:"flex flex:column w:full h:full"},Pe={__name:"App",setup(o){const t=P("isOpen");return(a,m)=>T((u(),v("div",Ce,[h(se),(u(),Ne(Ze,null,{default:L(()=>[h(Le)]),_:1}))],512)),[[Be,I(t)]])}};function Ie({selector:o,callback:t,options:a}){const m=new MutationObserver(t),n=document.querySelector(o);if(!n){Z(`Target not found for selector: ${o}`,{module:"variable-picker",type:"error"});return}const p={childList:!0,subtree:!0};m.observe(n,Object.assign(Object.assign({},p),a))}const z=document.createElement("windpressoxygen-variable-app");z.id="windpressoxygen-variable-app",document.body.appendChild(z);const A=x(!1),q=x(null),D=x(null),Te=x(0),_=He(Pe);_.config.globalProperties.windpressoxygen=window.windpressoxygen,_.provide("variableApp",z),_.provide("isOpen",A),_.provide("focusedInput",q),_.provide("tempInputValue",D),_.provide("recentVariableSelectionTimestamp",Te),_.use(Re,{container:"#windpressoxygen-variable-app"}),_.component("font-awesome-icon",Ke).component("inline-svg",Qe),_.mount("#windpressoxygen-variable-app");function Y(o){var t;!o.shiftKey||!o.target||((t=document==null?void 0:document.getSelection())==null||t.removeAllRanges(),o.preventDefault(),o.stopPropagation(),q.value=o.target,D.value=o.target.value,A.value=!0)}function G(o){q.value=o.target}const Ae=["iframeScope.component.options[iframeScope.component.active.id]['model']['background-image']","iframeScope.component.options[iframeScope.component.active.id]['model']['icon-size']","iframeScope.fontsFilter","postsFilter","currentlyEditingFilter","iframeScope.iconFilter.title","iframeScope.component.options[iframeScope.component.active.id]['model']['z-index']","iframeScope.component.options[iframeScope.component.active.id]['model']['src']","iframeScope.component.options[iframeScope.component.active.id]['model']['rel']","iframeScope.component.options[iframeScope.component.active.id]['model']['url']","iframeScope.component.options[iframeScope.component.active.id]['model']['testimonial_photo']","iframeScope.component.options[iframeScope.component.active.id]['model']['pricing_box_price"],We=["iframeScope.component.options[iframeScope.component.active.id]['model']['title-*']","iframeScope.component.options[iframeScope.component.active.id]['model']['icon-*']","duration","url","speed","time","address","zoom"].map(o=>o.replace("*']","")),ze=`.oxygen-control input[type="text"]:not(.ct-iris-colorpicker):not([ng-model*="shortcode"])${Ae.map(o=>`:not([ng-model="${o}"])`).join("")}${We.map(o=>`:not([ng-model*="${o}"])`).join("")}`;function J(){setTimeout(()=>{let o=!1;[...document.querySelectorAll(ze)].forEach(t=>{(t==null?void 0:t.getAttribute("windpressoxygen-variable-app"))!=="listened"&&(t==null||t.removeEventListener("click",Y),t==null||t.addEventListener("click",Y),t==null||t.removeEventListener("focus",G),t==null||t.addEventListener("focus",G),t==null||t.setAttribute("windpressoxygen-variable-app","listened"),o=!0)}),o&&(q.value=null,D.value=null)},100)}let U=!1;Ie({selector:"#oxygen-sidebar",options:{subtree:!0,childList:!0},callback(o){U||(U=!0,J(),setTimeout(()=>{U=!1},100))}}),J(),document.addEventListener("keydown",o=>{o.key==="Escape"&&A.value&&(A.value=!1)}),K(A,o=>{z.style.zIndex=o?"calc(Infinity)":"-1"}),Z("Module loaded!",{module:"variable-picker"})});
