var Kr=Object.defineProperty;var Yr=(o,e,t)=>e in o?Kr(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var f=(o,e,t)=>Yr(o,typeof e!="symbol"?e+"":e,t);import{a as fn,r as Xr}from"./isObject-B5R9K1Pz.js";import{i as Qr}from"./isSymbol-DJmTqBMq.js";import{B as eo}from"./index-BHzFOpFs.js";var Jr=/\s/;function Zr(o){for(var e=o.length;e--&&Jr.test(o.charAt(e)););return e}var ei=/^\s+/;function ti(o){return o&&o.slice(0,Zr(o)+1).replace(ei,"")}var to=NaN,ni=/^[-+]0x[0-9a-f]+$/i,oi=/^0b[01]+$/i,ri=/^0o[0-7]+$/i,ii=parseInt;function no(o){if(typeof o=="number")return o;if(Qr(o))return to;if(fn(o)){var e=typeof o.valueOf=="function"?o.valueOf():o;o=fn(e)?e+"":e}if(typeof o!="string")return o===0?o:+o;o=ti(o);var t=oi.test(o);return t||ri.test(o)?ii(o.slice(2),t?2:8):ni.test(o)?to:+o}var gn=function(){return Xr.Date.now()},si="Expected a function",ai=Math.max,li=Math.min;function ci(o,e,t){var n,r,i,s,l,a,c=0,u=!1,p=!1,d=!0;if(typeof o!="function")throw new TypeError(si);e=no(e)||0,fn(t)&&(u=!!t.leading,p="maxWait"in t,i=p?ai(no(t.maxWait)||0,e):i,d="trailing"in t?!!t.trailing:d);function m(y){var E=n,N=r;return n=r=void 0,c=y,s=o.apply(N,E),s}function b(y){return c=y,l=setTimeout(C,e),u?m(y):s}function g(y){var E=y-a,N=y-c,A=e-E;return p?li(A,i-N):A}function v(y){var E=y-a,N=y-c;return a===void 0||E>=e||E<0||p&&N>=i}function C(){var y=gn();if(v(y))return k(y);l=setTimeout(C,g(y))}function k(y){return l=void 0,d&&n?m(y):(n=r=void 0,s)}function S(){l!==void 0&&clearTimeout(l),c=0,n=a=r=l=void 0}function h(){return l===void 0?s:k(gn())}function _(){var y=gn(),E=v(y);if(n=arguments,r=this,a=y,E){if(l===void 0)return b(a);if(p)return clearTimeout(l),l=setTimeout(C,e),m(a)}return l===void 0&&(l=setTimeout(C,e)),s}return _.cancel=S,_.flush=h,_}var J="top",ie="bottom",se="right",Z="left",mn="auto",it=[J,ie,se,Z],ze="start",st="end",ui="clippingParents",oo="viewport",at="popper",hi="reference",ro=it.reduce(function(o,e){return o.concat([e+"-"+ze,e+"-"+st])},[]),io=[].concat(it,[mn]).reduce(function(o,e){return o.concat([e,e+"-"+ze,e+"-"+st])},[]),pi="beforeRead",di="read",fi="afterRead",gi="beforeMain",mi="main",bi="afterMain",yi="beforeWrite",vi="write",wi="afterWrite",Si=[pi,di,fi,gi,mi,bi,yi,vi,wi];function ge(o){return o?(o.nodeName||"").toLowerCase():null}function te(o){if(o==null)return window;if(o.toString()!=="[object Window]"){var e=o.ownerDocument;return e&&e.defaultView||window}return o}function Pe(o){var e=te(o).Element;return o instanceof e||o instanceof Element}function ae(o){var e=te(o).HTMLElement;return o instanceof e||o instanceof HTMLElement}function bn(o){if(typeof ShadowRoot>"u")return!1;var e=te(o).ShadowRoot;return o instanceof e||o instanceof ShadowRoot}function _i(o){var e=o.state;Object.keys(e.elements).forEach(function(t){var n=e.styles[t]||{},r=e.attributes[t]||{},i=e.elements[t];!ae(i)||!ge(i)||(Object.assign(i.style,n),Object.keys(r).forEach(function(s){var l=r[s];l===!1?i.removeAttribute(s):i.setAttribute(s,l===!0?"":l)}))})}function Ci(o){var e=o.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(n){var r=e.elements[n],i=e.attributes[n]||{},s=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:t[n]),l=s.reduce(function(a,c){return a[c]="",a},{});!ae(r)||!ge(r)||(Object.assign(r.style,l),Object.keys(i).forEach(function(a){r.removeAttribute(a)}))})}}const so={name:"applyStyles",enabled:!0,phase:"write",fn:_i,effect:Ci,requires:["computeStyles"]};function me(o){return o.split("-")[0]}var Re=Math.max,Ft=Math.min,He=Math.round;function yn(){var o=navigator.userAgentData;return o!=null&&o.brands&&Array.isArray(o.brands)?o.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function ao(){return!/^((?!chrome|android).)*safari/i.test(yn())}function qe(o,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var n=o.getBoundingClientRect(),r=1,i=1;e&&ae(o)&&(r=o.offsetWidth>0&&He(n.width)/o.offsetWidth||1,i=o.offsetHeight>0&&He(n.height)/o.offsetHeight||1);var s=Pe(o)?te(o):window,l=s.visualViewport,a=!ao()&&t,c=(n.left+(a&&l?l.offsetLeft:0))/r,u=(n.top+(a&&l?l.offsetTop:0))/i,p=n.width/r,d=n.height/i;return{width:p,height:d,top:u,right:c+p,bottom:u+d,left:c,x:c,y:u}}function vn(o){var e=qe(o),t=o.offsetWidth,n=o.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:o.offsetLeft,y:o.offsetTop,width:t,height:n}}function lo(o,e){var t=e.getRootNode&&e.getRootNode();if(o.contains(e))return!0;if(t&&bn(t)){var n=e;do{if(n&&o.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function ve(o){return te(o).getComputedStyle(o)}function xi(o){return["table","td","th"].indexOf(ge(o))>=0}function Te(o){return((Pe(o)?o.ownerDocument:o.document)||window.document).documentElement}function Ut(o){return ge(o)==="html"?o:o.assignedSlot||o.parentNode||(bn(o)?o.host:null)||Te(o)}function co(o){return!ae(o)||ve(o).position==="fixed"?null:o.offsetParent}function ki(o){var e=/firefox/i.test(yn()),t=/Trident/i.test(yn());if(t&&ae(o)){var n=ve(o);if(n.position==="fixed")return null}var r=Ut(o);for(bn(r)&&(r=r.host);ae(r)&&["html","body"].indexOf(ge(r))<0;){var i=ve(r);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||e&&i.willChange==="filter"||e&&i.filter&&i.filter!=="none")return r;r=r.parentNode}return null}function lt(o){for(var e=te(o),t=co(o);t&&xi(t)&&ve(t).position==="static";)t=co(t);return t&&(ge(t)==="html"||ge(t)==="body"&&ve(t).position==="static")?e:t||ki(o)||e}function wn(o){return["top","bottom"].indexOf(o)>=0?"x":"y"}function ct(o,e,t){return Re(o,Ft(e,t))}function Ti(o,e,t){var n=ct(o,e,t);return n>t?t:n}function uo(){return{top:0,right:0,bottom:0,left:0}}function ho(o){return Object.assign({},uo(),o)}function po(o,e){return e.reduce(function(t,n){return t[n]=o,t},{})}var Ei=function(o,e){return o=typeof o=="function"?o(Object.assign({},e.rects,{placement:e.placement})):o,ho(typeof o!="number"?o:po(o,it))};function Ai(o){var e,t=o.state,n=o.name,r=o.options,i=t.elements.arrow,s=t.modifiersData.popperOffsets,l=me(t.placement),a=wn(l),c=[Z,se].indexOf(l)>=0,u=c?"height":"width";if(!(!i||!s)){var p=Ei(r.padding,t),d=vn(i),m=a==="y"?J:Z,b=a==="y"?ie:se,g=t.rects.reference[u]+t.rects.reference[a]-s[a]-t.rects.popper[u],v=s[a]-t.rects.reference[a],C=lt(i),k=C?a==="y"?C.clientHeight||0:C.clientWidth||0:0,S=g/2-v/2,h=p[m],_=k-d[u]-p[b],y=k/2-d[u]/2+S,E=ct(h,y,_),N=a;t.modifiersData[n]=(e={},e[N]=E,e.centerOffset=E-y,e)}}function Li(o){var e=o.state,t=o.options,n=t.element,r=n===void 0?"[data-popper-arrow]":n;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||lo(e.elements.popper,r)&&(e.elements.arrow=r))}const Ni={name:"arrow",enabled:!0,phase:"main",fn:Ai,effect:Li,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ve(o){return o.split("-")[1]}var Oi={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Pi(o,e){var t=o.x,n=o.y,r=e.devicePixelRatio||1;return{x:He(t*r)/r||0,y:He(n*r)/r||0}}function fo(o){var e,t=o.popper,n=o.popperRect,r=o.placement,i=o.variation,s=o.offsets,l=o.position,a=o.gpuAcceleration,c=o.adaptive,u=o.roundOffsets,p=o.isFixed,d=s.x,m=d===void 0?0:d,b=s.y,g=b===void 0?0:b,v=typeof u=="function"?u({x:m,y:g}):{x:m,y:g};m=v.x,g=v.y;var C=s.hasOwnProperty("x"),k=s.hasOwnProperty("y"),S=Z,h=J,_=window;if(c){var y=lt(t),E="clientHeight",N="clientWidth";if(y===te(t)&&(y=Te(t),ve(y).position!=="static"&&l==="absolute"&&(E="scrollHeight",N="scrollWidth")),y=y,r===J||(r===Z||r===se)&&i===st){h=ie;var A=p&&y===_&&_.visualViewport?_.visualViewport.height:y[E];g-=A-n.height,g*=a?1:-1}if(r===Z||(r===J||r===ie)&&i===st){S=se;var R=p&&y===_&&_.visualViewport?_.visualViewport.width:y[N];m-=R-n.width,m*=a?1:-1}}var I=Object.assign({position:l},c&&Oi),D=u===!0?Pi({x:m,y:g},te(t)):{x:m,y:g};if(m=D.x,g=D.y,a){var B;return Object.assign({},I,(B={},B[h]=k?"0":"",B[S]=C?"0":"",B.transform=(_.devicePixelRatio||1)<=1?"translate("+m+"px, "+g+"px)":"translate3d("+m+"px, "+g+"px, 0)",B))}return Object.assign({},I,(e={},e[h]=k?g+"px":"",e[S]=C?m+"px":"",e.transform="",e))}function Ri(o){var e=o.state,t=o.options,n=t.gpuAcceleration,r=n===void 0?!0:n,i=t.adaptive,s=i===void 0?!0:i,l=t.roundOffsets,a=l===void 0?!0:l,c={placement:me(e.placement),variation:Ve(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,fo(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:a})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,fo(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Mi={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Ri,data:{}};var Gt={passive:!0};function Ii(o){var e=o.state,t=o.instance,n=o.options,r=n.scroll,i=r===void 0?!0:r,s=n.resize,l=s===void 0?!0:s,a=te(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&c.forEach(function(u){u.addEventListener("scroll",t.update,Gt)}),l&&a.addEventListener("resize",t.update,Gt),function(){i&&c.forEach(function(u){u.removeEventListener("scroll",t.update,Gt)}),l&&a.removeEventListener("resize",t.update,Gt)}}const Di={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Ii,data:{}};var Bi={left:"right",right:"left",bottom:"top",top:"bottom"};function jt(o){return o.replace(/left|right|bottom|top/g,function(e){return Bi[e]})}var Fi={start:"end",end:"start"};function go(o){return o.replace(/start|end/g,function(e){return Fi[e]})}function Sn(o){var e=te(o),t=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:t,scrollTop:n}}function _n(o){return qe(Te(o)).left+Sn(o).scrollLeft}function Ui(o,e){var t=te(o),n=Te(o),r=t.visualViewport,i=n.clientWidth,s=n.clientHeight,l=0,a=0;if(r){i=r.width,s=r.height;var c=ao();(c||!c&&e==="fixed")&&(l=r.offsetLeft,a=r.offsetTop)}return{width:i,height:s,x:l+_n(o),y:a}}function Gi(o){var e,t=Te(o),n=Sn(o),r=(e=o.ownerDocument)==null?void 0:e.body,i=Re(t.scrollWidth,t.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),s=Re(t.scrollHeight,t.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),l=-n.scrollLeft+_n(o),a=-n.scrollTop;return ve(r||t).direction==="rtl"&&(l+=Re(t.clientWidth,r?r.clientWidth:0)-i),{width:i,height:s,x:l,y:a}}function Cn(o){var e=ve(o),t=e.overflow,n=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+r+n)}function mo(o){return["html","body","#document"].indexOf(ge(o))>=0?o.ownerDocument.body:ae(o)&&Cn(o)?o:mo(Ut(o))}function ut(o,e){var t;e===void 0&&(e=[]);var n=mo(o),r=n===((t=o.ownerDocument)==null?void 0:t.body),i=te(n),s=r?[i].concat(i.visualViewport||[],Cn(n)?n:[]):n,l=e.concat(s);return r?l:l.concat(ut(Ut(s)))}function xn(o){return Object.assign({},o,{left:o.x,top:o.y,right:o.x+o.width,bottom:o.y+o.height})}function ji(o,e){var t=qe(o,!1,e==="fixed");return t.top=t.top+o.clientTop,t.left=t.left+o.clientLeft,t.bottom=t.top+o.clientHeight,t.right=t.left+o.clientWidth,t.width=o.clientWidth,t.height=o.clientHeight,t.x=t.left,t.y=t.top,t}function bo(o,e,t){return e===oo?xn(Ui(o,t)):Pe(e)?ji(e,t):xn(Gi(Te(o)))}function Wi(o){var e=ut(Ut(o)),t=["absolute","fixed"].indexOf(ve(o).position)>=0,n=t&&ae(o)?lt(o):o;return Pe(n)?e.filter(function(r){return Pe(r)&&lo(r,n)&&ge(r)!=="body"}):[]}function $i(o,e,t,n){var r=e==="clippingParents"?Wi(o):[].concat(e),i=[].concat(r,[t]),s=i[0],l=i.reduce(function(a,c){var u=bo(o,c,n);return a.top=Re(u.top,a.top),a.right=Ft(u.right,a.right),a.bottom=Ft(u.bottom,a.bottom),a.left=Re(u.left,a.left),a},bo(o,s,n));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function yo(o){var e=o.reference,t=o.element,n=o.placement,r=n?me(n):null,i=n?Ve(n):null,s=e.x+e.width/2-t.width/2,l=e.y+e.height/2-t.height/2,a;switch(r){case J:a={x:s,y:e.y-t.height};break;case ie:a={x:s,y:e.y+e.height};break;case se:a={x:e.x+e.width,y:l};break;case Z:a={x:e.x-t.width,y:l};break;default:a={x:e.x,y:e.y}}var c=r?wn(r):null;if(c!=null){var u=c==="y"?"height":"width";switch(i){case ze:a[c]=a[c]-(e[u]/2-t[u]/2);break;case st:a[c]=a[c]+(e[u]/2-t[u]/2);break}}return a}function ht(o,e){e===void 0&&(e={});var t=e,n=t.placement,r=n===void 0?o.placement:n,i=t.strategy,s=i===void 0?o.strategy:i,l=t.boundary,a=l===void 0?ui:l,c=t.rootBoundary,u=c===void 0?oo:c,p=t.elementContext,d=p===void 0?at:p,m=t.altBoundary,b=m===void 0?!1:m,g=t.padding,v=g===void 0?0:g,C=ho(typeof v!="number"?v:po(v,it)),k=d===at?hi:at,S=o.rects.popper,h=o.elements[b?k:d],_=$i(Pe(h)?h:h.contextElement||Te(o.elements.popper),a,u,s),y=qe(o.elements.reference),E=yo({reference:y,element:S,strategy:"absolute",placement:r}),N=xn(Object.assign({},S,E)),A=d===at?N:y,R={top:_.top-A.top+C.top,bottom:A.bottom-_.bottom+C.bottom,left:_.left-A.left+C.left,right:A.right-_.right+C.right},I=o.modifiersData.offset;if(d===at&&I){var D=I[r];Object.keys(R).forEach(function(B){var G=[se,ie].indexOf(B)>=0?1:-1,j=[J,ie].indexOf(B)>=0?"y":"x";R[B]+=D[j]*G})}return R}function zi(o,e){e===void 0&&(e={});var t=e,n=t.placement,r=t.boundary,i=t.rootBoundary,s=t.padding,l=t.flipVariations,a=t.allowedAutoPlacements,c=a===void 0?io:a,u=Ve(n),p=u?l?ro:ro.filter(function(b){return Ve(b)===u}):it,d=p.filter(function(b){return c.indexOf(b)>=0});d.length===0&&(d=p);var m=d.reduce(function(b,g){return b[g]=ht(o,{placement:g,boundary:r,rootBoundary:i,padding:s})[me(g)],b},{});return Object.keys(m).sort(function(b,g){return m[b]-m[g]})}function Hi(o){if(me(o)===mn)return[];var e=jt(o);return[go(o),e,go(e)]}function qi(o){var e=o.state,t=o.options,n=o.name;if(!e.modifiersData[n]._skip){for(var r=t.mainAxis,i=r===void 0?!0:r,s=t.altAxis,l=s===void 0?!0:s,a=t.fallbackPlacements,c=t.padding,u=t.boundary,p=t.rootBoundary,d=t.altBoundary,m=t.flipVariations,b=m===void 0?!0:m,g=t.allowedAutoPlacements,v=e.options.placement,C=me(v),k=C===v,S=a||(k||!b?[jt(v)]:Hi(v)),h=[v].concat(S).reduce(function(fe,oe){return fe.concat(me(oe)===mn?zi(e,{placement:oe,boundary:u,rootBoundary:p,padding:c,flipVariations:b,allowedAutoPlacements:g}):oe)},[]),_=e.rects.reference,y=e.rects.popper,E=new Map,N=!0,A=h[0],R=0;R<h.length;R++){var I=h[R],D=me(I),B=Ve(I)===ze,G=[J,ie].indexOf(D)>=0,j=G?"width":"height",W=ht(e,{placement:I,boundary:u,rootBoundary:p,altBoundary:d,padding:c}),Y=G?B?se:Z:B?ie:J;_[j]>y[j]&&(Y=jt(Y));var V=jt(Y),he=[];if(i&&he.push(W[D]<=0),l&&he.push(W[Y]<=0,W[V]<=0),he.every(function(fe){return fe})){A=I,N=!1;break}E.set(I,he)}if(N)for(var pe=b?3:1,Ee=function(fe){var oe=h.find(function(_e){var Le=E.get(_e);if(Le)return Le.slice(0,fe).every(function(Ce){return Ce})});if(oe)return A=oe,"break"},de=pe;de>0;de--){var Ae=Ee(de);if(Ae==="break")break}e.placement!==A&&(e.modifiersData[n]._skip=!0,e.placement=A,e.reset=!0)}}const Vi={name:"flip",enabled:!0,phase:"main",fn:qi,requiresIfExists:["offset"],data:{_skip:!1}};function vo(o,e,t){return t===void 0&&(t={x:0,y:0}),{top:o.top-e.height-t.y,right:o.right-e.width+t.x,bottom:o.bottom-e.height+t.y,left:o.left-e.width-t.x}}function wo(o){return[J,se,ie,Z].some(function(e){return o[e]>=0})}function Ki(o){var e=o.state,t=o.name,n=e.rects.reference,r=e.rects.popper,i=e.modifiersData.preventOverflow,s=ht(e,{elementContext:"reference"}),l=ht(e,{altBoundary:!0}),a=vo(s,n),c=vo(l,r,i),u=wo(a),p=wo(c);e.modifiersData[t]={referenceClippingOffsets:a,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:p},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":p})}const Yi={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Ki};function Xi(o,e,t){var n=me(o),r=[Z,J].indexOf(n)>=0?-1:1,i=typeof t=="function"?t(Object.assign({},e,{placement:o})):t,s=i[0],l=i[1];return s=s||0,l=(l||0)*r,[Z,se].indexOf(n)>=0?{x:l,y:s}:{x:s,y:l}}function Qi(o){var e=o.state,t=o.options,n=o.name,r=t.offset,i=r===void 0?[0,0]:r,s=io.reduce(function(u,p){return u[p]=Xi(p,e.rects,i),u},{}),l=s[e.placement],a=l.x,c=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=a,e.modifiersData.popperOffsets.y+=c),e.modifiersData[n]=s}const Ji={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Qi};function Zi(o){var e=o.state,t=o.name;e.modifiersData[t]=yo({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const es={name:"popperOffsets",enabled:!0,phase:"read",fn:Zi,data:{}};function ts(o){return o==="x"?"y":"x"}function ns(o){var e=o.state,t=o.options,n=o.name,r=t.mainAxis,i=r===void 0?!0:r,s=t.altAxis,l=s===void 0?!1:s,a=t.boundary,c=t.rootBoundary,u=t.altBoundary,p=t.padding,d=t.tether,m=d===void 0?!0:d,b=t.tetherOffset,g=b===void 0?0:b,v=ht(e,{boundary:a,rootBoundary:c,padding:p,altBoundary:u}),C=me(e.placement),k=Ve(e.placement),S=!k,h=wn(C),_=ts(h),y=e.modifiersData.popperOffsets,E=e.rects.reference,N=e.rects.popper,A=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,R=typeof A=="number"?{mainAxis:A,altAxis:A}:Object.assign({mainAxis:0,altAxis:0},A),I=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,D={x:0,y:0};if(y){if(i){var B,G=h==="y"?J:Z,j=h==="y"?ie:se,W=h==="y"?"height":"width",Y=y[h],V=Y+v[G],he=Y-v[j],pe=m?-N[W]/2:0,Ee=k===ze?E[W]:N[W],de=k===ze?-N[W]:-E[W],Ae=e.elements.arrow,fe=m&&Ae?vn(Ae):{width:0,height:0},oe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:uo(),_e=oe[G],Le=oe[j],Ce=ct(0,E[W],fe[W]),kt=S?E[W]/2-pe-Ce-_e-R.mainAxis:Ee-Ce-_e-R.mainAxis,xe=S?-E[W]/2+pe+Ce+Le+R.mainAxis:de+Ce+Le+R.mainAxis,je=e.elements.arrow&&lt(e.elements.arrow),Tt=je?h==="y"?je.clientTop||0:je.clientLeft||0:0,et=(B=I==null?void 0:I[h])!=null?B:0,Et=Y+kt-et-Tt,At=Y+xe-et,tt=ct(m?Ft(V,Et):V,Y,m?Re(he,At):he);y[h]=tt,D[h]=tt-Y}if(l){var nt,Lt=h==="x"?J:Z,Nt=h==="x"?ie:se,ye=y[_],ke=_==="y"?"height":"width",ot=ye+v[Lt],Ne=ye-v[Nt],rt=[J,Z].indexOf(C)!==-1,Ot=(nt=I==null?void 0:I[_])!=null?nt:0,Pt=rt?ot:ye-E[ke]-N[ke]-Ot+R.altAxis,Rt=rt?ye+E[ke]+N[ke]-Ot-R.altAxis:Ne,Mt=m&&rt?Ti(Pt,ye,Rt):ct(m?Pt:ot,ye,m?Rt:Ne);y[_]=Mt,D[_]=Mt-ye}e.modifiersData[n]=D}}const os={name:"preventOverflow",enabled:!0,phase:"main",fn:ns,requiresIfExists:["offset"]};function rs(o){return{scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}}function is(o){return o===te(o)||!ae(o)?Sn(o):rs(o)}function ss(o){var e=o.getBoundingClientRect(),t=He(e.width)/o.offsetWidth||1,n=He(e.height)/o.offsetHeight||1;return t!==1||n!==1}function as(o,e,t){t===void 0&&(t=!1);var n=ae(e),r=ae(e)&&ss(e),i=Te(e),s=qe(o,r,t),l={scrollLeft:0,scrollTop:0},a={x:0,y:0};return(n||!n&&!t)&&((ge(e)!=="body"||Cn(i))&&(l=is(e)),ae(e)?(a=qe(e,!0),a.x+=e.clientLeft,a.y+=e.clientTop):i&&(a.x=_n(i))),{x:s.left+l.scrollLeft-a.x,y:s.top+l.scrollTop-a.y,width:s.width,height:s.height}}function ls(o){var e=new Map,t=new Set,n=[];o.forEach(function(i){e.set(i.name,i)});function r(i){t.add(i.name);var s=[].concat(i.requires||[],i.requiresIfExists||[]);s.forEach(function(l){if(!t.has(l)){var a=e.get(l);a&&r(a)}}),n.push(i)}return o.forEach(function(i){t.has(i.name)||r(i)}),n}function cs(o){var e=ls(o);return Si.reduce(function(t,n){return t.concat(e.filter(function(r){return r.phase===n}))},[])}function us(o){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(o())})})),e}}function hs(o){var e=o.reduce(function(t,n){var r=t[n.name];return t[n.name]=r?Object.assign({},r,n,{options:Object.assign({},r.options,n.options),data:Object.assign({},r.data,n.data)}):n,t},{});return Object.keys(e).map(function(t){return e[t]})}var So={placement:"bottom",modifiers:[],strategy:"absolute"};function _o(){for(var o=arguments.length,e=new Array(o),t=0;t<o;t++)e[t]=arguments[t];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function ps(o){o===void 0&&(o={});var e=o,t=e.defaultModifiers,n=t===void 0?[]:t,r=e.defaultOptions,i=r===void 0?So:r;return function(s,l,a){a===void 0&&(a=i);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},So,i),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},u=[],p=!1,d={state:c,setOptions:function(g){var v=typeof g=="function"?g(c.options):g;b(),c.options=Object.assign({},i,c.options,v),c.scrollParents={reference:Pe(s)?ut(s):s.contextElement?ut(s.contextElement):[],popper:ut(l)};var C=cs(hs([].concat(n,c.options.modifiers)));return c.orderedModifiers=C.filter(function(k){return k.enabled}),m(),d.update()},forceUpdate:function(){if(!p){var g=c.elements,v=g.reference,C=g.popper;if(_o(v,C)){c.rects={reference:as(v,lt(C),c.options.strategy==="fixed"),popper:vn(C)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(N){return c.modifiersData[N.name]=Object.assign({},N.data)});for(var k=0;k<c.orderedModifiers.length;k++){if(c.reset===!0){c.reset=!1,k=-1;continue}var S=c.orderedModifiers[k],h=S.fn,_=S.options,y=_===void 0?{}:_,E=S.name;typeof h=="function"&&(c=h({state:c,options:y,name:E,instance:d})||c)}}}},update:us(function(){return new Promise(function(g){d.forceUpdate(),g(c)})}),destroy:function(){b(),p=!0}};if(!_o(s,l))return d;d.setOptions(a).then(function(g){!p&&a.onFirstUpdate&&a.onFirstUpdate(g)});function m(){c.orderedModifiers.forEach(function(g){var v=g.name,C=g.options,k=C===void 0?{}:C,S=g.effect;if(typeof S=="function"){var h=S({state:c,name:v,instance:d,options:k}),_=function(){};u.push(h||_)}})}function b(){u.forEach(function(g){return g()}),u=[]}return d}}var ds=[Di,es,Mi,so,Ji,Vi,os,Ni,Yi],fs=ps({defaultModifiers:ds}),gs="tippy-box",Co="tippy-content",ms="tippy-backdrop",xo="tippy-arrow",ko="tippy-svg-arrow",Me={passive:!0,capture:!0},To=function(){return document.body};function kn(o,e,t){if(Array.isArray(o)){var n=o[e];return n??(Array.isArray(t)?t[e]:t)}return o}function Tn(o,e){var t={}.toString.call(o);return t.indexOf("[object")===0&&t.indexOf(e+"]")>-1}function Eo(o,e){return typeof o=="function"?o.apply(void 0,e):o}function Ao(o,e){if(e===0)return o;var t;return function(n){clearTimeout(t),t=setTimeout(function(){o(n)},e)}}function bs(o){return o.split(/\s+/).filter(Boolean)}function Ke(o){return[].concat(o)}function Lo(o,e){o.indexOf(e)===-1&&o.push(e)}function ys(o){return o.filter(function(e,t){return o.indexOf(e)===t})}function vs(o){return o.split("-")[0]}function Wt(o){return[].slice.call(o)}function No(o){return Object.keys(o).reduce(function(e,t){return o[t]!==void 0&&(e[t]=o[t]),e},{})}function pt(){return document.createElement("div")}function $t(o){return["Element","Fragment"].some(function(e){return Tn(o,e)})}function ws(o){return Tn(o,"NodeList")}function Oo(o){return Tn(o,"MouseEvent")}function Ss(o){return!!(o&&o._tippy&&o._tippy.reference===o)}function _s(o){return $t(o)?[o]:ws(o)?Wt(o):Array.isArray(o)?o:Wt(document.querySelectorAll(o))}function En(o,e){o.forEach(function(t){t&&(t.style.transitionDuration=e+"ms")})}function Po(o,e){o.forEach(function(t){t&&t.setAttribute("data-state",e)})}function Ro(o){var e,t=Ke(o),n=t[0];return n!=null&&(e=n.ownerDocument)!=null&&e.body?n.ownerDocument:document}function Cs(o,e){var t=e.clientX,n=e.clientY;return o.every(function(r){var i=r.popperRect,s=r.popperState,l=r.props,a=l.interactiveBorder,c=vs(s.placement),u=s.modifiersData.offset;if(!u)return!0;var p=c==="bottom"?u.top.y:0,d=c==="top"?u.bottom.y:0,m=c==="right"?u.left.x:0,b=c==="left"?u.right.x:0,g=i.top-n+p>a,v=n-i.bottom-d>a,C=i.left-t+m>a,k=t-i.right-b>a;return g||v||C||k})}function An(o,e,t){var n=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(r){o[n](r,t)})}function Mo(o,e){for(var t=e;t;){var n;if(o.contains(t))return!0;t=t.getRootNode==null||(n=t.getRootNode())==null?void 0:n.host}return!1}var be={isTouch:!1},Io=0;function xs(){be.isTouch||(be.isTouch=!0,window.performance&&document.addEventListener("mousemove",Do))}function Do(){var o=performance.now();o-Io<20&&(be.isTouch=!1,document.removeEventListener("mousemove",Do)),Io=o}function ks(){var o=document.activeElement;if(Ss(o)){var e=o._tippy;o.blur&&!e.state.isVisible&&o.blur()}}function Ts(){document.addEventListener("touchstart",xs,Me),window.addEventListener("blur",ks)}var Es=typeof window<"u"&&typeof document<"u",As=Es?!!window.msCrypto:!1,Ls={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Ns={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},ce=Object.assign({appendTo:To,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Ls,Ns),Os=Object.keys(ce),Ps=function(o){var e=Object.keys(o);e.forEach(function(t){ce[t]=o[t]})};function Bo(o){var e=o.plugins||[],t=e.reduce(function(n,r){var i=r.name,s=r.defaultValue;if(i){var l;n[i]=o[i]!==void 0?o[i]:(l=ce[i])!=null?l:s}return n},{});return Object.assign({},o,t)}function Rs(o,e){var t=e?Object.keys(Bo(Object.assign({},ce,{plugins:e}))):Os,n=t.reduce(function(r,i){var s=(o.getAttribute("data-tippy-"+i)||"").trim();if(!s)return r;if(i==="content")r[i]=s;else try{r[i]=JSON.parse(s)}catch{r[i]=s}return r},{});return n}function Fo(o,e){var t=Object.assign({},e,{content:Eo(e.content,[o])},e.ignoreAttributes?{}:Rs(o,e.plugins));return t.aria=Object.assign({},ce.aria,t.aria),t.aria={expanded:t.aria.expanded==="auto"?e.interactive:t.aria.expanded,content:t.aria.content==="auto"?e.interactive?null:"describedby":t.aria.content},t}var Ms=function(){return"innerHTML"};function Ln(o,e){o[Ms()]=e}function Uo(o){var e=pt();return o===!0?e.className=xo:(e.className=ko,$t(o)?e.appendChild(o):Ln(e,o)),e}function Go(o,e){$t(e.content)?(Ln(o,""),o.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?Ln(o,e.content):o.textContent=e.content)}function Nn(o){var e=o.firstElementChild,t=Wt(e.children);return{box:e,content:t.find(function(n){return n.classList.contains(Co)}),arrow:t.find(function(n){return n.classList.contains(xo)||n.classList.contains(ko)}),backdrop:t.find(function(n){return n.classList.contains(ms)})}}function jo(o){var e=pt(),t=pt();t.className=gs,t.setAttribute("data-state","hidden"),t.setAttribute("tabindex","-1");var n=pt();n.className=Co,n.setAttribute("data-state","hidden"),Go(n,o.props),e.appendChild(t),t.appendChild(n),r(o.props,o.props);function r(i,s){var l=Nn(e),a=l.box,c=l.content,u=l.arrow;s.theme?a.setAttribute("data-theme",s.theme):a.removeAttribute("data-theme"),typeof s.animation=="string"?a.setAttribute("data-animation",s.animation):a.removeAttribute("data-animation"),s.inertia?a.setAttribute("data-inertia",""):a.removeAttribute("data-inertia"),a.style.maxWidth=typeof s.maxWidth=="number"?s.maxWidth+"px":s.maxWidth,s.role?a.setAttribute("role",s.role):a.removeAttribute("role"),(i.content!==s.content||i.allowHTML!==s.allowHTML)&&Go(c,o.props),s.arrow?u?i.arrow!==s.arrow&&(a.removeChild(u),a.appendChild(Uo(s.arrow))):a.appendChild(Uo(s.arrow)):u&&a.removeChild(u)}return{popper:e,onUpdate:r}}jo.$$tippy=!0;var Is=1,zt=[],On=[];function Ds(o,e){var t=Fo(o,Object.assign({},ce,Bo(No(e)))),n,r,i,s=!1,l=!1,a=!1,c=!1,u,p,d,m=[],b=Ao(Et,t.interactiveDebounce),g,v=Is++,C=null,k=ys(t.plugins),S={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},h={id:v,reference:o,popper:pt(),popperInstance:C,props:t,state:S,plugins:k,clearDelayTimeouts:Pt,setProps:Rt,setContent:Mt,show:Wr,hide:$r,hideWithInteractivity:zr,enable:rt,disable:Ot,unmount:Hr,destroy:qr};if(!t.render)return h;var _=t.render(h),y=_.popper,E=_.onUpdate;y.setAttribute("data-tippy-root",""),y.id="tippy-"+h.id,h.popper=y,o._tippy=h,y._tippy=h;var N=k.map(function(w){return w.fn(h)}),A=o.hasAttribute("aria-expanded");return je(),pe(),Y(),V("onCreate",[h]),t.showOnCreate&&ot(),y.addEventListener("mouseenter",function(){h.props.interactive&&h.state.isVisible&&h.clearDelayTimeouts()}),y.addEventListener("mouseleave",function(){h.props.interactive&&h.props.trigger.indexOf("mouseenter")>=0&&G().addEventListener("mousemove",b)}),h;function R(){var w=h.props.touch;return Array.isArray(w)?w:[w,0]}function I(){return R()[0]==="hold"}function D(){var w;return!!((w=h.props.render)!=null&&w.$$tippy)}function B(){return g||o}function G(){var w=B().parentNode;return w?Ro(w):document}function j(){return Nn(y)}function W(w){return h.state.isMounted&&!h.state.isVisible||be.isTouch||u&&u.type==="focus"?0:kn(h.props.delay,w?0:1,ce.delay)}function Y(w){w===void 0&&(w=!1),y.style.pointerEvents=h.props.interactive&&!w?"":"none",y.style.zIndex=""+h.props.zIndex}function V(w,T,L){if(L===void 0&&(L=!0),N.forEach(function(P){P[w]&&P[w].apply(P,T)}),L){var M;(M=h.props)[w].apply(M,T)}}function he(){var w=h.props.aria;if(w.content){var T="aria-"+w.content,L=y.id,M=Ke(h.props.triggerTarget||o);M.forEach(function(P){var X=P.getAttribute(T);if(h.state.isVisible)P.setAttribute(T,X?X+" "+L:L);else{var re=X&&X.replace(L,"").trim();re?P.setAttribute(T,re):P.removeAttribute(T)}})}}function pe(){if(!(A||!h.props.aria.expanded)){var w=Ke(h.props.triggerTarget||o);w.forEach(function(T){h.props.interactive?T.setAttribute("aria-expanded",h.state.isVisible&&T===B()?"true":"false"):T.removeAttribute("aria-expanded")})}}function Ee(){G().removeEventListener("mousemove",b),zt=zt.filter(function(w){return w!==b})}function de(w){if(!(be.isTouch&&(a||w.type==="mousedown"))){var T=w.composedPath&&w.composedPath()[0]||w.target;if(!(h.props.interactive&&Mo(y,T))){if(Ke(h.props.triggerTarget||o).some(function(L){return Mo(L,T)})){if(be.isTouch||h.state.isVisible&&h.props.trigger.indexOf("click")>=0)return}else V("onClickOutside",[h,w]);h.props.hideOnClick===!0&&(h.clearDelayTimeouts(),h.hide(),l=!0,setTimeout(function(){l=!1}),h.state.isMounted||_e())}}}function Ae(){a=!0}function fe(){a=!1}function oe(){var w=G();w.addEventListener("mousedown",de,!0),w.addEventListener("touchend",de,Me),w.addEventListener("touchstart",fe,Me),w.addEventListener("touchmove",Ae,Me)}function _e(){var w=G();w.removeEventListener("mousedown",de,!0),w.removeEventListener("touchend",de,Me),w.removeEventListener("touchstart",fe,Me),w.removeEventListener("touchmove",Ae,Me)}function Le(w,T){kt(w,function(){!h.state.isVisible&&y.parentNode&&y.parentNode.contains(y)&&T()})}function Ce(w,T){kt(w,T)}function kt(w,T){var L=j().box;function M(P){P.target===L&&(An(L,"remove",M),T())}if(w===0)return T();An(L,"remove",p),An(L,"add",M),p=M}function xe(w,T,L){L===void 0&&(L=!1);var M=Ke(h.props.triggerTarget||o);M.forEach(function(P){P.addEventListener(w,T,L),m.push({node:P,eventType:w,handler:T,options:L})})}function je(){I()&&(xe("touchstart",et,{passive:!0}),xe("touchend",At,{passive:!0})),bs(h.props.trigger).forEach(function(w){if(w!=="manual")switch(xe(w,et),w){case"mouseenter":xe("mouseleave",At);break;case"focus":xe(As?"focusout":"blur",tt);break;case"focusin":xe("focusout",tt);break}})}function Tt(){m.forEach(function(w){var T=w.node,L=w.eventType,M=w.handler,P=w.options;T.removeEventListener(L,M,P)}),m=[]}function et(w){var T,L=!1;if(!(!h.state.isEnabled||nt(w)||l)){var M=((T=u)==null?void 0:T.type)==="focus";u=w,g=w.currentTarget,pe(),!h.state.isVisible&&Oo(w)&&zt.forEach(function(P){return P(w)}),w.type==="click"&&(h.props.trigger.indexOf("mouseenter")<0||s)&&h.props.hideOnClick!==!1&&h.state.isVisible?L=!0:ot(w),w.type==="click"&&(s=!L),L&&!M&&Ne(w)}}function Et(w){var T=w.target,L=B().contains(T)||y.contains(T);if(!(w.type==="mousemove"&&L)){var M=ke().concat(y).map(function(P){var X,re=P._tippy,We=(X=re.popperInstance)==null?void 0:X.state;return We?{popperRect:P.getBoundingClientRect(),popperState:We,props:t}:null}).filter(Boolean);Cs(M,w)&&(Ee(),Ne(w))}}function At(w){var T=nt(w)||h.props.trigger.indexOf("click")>=0&&s;if(!T){if(h.props.interactive){h.hideWithInteractivity(w);return}Ne(w)}}function tt(w){h.props.trigger.indexOf("focusin")<0&&w.target!==B()||h.props.interactive&&w.relatedTarget&&y.contains(w.relatedTarget)||Ne(w)}function nt(w){return be.isTouch?I()!==w.type.indexOf("touch")>=0:!1}function Lt(){Nt();var w=h.props,T=w.popperOptions,L=w.placement,M=w.offset,P=w.getReferenceClientRect,X=w.moveTransition,re=D()?Nn(y).arrow:null,We=P?{getBoundingClientRect:P,contextElement:P.contextElement||B()}:o,It={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Dt){var $e=Dt.state;if(D()){var Vr=j(),dn=Vr.box;["placement","reference-hidden","escaped"].forEach(function(Bt){Bt==="placement"?dn.setAttribute("data-placement",$e.placement):$e.attributes.popper["data-popper-"+Bt]?dn.setAttribute("data-"+Bt,""):dn.removeAttribute("data-"+Bt)}),$e.attributes.popper={}}}},Oe=[{name:"offset",options:{offset:M}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!X}},It];D()&&re&&Oe.push({name:"arrow",options:{element:re,padding:3}}),Oe.push.apply(Oe,(T==null?void 0:T.modifiers)||[]),h.popperInstance=fs(We,y,Object.assign({},T,{placement:L,onFirstUpdate:d,modifiers:Oe}))}function Nt(){h.popperInstance&&(h.popperInstance.destroy(),h.popperInstance=null)}function ye(){var w=h.props.appendTo,T,L=B();h.props.interactive&&w===To||w==="parent"?T=L.parentNode:T=Eo(w,[L]),T.contains(y)||T.appendChild(y),h.state.isMounted=!0,Lt()}function ke(){return Wt(y.querySelectorAll("[data-tippy-root]"))}function ot(w){h.clearDelayTimeouts(),w&&V("onTrigger",[h,w]),oe();var T=W(!0),L=R(),M=L[0],P=L[1];be.isTouch&&M==="hold"&&P&&(T=P),T?n=setTimeout(function(){h.show()},T):h.show()}function Ne(w){if(h.clearDelayTimeouts(),V("onUntrigger",[h,w]),!h.state.isVisible){_e();return}if(!(h.props.trigger.indexOf("mouseenter")>=0&&h.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(w.type)>=0&&s)){var T=W(!1);T?r=setTimeout(function(){h.state.isVisible&&h.hide()},T):i=requestAnimationFrame(function(){h.hide()})}}function rt(){h.state.isEnabled=!0}function Ot(){h.hide(),h.state.isEnabled=!1}function Pt(){clearTimeout(n),clearTimeout(r),cancelAnimationFrame(i)}function Rt(w){if(!h.state.isDestroyed){V("onBeforeUpdate",[h,w]),Tt();var T=h.props,L=Fo(o,Object.assign({},T,No(w),{ignoreAttributes:!0}));h.props=L,je(),T.interactiveDebounce!==L.interactiveDebounce&&(Ee(),b=Ao(Et,L.interactiveDebounce)),T.triggerTarget&&!L.triggerTarget?Ke(T.triggerTarget).forEach(function(M){M.removeAttribute("aria-expanded")}):L.triggerTarget&&o.removeAttribute("aria-expanded"),pe(),Y(),E&&E(T,L),h.popperInstance&&(Lt(),ke().forEach(function(M){requestAnimationFrame(M._tippy.popperInstance.forceUpdate)})),V("onAfterUpdate",[h,w])}}function Mt(w){h.setProps({content:w})}function Wr(){var w=h.state.isVisible,T=h.state.isDestroyed,L=!h.state.isEnabled,M=be.isTouch&&!h.props.touch,P=kn(h.props.duration,0,ce.duration);if(!(w||T||L||M)&&!B().hasAttribute("disabled")&&(V("onShow",[h],!1),h.props.onShow(h)!==!1)){if(h.state.isVisible=!0,D()&&(y.style.visibility="visible"),Y(),oe(),h.state.isMounted||(y.style.transition="none"),D()){var X=j(),re=X.box,We=X.content;En([re,We],0)}d=function(){var It;if(!(!h.state.isVisible||c)){if(c=!0,y.offsetHeight,y.style.transition=h.props.moveTransition,D()&&h.props.animation){var Oe=j(),Dt=Oe.box,$e=Oe.content;En([Dt,$e],P),Po([Dt,$e],"visible")}he(),pe(),Lo(On,h),(It=h.popperInstance)==null||It.forceUpdate(),V("onMount",[h]),h.props.animation&&D()&&Ce(P,function(){h.state.isShown=!0,V("onShown",[h])})}},ye()}}function $r(){var w=!h.state.isVisible,T=h.state.isDestroyed,L=!h.state.isEnabled,M=kn(h.props.duration,1,ce.duration);if(!(w||T||L)&&(V("onHide",[h],!1),h.props.onHide(h)!==!1)){if(h.state.isVisible=!1,h.state.isShown=!1,c=!1,s=!1,D()&&(y.style.visibility="hidden"),Ee(),_e(),Y(!0),D()){var P=j(),X=P.box,re=P.content;h.props.animation&&(En([X,re],M),Po([X,re],"hidden"))}he(),pe(),h.props.animation?D()&&Le(M,h.unmount):h.unmount()}}function zr(w){G().addEventListener("mousemove",b),Lo(zt,b),b(w)}function Hr(){h.state.isVisible&&h.hide(),h.state.isMounted&&(Nt(),ke().forEach(function(w){w._tippy.unmount()}),y.parentNode&&y.parentNode.removeChild(y),On=On.filter(function(w){return w!==h}),h.state.isMounted=!1,V("onHidden",[h]))}function qr(){h.state.isDestroyed||(h.clearDelayTimeouts(),h.unmount(),Tt(),delete o._tippy,h.state.isDestroyed=!0,V("onDestroy",[h]))}}function dt(o,e){e===void 0&&(e={});var t=ce.plugins.concat(e.plugins||[]);Ts();var n=Object.assign({},e,{plugins:t}),r=_s(o),i=r.reduce(function(s,l){var a=l&&Ds(l,n);return a&&s.push(a),s},[]);return $t(o)?i[0]:i}dt.defaultProps=ce,dt.setDefaultProps=Ps,dt.currentInput=be,Object.assign({},so,{effect:function(o){var e=o.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow)}});var Pn={clientX:0,clientY:0},Ht=[];function Wo(o){var e=o.clientX,t=o.clientY;Pn={clientX:e,clientY:t}}function Bs(o){o.addEventListener("mousemove",Wo)}function Fs(o){o.removeEventListener("mousemove",Wo)}var Us={name:"followCursor",defaultValue:!1,fn:function(o){var e=o.reference,t=Ro(o.props.triggerTarget||e),n=!1,r=!1,i=!0,s=o.props;function l(){return o.props.followCursor==="initial"&&o.state.isVisible}function a(){t.addEventListener("mousemove",p)}function c(){t.removeEventListener("mousemove",p)}function u(){n=!0,o.setProps({getReferenceClientRect:null}),n=!1}function p(b){var g=b.target?e.contains(b.target):!0,v=o.props.followCursor,C=b.clientX,k=b.clientY,S=e.getBoundingClientRect(),h=C-S.left,_=k-S.top;(g||!o.props.interactive)&&o.setProps({getReferenceClientRect:function(){var y=e.getBoundingClientRect(),E=C,N=k;v==="initial"&&(E=y.left+h,N=y.top+_);var A=v==="horizontal"?y.top:N,R=v==="vertical"?y.right:E,I=v==="horizontal"?y.bottom:N,D=v==="vertical"?y.left:E;return{width:R-D,height:I-A,top:A,right:R,bottom:I,left:D}}})}function d(){o.props.followCursor&&(Ht.push({instance:o,doc:t}),Bs(t))}function m(){Ht=Ht.filter(function(b){return b.instance!==o}),Ht.filter(function(b){return b.doc===t}).length===0&&Fs(t)}return{onCreate:d,onDestroy:m,onBeforeUpdate:function(){s=o.props},onAfterUpdate:function(b,g){var v=g.followCursor;n||v!==void 0&&s.followCursor!==v&&(m(),v?(d(),o.state.isMounted&&!r&&!l()&&a()):(c(),u()))},onMount:function(){o.props.followCursor&&!r&&(i&&(p(Pn),i=!1),l()||a())},onTrigger:function(b,g){Oo(g)&&(Pn={clientX:g.clientX,clientY:g.clientY}),r=g.type==="focus"},onHidden:function(){o.props.followCursor&&(u(),c(),i=!0)}}}};dt.setDefaultProps({render:jo});var ft=new Map;function Gs(o){var e=ft.get(o);e&&e.destroy()}function js(o){var e=ft.get(o);e&&e.update()}var gt=null;typeof window>"u"?((gt=function(o){return o}).destroy=function(o){return o},gt.update=function(o){return o}):((gt=function(o,e){return o&&Array.prototype.forEach.call(o.length?o:[o],function(t){return function(n){if(n&&n.nodeName&&n.nodeName==="TEXTAREA"&&!ft.has(n)){var r,i=null,s=window.getComputedStyle(n),l=(r=n.value,function(){c({testForHeightReduction:r===""||!n.value.startsWith(r),restoreTextAlign:null}),r=n.value}),a=(function(p){n.removeEventListener("autosize:destroy",a),n.removeEventListener("autosize:update",u),n.removeEventListener("input",l),window.removeEventListener("resize",u),Object.keys(p).forEach(function(d){return n.style[d]=p[d]}),ft.delete(n)}).bind(n,{height:n.style.height,resize:n.style.resize,textAlign:n.style.textAlign,overflowY:n.style.overflowY,overflowX:n.style.overflowX,wordWrap:n.style.wordWrap});n.addEventListener("autosize:destroy",a),n.addEventListener("autosize:update",u),n.addEventListener("input",l),window.addEventListener("resize",u),n.style.overflowX="hidden",n.style.wordWrap="break-word",ft.set(n,{destroy:a,update:u}),u()}function c(p){var d,m,b=p.restoreTextAlign,g=b===void 0?null:b,v=p.testForHeightReduction,C=v===void 0||v,k=s.overflowY;if(n.scrollHeight!==0&&(s.resize==="vertical"?n.style.resize="none":s.resize==="both"&&(n.style.resize="horizontal"),C&&(d=function(h){for(var _=[];h&&h.parentNode&&h.parentNode instanceof Element;)h.parentNode.scrollTop&&_.push([h.parentNode,h.parentNode.scrollTop]),h=h.parentNode;return function(){return _.forEach(function(y){var E=y[0],N=y[1];E.style.scrollBehavior="auto",E.scrollTop=N,E.style.scrollBehavior=null})}}(n),n.style.height=""),m=s.boxSizing==="content-box"?n.scrollHeight-(parseFloat(s.paddingTop)+parseFloat(s.paddingBottom)):n.scrollHeight+parseFloat(s.borderTopWidth)+parseFloat(s.borderBottomWidth),s.maxHeight!=="none"&&m>parseFloat(s.maxHeight)?(s.overflowY==="hidden"&&(n.style.overflow="scroll"),m=parseFloat(s.maxHeight)):s.overflowY!=="hidden"&&(n.style.overflow="hidden"),n.style.height=m+"px",g&&(n.style.textAlign=g),d&&d(),i!==m&&(n.dispatchEvent(new Event("autosize:resized",{bubbles:!0})),i=m),k!==s.overflow&&!g)){var S=s.textAlign;s.overflow==="hidden"&&(n.style.textAlign=S==="start"?"end":"start"),c({restoreTextAlign:S,testForHeightReduction:!0})}}function u(){c({testForHeightReduction:!0,restoreTextAlign:null})}}(t)}),o}).destroy=function(o){return o&&Array.prototype.forEach.call(o.length?o:[o],Gs),o},gt.update=function(o){return o&&Array.prototype.forEach.call(o.length?o:[o],js),o});var Ws=gt;if(Array.prototype.find||(Array.prototype.find=function(o){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof o!="function")throw new TypeError("predicate must be a function");for(var e=Object(this),t=e.length>>>0,n=arguments[1],r,i=0;i<t;i++)if(r=e[i],o.call(n,r,i,e))return r}),window&&typeof window.CustomEvent!="function"){let o=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n};typeof window.Event<"u"&&(o.prototype=window.Event.prototype),window.CustomEvent=o}class un{constructor(e){this.tribute=e,this.tribute.events=this}static keys(){return[{key:9,value:"TAB"},{key:8,value:"DELETE"},{key:13,value:"ENTER"},{key:27,value:"ESCAPE"},{key:32,value:"SPACE"},{key:38,value:"UP"},{key:40,value:"DOWN"}]}bind(e){e.boundKeydown=this.keydown.bind(e,this),e.boundKeyup=this.keyup.bind(e,this),e.boundInput=this.input.bind(e,this),e.addEventListener("keydown",e.boundKeydown,!1),e.addEventListener("keyup",e.boundKeyup,!1),e.addEventListener("input",e.boundInput,!1)}unbind(e){e.removeEventListener("keydown",e.boundKeydown,!1),e.removeEventListener("keyup",e.boundKeyup,!1),e.removeEventListener("input",e.boundInput,!1),delete e.boundKeydown,delete e.boundKeyup,delete e.boundInput}keydown(e,t){e.shouldDeactivate(t)&&(e.tribute.isActive=!1,e.tribute.hideMenu());let n=this;e.commandEvent=!1,un.keys().forEach(r=>{r.key===t.keyCode&&(e.commandEvent=!0,e.callbacks()[r.value.toLowerCase()](t,n))})}input(e,t){e.inputEvent=!0,e.keyup.call(this,e,t)}click(e,t){let n=e.tribute;if(n.menu&&n.menu.contains(t.target)){let r=t.target;for(t.preventDefault(),t.stopPropagation();r.nodeName.toLowerCase()!=="li";)if(r=r.parentNode,!r||r===n.menu)throw new Error("cannot find the <li> container for the click");n.selectItemAtIndex(r.getAttribute("data-index"),t),n.hideMenu()}else n.current.element&&!n.current.externalTrigger&&(n.current.externalTrigger=!1,setTimeout(()=>n.hideMenu()))}keyup(e,t){if(e.inputEvent&&(e.inputEvent=!1),e.updateSelection(this),t.keyCode!==27){if(!e.tribute.allowSpaces&&e.tribute.hasTrailingSpace){e.tribute.hasTrailingSpace=!1,e.commandEvent=!0,e.callbacks().space(t,this);return}if(!e.tribute.isActive)if(e.tribute.autocompleteMode)e.callbacks().triggerChar(t,this,"");else{let n=e.getKeyCode(e,this,t);if(isNaN(n)||!n)return;let r=e.tribute.triggers().find(i=>i.charCodeAt(0)===n);typeof r<"u"&&e.callbacks().triggerChar(t,this,r)}e.tribute.current.mentionText.length<e.tribute.current.collection.menuShowMinLength||((e.tribute.current.trigger||e.tribute.autocompleteMode)&&e.commandEvent===!1||e.tribute.isActive&&t.keyCode===8)&&e.tribute.showMenuFor(this,!0)}}shouldDeactivate(e){if(!this.tribute.isActive)return!1;if(this.tribute.current.mentionText.length===0){let t=!1;return un.keys().forEach(n=>{e.keyCode===n.key&&(t=!0)}),!t}return!1}getKeyCode(e,t,n){let r=e.tribute,i=r.range.getTriggerInfo(!1,r.hasTrailingSpace,!0,r.allowSpaces,r.autocompleteMode);return i?i.mentionTriggerChar.charCodeAt(0):!1}updateSelection(e){this.tribute.current.element=e;let t=this.tribute.range.getTriggerInfo(!1,this.tribute.hasTrailingSpace,!0,this.tribute.allowSpaces,this.tribute.autocompleteMode);t&&(this.tribute.current.selectedPath=t.mentionSelectedPath,this.tribute.current.mentionText=t.mentionText,this.tribute.current.selectedOffset=t.mentionSelectedOffset)}callbacks(){return{triggerChar:(e,t,n)=>{let r=this.tribute;r.current.trigger=n;let i=r.collection.find(s=>s.trigger===n);r.current.collection=i,r.current.mentionText.length>=r.current.collection.menuShowMinLength&&r.inputEvent&&r.showMenuFor(t,!0)},enter:(e,t)=>{this.tribute.isActive&&this.tribute.current.filteredItems&&(e.preventDefault(),e.stopPropagation(),setTimeout(()=>{this.tribute.selectItemAtIndex(this.tribute.menuSelected,e),this.tribute.hideMenu()},0))},escape:(e,t)=>{this.tribute.isActive&&(e.preventDefault(),e.stopPropagation(),this.tribute.isActive=!1,this.tribute.hideMenu())},tab:(e,t)=>{this.callbacks().enter(e,t)},space:(e,t)=>{this.tribute.isActive&&(this.tribute.spaceSelectsMatch?this.callbacks().enter(e,t):this.tribute.allowSpaces||(e.stopPropagation(),setTimeout(()=>{this.tribute.hideMenu(),this.tribute.isActive=!1},0)))},up:(e,t)=>{if(this.tribute.isActive&&this.tribute.current.filteredItems){e.preventDefault(),e.stopPropagation();let n=this.tribute.current.filteredItems.length,r=this.tribute.menuSelected;n>r&&r>0?(this.tribute.menuSelected--,this.setActiveLi()):r===0&&(this.tribute.menuSelected=n-1,this.setActiveLi(),this.tribute.menu.scrollTop=this.tribute.menu.scrollHeight)}},down:(e,t)=>{if(this.tribute.isActive&&this.tribute.current.filteredItems){e.preventDefault(),e.stopPropagation();let n=this.tribute.current.filteredItems.length-1,r=this.tribute.menuSelected;n>r?(this.tribute.menuSelected++,this.setActiveLi()):n===r&&(this.tribute.menuSelected=0,this.setActiveLi(),this.tribute.menu.scrollTop=0)}},delete:(e,t)=>{this.tribute.isActive&&this.tribute.current.mentionText.length<1?this.tribute.hideMenu():this.tribute.isActive&&this.tribute.showMenuFor(t)}}}setActiveLi(e){let t=this.tribute.menu.querySelectorAll("li"),n=t.length>>>0;e&&(this.tribute.menuSelected=parseInt(e));for(let r=0;r<n;r++){let i=t[r];if(r===this.tribute.menuSelected){i.classList.add(this.tribute.current.collection.selectClass);let s=i.getBoundingClientRect(),l=this.tribute.menu.getBoundingClientRect();if(s.bottom>l.bottom){let a=s.bottom-l.bottom;this.tribute.menu.scrollTop+=a}else if(s.top<l.top){let a=l.top-s.top;this.tribute.menu.scrollTop-=a}}else i.classList.remove(this.tribute.current.collection.selectClass)}}getFullHeight(e,t){let n=e.getBoundingClientRect().height;if(t){let r=e.currentStyle||window.getComputedStyle(e);return n+parseFloat(r.marginTop)+parseFloat(r.marginBottom)}return n}}class $s{constructor(e){this.tribute=e,this.tribute.menuEvents=this,this.menu=this.tribute.menu}bind(e){this.menuClickEvent=this.tribute.events.click.bind(null,this),this.menuContainerScrollEvent=this.debounce(()=>{this.tribute.isActive&&this.tribute.hideMenu()},10,!1),this.windowResizeEvent=this.debounce(()=>{this.tribute.isActive&&this.tribute.hideMenu()},10,!1),this.tribute.range.getDocument().addEventListener("MSPointerDown",this.menuClickEvent,!1),this.tribute.range.getDocument().addEventListener("mousedown",this.menuClickEvent,!1),window.addEventListener("resize",this.windowResizeEvent),this.menuContainer?this.menuContainer.addEventListener("scroll",this.menuContainerScrollEvent,!1):window.addEventListener("scroll",this.menuContainerScrollEvent)}unbind(e){this.tribute.range.getDocument().removeEventListener("mousedown",this.menuClickEvent,!1),this.tribute.range.getDocument().removeEventListener("MSPointerDown",this.menuClickEvent,!1),window.removeEventListener("resize",this.windowResizeEvent),this.menuContainer?this.menuContainer.removeEventListener("scroll",this.menuContainerScrollEvent,!1):window.removeEventListener("scroll",this.menuContainerScrollEvent)}debounce(e,t,n){var r;return()=>{var i=this,s=arguments,l=()=>{r=null,n||e.apply(i,s)},a=n&&!r;clearTimeout(r),r=setTimeout(l,t),a&&e.apply(i,s)}}}class zs{constructor(e){this.tribute=e,this.tribute.range=this}getDocument(){let e;return this.tribute.current.collection&&(e=this.tribute.current.collection.iframe),e?e.contentWindow.document:document}positionMenuAtCaret(e){let t=this.tribute.current,n,r=this.getTriggerInfo(!1,this.tribute.hasTrailingSpace,!0,this.tribute.allowSpaces,this.tribute.autocompleteMode);if(typeof r<"u"){if(!this.tribute.positionMenu){this.tribute.menu.style.cssText="display: block;";return}this.isContentEditable(t.element)?n=this.getContentEditableCaretPosition(r.mentionPosition):n=this.getTextAreaOrInputUnderlinePosition(this.tribute.current.element,r.mentionPosition),this.tribute.menu.style.cssText=`top: ${n.top}px;
                                     left: ${n.left}px;
                                     right: ${n.right}px;
                                     bottom: ${n.bottom}px;
                                     max-height: ${n.maxHeight||500}px;
                                     max-width: ${n.maxWidth||300}px;
                                     position: ${n.position||"absolute"};
                                     display: block;`,n.left==="auto"&&(this.tribute.menu.style.left="auto"),n.top==="auto"&&(this.tribute.menu.style.top="auto"),e&&this.scrollIntoView()}else this.tribute.menu.style.cssText="display: none"}get menuContainerIsBody(){return this.tribute.menuContainer===document.body||!this.tribute.menuContainer}selectElement(e,t,n){let r,i=e;if(t)for(var s=0;s<t.length;s++){if(i=i.childNodes[t[s]],i===void 0)return;for(;i.length<n;)n-=i.length,i=i.nextSibling;i.childNodes.length===0&&!i.length&&(i=i.previousSibling)}let l=this.getWindowSelection();r=this.getDocument().createRange(),r.setStart(i,n),r.setEnd(i,n),r.collapse(!0);try{l.removeAllRanges()}catch{}l.addRange(r),e.focus()}replaceTriggerText(e,t,n,r,i){let s=this.getTriggerInfo(!0,n,t,this.tribute.allowSpaces,this.tribute.autocompleteMode);if(s!==void 0){let l=this.tribute.current,a=new CustomEvent("tribute-replaced",{detail:{item:i,instance:l,context:s,event:r}});if(this.isContentEditable(l.element)){let c=typeof this.tribute.replaceTextSuffix=="string"?this.tribute.replaceTextSuffix:"\xA0";e+=c;let u=s.mentionPosition+s.mentionText.length;this.tribute.autocompleteMode||(u+=s.mentionTriggerChar.length),this.pasteHtml(e,s.mentionPosition,u)}else{let c=this.tribute.current.element,u=typeof this.tribute.replaceTextSuffix=="string"?this.tribute.replaceTextSuffix:" ";e+=u;let p=s.mentionPosition,d=s.mentionPosition+s.mentionText.length+u.length;this.tribute.autocompleteMode||(d+=s.mentionTriggerChar.length-1),c.value=c.value.substring(0,p)+e+c.value.substring(d,c.value.length),c.selectionStart=p+e.length,c.selectionEnd=p+e.length}l.element.dispatchEvent(new CustomEvent("input",{bubbles:!0})),l.element.dispatchEvent(a)}}pasteHtml(e,t,n){let r,i;i=this.getWindowSelection(),r=this.getDocument().createRange(),r.setStart(i.anchorNode,t),r.setEnd(i.anchorNode,n),r.deleteContents();let s=this.getDocument().createElement("div");s.innerHTML=e;let l=this.getDocument().createDocumentFragment(),a,c;for(;a=s.firstChild;)c=l.appendChild(a);r.insertNode(l),c&&(r=r.cloneRange(),r.setStartAfter(c),r.collapse(!0),i.removeAllRanges(),i.addRange(r))}getWindowSelection(){return this.tribute.collection.iframe?this.tribute.collection.iframe.contentWindow.getSelection():window.getSelection()}getNodePositionInParent(e){if(e.parentNode===null)return 0;for(var t=0;t<e.parentNode.childNodes.length;t++)if(e.parentNode.childNodes[t]===e)return t}getContentEditableSelectedPath(e){let t=this.getWindowSelection(),n=t.anchorNode,r=[],i;if(n!=null){let s,l=n.contentEditable;for(;n!==null&&l!=="true";)s=this.getNodePositionInParent(n),r.push(s),n=n.parentNode,n!==null&&(l=n.contentEditable);return r.reverse(),i=t.getRangeAt(0).startOffset,{selected:n,path:r,offset:i}}}getTextPrecedingCurrentSelection(){let e=this.tribute.current,t="";if(this.isContentEditable(e.element)){let n=this.getWindowSelection().anchorNode;if(n!=null){let r=n.textContent,i=this.getWindowSelection().getRangeAt(0).startOffset;r&&i>=0&&(t=r.substring(0,i))}}else{let n=this.tribute.current.element;if(n){let r=n.selectionStart;n.value&&r>=0&&(t=n.value.substring(0,r))}}return t}getLastWordInText(e){e=e.replace(/\u00A0/g," ");var t;this.tribute.autocompleteSeparator?t=e.split(this.tribute.autocompleteSeparator):t=e.split(/\s+/);var n=t.length-1;return t[n].trim()}getTriggerInfo(e,t,n,r,i){let s=this.tribute.current,l,a,c;if(!this.isContentEditable(s.element))l=this.tribute.current.element;else{let d=this.getContentEditableSelectedPath(s);d&&(l=d.selected,a=d.path,c=d.offset)}let u=this.getTextPrecedingCurrentSelection(),p=this.getLastWordInText(u);if(i)return{mentionPosition:u.length-p.length,mentionText:p,mentionSelectedElement:l,mentionSelectedPath:a,mentionSelectedOffset:c};if(u!=null){let d=-1,m;if(this.tribute.collection.forEach(b=>{let g=b.trigger,v=b.requireLeadingSpace?this.lastIndexWithLeadingSpace(u,g):u.lastIndexOf(g);v>d&&(d=v,m=g,n=b.requireLeadingSpace)}),d>=0&&(d===0||!n||/[\xA0\s]/g.test(u.substring(d-1,d)))){let b=u.substring(d+m.length,u.length);m=u.substring(d,d+m.length);let g=b.substring(0,1),v=b.length>0&&(g===" "||g==="\xA0");t&&(b=b.trim());let C=r?/[^\S ]/g:/[\xA0\s]/g;if(this.tribute.hasTrailingSpace=C.test(b),!v&&(e||!C.test(b)))return{mentionPosition:d,mentionText:b,mentionSelectedElement:l,mentionSelectedPath:a,mentionSelectedOffset:c,mentionTriggerChar:m}}}}lastIndexWithLeadingSpace(e,t){let n=e.split("").reverse().join(""),r=-1;for(let i=0,s=e.length;i<s;i++){let l=i===e.length-1,a=/\s/.test(n[i+1]),c=!0;for(let u=t.length-1;u>=0;u--)if(t[u]!==n[i-u]){c=!1;break}if(c&&(l||a)){r=e.length-1-i;break}}return r}isContentEditable(e){return e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA"}isMenuOffScreen(e,t){let n=window.innerWidth,r=window.innerHeight,i=document.documentElement,s=(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0),l=(window.pageYOffset||i.scrollTop)-(i.clientTop||0),a=typeof e.top=="number"?e.top:l+r-e.bottom-t.height,c=typeof e.right=="number"?e.right:e.left+t.width,u=typeof e.bottom=="number"?e.bottom:e.top+t.height,p=typeof e.left=="number"?e.left:s+n-e.right-t.width;return{top:a<Math.floor(l),right:c>Math.ceil(s+n),bottom:u>Math.ceil(l+r),left:p<Math.floor(s)}}getMenuDimensions(){let e={width:null,height:null};return this.tribute.menu.style.cssText=`top: 0px;
                                 left: 0px;
                                 position: fixed;
                                 display: block;
                                 visibility; hidden;
                                 max-height:500px;`,e.width=this.tribute.menu.offsetWidth,e.height=this.tribute.menu.offsetHeight,this.tribute.menu.style.cssText="display: none;",e}getTextAreaOrInputUnderlinePosition(e,t,n){let r=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing"],i=this.getDocument().createElement("div");i.id="input-textarea-caret-position-mirror-div",this.getDocument().body.appendChild(i);let s=i.style,l=window.getComputedStyle?getComputedStyle(e):e.currentStyle;s.whiteSpace="pre-wrap",e.nodeName!=="INPUT"&&(s.wordWrap="break-word"),s.position="absolute",s.visibility="hidden",r.forEach(m=>{s[m]=l[m]});let a=document.createElement("span");a.textContent=e.value.substring(0,t),i.appendChild(a),e.nodeName==="INPUT"&&(i.textContent=i.textContent.replace(/\s/g,"\xA0"));let c=this.getDocument().createElement("span");c.textContent="&#x200B;",i.appendChild(c);let u=this.getDocument().createElement("span");u.textContent=e.value.substring(t),i.appendChild(u);let p=e.getBoundingClientRect();i.style.position="fixed",i.style.left=p.left+"px",i.style.top=p.top+"px",i.style.width=p.width+"px",i.style.height=p.height+"px",i.scrollTop=e.scrollTop;var d=c.getBoundingClientRect();return this.getDocument().body.removeChild(i),this.getFixedCoordinatesRelativeToRect(d)}getContentEditableCaretPosition(e){let t,n=this.getWindowSelection();t=this.getDocument().createRange(),t.setStart(n.anchorNode,e),t.setEnd(n.anchorNode,e),t.collapse(!1);let r=t.getBoundingClientRect();return this.getFixedCoordinatesRelativeToRect(r)}getFixedCoordinatesRelativeToRect(e){let t={position:"fixed",left:e.left,top:e.top+e.height},n=this.getMenuDimensions();var r=e.top,i=window.innerHeight-(e.top+e.height);i<n.height&&(r>=n.height||r>i?(t.top="auto",t.bottom=window.innerHeight-e.top,i<n.height&&(t.maxHeight=r)):r<n.height&&(t.maxHeight=i));var s=e.left,l=window.innerWidth-e.left;return l<n.width&&(s>=n.width||s>l?(t.left="auto",t.right=window.innerWidth-e.left,l<n.width&&(t.maxWidth=s)):s<n.width&&(t.maxWidth=l)),t}scrollIntoView(e){let t=20,n,r=100,i=this.menu;if(typeof i>"u")return;for(;n===void 0||n.height===0;)if(n=i.getBoundingClientRect(),n.height===0&&(i=i.childNodes[0],i===void 0||!i.getBoundingClientRect))return;let s=n.top,l=s+n.height;if(s<0)window.scrollTo(0,window.pageYOffset+n.top-t);else if(l>window.innerHeight){let a=window.pageYOffset+n.top-t;a-window.pageYOffset>r&&(a=window.pageYOffset+r);let c=window.pageYOffset-(window.innerHeight-l);c>a&&(c=a),window.scrollTo(0,c)}}}class Hs{constructor(e){this.tribute=e,this.tribute.search=this}simpleFilter(e,t){return t.filter(n=>this.test(e,n))}test(e,t){return this.match(e,t)!==null}match(e,t,n){n=n||{},t.length;let r=n.pre||"",i=n.post||"",s=n.caseSensitive&&t||t.toLowerCase();if(n.skip)return{rendered:t,score:0};e=n.caseSensitive&&e||e.toLowerCase();let l=this.traverse(s,e,0,0,[]);return l?{rendered:this.render(t,l.cache,r,i),score:l.score}:null}traverse(e,t,n,r,i){if(this.tribute.autocompleteSeparator&&(t=t.split(this.tribute.autocompleteSeparator).splice(-1)[0]),t.length===r)return{score:this.calculateScore(i),cache:i.slice()};if(e.length===n||t.length-r>e.length-n)return;let s=t[r],l=e.indexOf(s,n),a,c;for(;l>-1;){if(i.push(l),c=this.traverse(e,t,l+1,r+1,i),i.pop(),!c)return a;(!a||a.score<c.score)&&(a=c),l=e.indexOf(s,l+1)}return a}calculateScore(e){let t=0,n=1;return e.forEach((r,i)=>{i>0&&(e[i-1]+1===r?n+=n+1:n=1),t+=n}),t}render(e,t,n,r){var i=e.substring(0,t[0]);return t.forEach((s,l)=>{i+=n+e[s]+r+e.substring(s+1,t[l+1]?t[l+1]:e.length)}),i}filter(e,t,n){return n=n||{},t.reduce((r,i,s,l)=>{let a=i;n.extract&&(a=n.extract(i),a||(a=""));let c=this.match(e,a,n);return c!=null&&(r[r.length]={string:c.rendered,score:c.score,index:s,original:i}),r},[]).sort((r,i)=>i.score-r.score||r.index-i.index)}}class Fe{constructor({values:e=null,loadingItemTemplate:t=null,iframe:n=null,selectClass:r="highlight",containerClass:i="tribute-container",itemClass:s="",trigger:l="@",autocompleteMode:a=!1,autocompleteSeparator:c=null,selectTemplate:u=null,menuItemTemplate:p=null,lookup:d="key",fillAttr:m="value",collection:b=null,menuContainer:g=null,noMatchTemplate:v=null,requireLeadingSpace:C=!0,allowSpaces:k=!1,replaceTextSuffix:S=null,positionMenu:h=!0,spaceSelectsMatch:_=!1,searchOpts:y={},menuItemLimit:E=null,menuShowMinLength:N=0}){if(this.autocompleteMode=a,this.autocompleteSeparator=c,this.menuSelected=0,this.current={},this.inputEvent=!1,this.isActive=!1,this.menuContainer=g,this.allowSpaces=k,this.replaceTextSuffix=S,this.positionMenu=h,this.hasTrailingSpace=!1,this.spaceSelectsMatch=_,this.autocompleteMode&&(l="",k=!1),e)this.collection=[{trigger:l,iframe:n,selectClass:r,containerClass:i,itemClass:s,selectTemplate:(u||Fe.defaultSelectTemplate).bind(this),menuItemTemplate:(p||Fe.defaultMenuItemTemplate).bind(this),noMatchTemplate:(A=>typeof A=="string"?A.trim()===""?null:A:typeof A=="function"?A.bind(this):v||(function(){return"<li>No Match Found!</li>"}).bind(this))(v),lookup:d,fillAttr:m,values:e,loadingItemTemplate:t,requireLeadingSpace:C,searchOpts:y,menuItemLimit:E,menuShowMinLength:N}];else if(b)this.autocompleteMode&&console.warn("Tribute in autocomplete mode does not work for collections"),this.collection=b.map(A=>({trigger:A.trigger||l,iframe:A.iframe||n,selectClass:A.selectClass||r,containerClass:A.containerClass||i,itemClass:A.itemClass||s,selectTemplate:(A.selectTemplate||Fe.defaultSelectTemplate).bind(this),menuItemTemplate:(A.menuItemTemplate||Fe.defaultMenuItemTemplate).bind(this),noMatchTemplate:(R=>typeof R=="string"?R.trim()===""?null:R:typeof R=="function"?R.bind(this):v||(function(){return"<li>No Match Found!</li>"}).bind(this))(v),lookup:A.lookup||d,fillAttr:A.fillAttr||m,values:A.values,loadingItemTemplate:A.loadingItemTemplate,requireLeadingSpace:A.requireLeadingSpace,searchOpts:A.searchOpts||y,menuItemLimit:A.menuItemLimit||E,menuShowMinLength:A.menuShowMinLength||N}));else throw new Error("[Tribute] No collection specified.");new zs(this),new un(this),new $s(this),new Hs(this)}get isActive(){return this._isActive}set isActive(e){if(this._isActive!=e&&(this._isActive=e,this.current.element)){let t=new CustomEvent(`tribute-active-${e}`);this.current.element.dispatchEvent(t)}}static defaultSelectTemplate(e){return typeof e>"u"?`${this.current.collection.trigger}${this.current.mentionText}`:this.range.isContentEditable(this.current.element)?'<span class="tribute-mention">'+(this.current.collection.trigger+e.original[this.current.collection.fillAttr])+"</span>":this.current.collection.trigger+e.original[this.current.collection.fillAttr]}static defaultMenuItemTemplate(e){return e.string}static inputTypes(){return["TEXTAREA","INPUT"]}triggers(){return this.collection.map(e=>e.trigger)}attach(e){if(!e)throw new Error("[Tribute] Must pass in a DOM node or NodeList.");if(typeof jQuery<"u"&&e instanceof jQuery&&(e=e.get()),e.constructor===NodeList||e.constructor===HTMLCollection||e.constructor===Array){let n=e.length;for(var t=0;t<n;++t)this._attach(e[t])}else this._attach(e)}_attach(e){e.hasAttribute("data-tribute")&&console.warn("Tribute was already bound to "+e.nodeName),this.ensureEditable(e),this.events.bind(e),e.setAttribute("data-tribute",!0)}ensureEditable(e){if(Fe.inputTypes().indexOf(e.nodeName)===-1)if(e.contentEditable)e.contentEditable=!0;else throw new Error("[Tribute] Cannot bind to "+e.nodeName)}createMenu(e){let t=this.range.getDocument().createElement("div"),n=this.range.getDocument().createElement("ul");return t.className=e,t.appendChild(n),this.menuContainer?this.menuContainer.appendChild(t):this.range.getDocument().body.appendChild(t)}showMenuFor(e,t){if(this.isActive&&this.current.element===e&&this.current.mentionText===this.currentMentionTextSnapshot)return;this.currentMentionTextSnapshot=this.current.mentionText,this.menu||(this.menu=this.createMenu(this.current.collection.containerClass),e.tributeMenu=this.menu,this.menuEvents.bind(this.menu)),this.isActive=!0,this.menuSelected=0,this.current.mentionText||(this.current.mentionText="");const n=r=>{if(!this.isActive)return;let i=this.search.filter(this.current.mentionText,r,{pre:this.current.collection.searchOpts.pre||"<span>",post:this.current.collection.searchOpts.post||"</span>",skip:this.current.collection.searchOpts.skip,extract:a=>{if(typeof this.current.collection.lookup=="string")return a[this.current.collection.lookup];if(typeof this.current.collection.lookup=="function")return this.current.collection.lookup(a,this.current.mentionText);throw new Error("Invalid lookup attribute, lookup must be string or function.")}});this.current.collection.menuItemLimit&&(i=i.slice(0,this.current.collection.menuItemLimit)),this.current.filteredItems=i;let s=this.menu.querySelector("ul");if(!i.length){let a=new CustomEvent("tribute-no-match",{detail:this.menu});this.current.element.dispatchEvent(a),typeof this.current.collection.noMatchTemplate=="function"&&!this.current.collection.noMatchTemplate()||!this.current.collection.noMatchTemplate?this.hideMenu():(typeof this.current.collection.noMatchTemplate=="function"?s.innerHTML=this.current.collection.noMatchTemplate():s.innerHTML=this.current.collection.noMatchTemplate,this.range.positionMenuAtCaret(t));return}s.innerHTML="";let l=this.range.getDocument().createDocumentFragment();i.forEach((a,c)=>{let u=this.range.getDocument().createElement("li");u.setAttribute("data-index",c),u.className=this.current.collection.itemClass,u.addEventListener("mousemove",p=>{let[d,m]=this._findLiTarget(p.target);p.movementY!==0&&this.events.setActiveLi(m)}),this.menuSelected===c&&u.classList.add(this.current.collection.selectClass),u.innerHTML=this.current.collection.menuItemTemplate(a),l.appendChild(u)}),s.appendChild(l),this.range.positionMenuAtCaret(t)};typeof this.current.collection.values=="function"?(this.current.collection.loadingItemTemplate&&(this.menu.querySelector("ul").innerHTML=this.current.collection.loadingItemTemplate,this.range.positionMenuAtCaret(t)),this.current.collection.values(this.current.mentionText,n)):n(this.current.collection.values)}_findLiTarget(e){if(!e)return[];const t=e.getAttribute("data-index");return t?[e,t]:this._findLiTarget(e.parentNode)}showMenuForCollection(e,t){e!==document.activeElement&&this.placeCaretAtEnd(e),this.current.collection=this.collection[t||0],this.current.externalTrigger=!0,this.current.element=e,e.isContentEditable?this.insertTextAtCursor(this.current.collection.trigger):this.insertAtCaret(e,this.current.collection.trigger),this.showMenuFor(e)}placeCaretAtEnd(e){if(e.focus(),typeof window.getSelection<"u"&&typeof document.createRange<"u"){var t=document.createRange();t.selectNodeContents(e),t.collapse(!1);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)}else if(typeof document.body.createTextRange<"u"){var r=document.body.createTextRange();r.moveToElementText(e),r.collapse(!1),r.select()}}insertTextAtCursor(e){var t,n;t=window.getSelection(),n=t.getRangeAt(0),n.deleteContents();var r=document.createTextNode(e);n.insertNode(r),n.selectNodeContents(r),n.collapse(!1),t.removeAllRanges(),t.addRange(n)}insertAtCaret(e,t){var n=e.scrollTop,r=e.selectionStart,i=e.value.substring(0,r),s=e.value.substring(e.selectionEnd,e.value.length);e.value=i+t+s,r=r+t.length,e.selectionStart=r,e.selectionEnd=r,e.focus(),e.scrollTop=n}hideMenu(){this.menu&&(this.menu.style.cssText="display: none;",this.isActive=!1,this.menuSelected=0,this.current={})}selectItemAtIndex(e,t){if(e=parseInt(e),typeof e!="number"||isNaN(e))return;let n=this.current.filteredItems[e],r=this.current.collection.selectTemplate(n);r!==null&&this.replaceText(r,t,n)}replaceText(e,t,n){this.range.replaceTriggerText(e,!0,!0,t,n)}_append(e,t,n){if(typeof e.values=="function")throw new Error("Unable to append to values, as it is a function.");n?e.values=t:e.values=e.values.concat(t)}append(e,t,n){let r=parseInt(e);if(typeof r!="number")throw new Error("please provide an index for the collection to update.");let i=this.collection[r];this._append(i,t,n)}appendCurrent(e,t){if(this.isActive)this._append(this.current.collection,e,t);else throw new Error("No active state. Please use append instead and pass an index.")}detach(e){if(!e)throw new Error("[Tribute] Must pass in a DOM node or NodeList.");if(typeof jQuery<"u"&&e instanceof jQuery&&(e=e.get()),e.constructor===NodeList||e.constructor===HTMLCollection||e.constructor===Array){let n=e.length;for(var t=0;t<n;++t)this._detach(e[t])}else this._detach(e)}_detach(e){this.events.unbind(e),e.tributeMenu&&this.menuEvents.unbind(e.tributeMenu),setTimeout(()=>{e.removeAttribute("data-tribute"),this.isActive=!1,e.tributeMenu&&e.tributeMenu.remove()})}}var ue;(function(o){o[o.NotSet=-1]="NotSet",o[o.None=0]="None",o[o.Italic=1]="Italic",o[o.Bold=2]="Bold",o[o.Underline=4]="Underline"})(ue||(ue={}));var Ye;(function(o){function e(u){return u.toString(2).padStart(32,"0")}o.toBinaryStr=e;function t(u){const p=o.getLanguageId(u),d=o.getTokenType(u),m=o.getFontStyle(u),b=o.getForeground(u),g=o.getBackground(u);console.log({languageId:p,tokenType:d,fontStyle:m,foreground:b,background:g})}o.print=t;function n(u){return(u&255)>>>0}o.getLanguageId=n;function r(u){return(u&768)>>>8}o.getTokenType=r;function i(u){return(u&1024)!==0}o.containsBalancedBrackets=i;function s(u){return(u&30720)>>>11}o.getFontStyle=s;function l(u){return(u&16744448)>>>15}o.getForeground=l;function a(u){return(u&4278190080)>>>24}o.getBackground=a;function c(u,p,d,m,b,g,v){let C=o.getLanguageId(u),k=o.getTokenType(u),S=o.containsBalancedBrackets(u)?1:0,h=o.getFontStyle(u),_=o.getForeground(u),y=o.getBackground(u);return p!==0&&(C=p),d!==8&&(k=d),m!==null&&(S=m?1:0),b!==-1&&(h=b),g!==0&&(_=g),v!==0&&(y=v),(C<<0|k<<8|S<<10|h<<11|_<<15|y<<24)>>>0}o.set=c})(Ye||(Ye={}));function qt(o,e){const t=[],n=qs(o);let r=n.next();for(;r!==null;){let a=0;if(r.length===2&&r.charAt(1)===":"){switch(r.charAt(0)){case"R":a=1;break;case"L":a=-1;break;default:console.log(`Unknown priority ${r} in scope selector`)}r=n.next()}let c=s();if(t.push({matcher:c,priority:a}),r!==",")break;r=n.next()}return t;function i(){if(r==="-"){r=n.next();const a=i();return c=>!!a&&!a(c)}if(r==="("){r=n.next();const a=l();return r===")"&&(r=n.next()),a}if($o(r)){const a=[];do a.push(r),r=n.next();while($o(r));return c=>e(a,c)}return null}function s(){const a=[];let c=i();for(;c;)a.push(c),c=i();return u=>a.every(p=>p(u))}function l(){const a=[];let c=s();for(;c&&(a.push(c),r==="|"||r===",");){do r=n.next();while(r==="|"||r===",");c=s()}return u=>a.some(p=>p(u))}}function $o(o){return!!o&&!!o.match(/[\w\.:]+/)}function qs(o){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,t=e.exec(o);return{next:()=>{if(!t)return null;const n=t[0];return t=e.exec(o),n}}}function zo(o){typeof o.dispose=="function"&&o.dispose()}function Vs(o){return Rn(o)}function Rn(o){return Array.isArray(o)?Ks(o):typeof o=="object"?Ys(o):o}function Ks(o){let e=[];for(let t=0,n=o.length;t<n;t++)e[t]=Rn(o[t]);return e}function Ys(o){let e={};for(let t in o)e[t]=Rn(o[t]);return e}function Ho(o,...e){return e.forEach(t=>{for(let n in t)o[n]=t[n]}),o}function qo(o){const e=~o.lastIndexOf("/")||~o.lastIndexOf("\\");return e===0?o:~e===o.length-1?qo(o.substring(0,o.length-1)):o.substr(~e+1)}let Mn=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g;class Vt{static hasCaptures(e){return e===null?!1:(Mn.lastIndex=0,Mn.test(e))}static replaceCaptures(e,t,n){return e.replace(Mn,(r,i,s,l)=>{let a=n[parseInt(i||s,10)];if(a){let c=t.substring(a.start,a.end);for(;c[0]===".";)c=c.substring(1);switch(l){case"downcase":return c.toLowerCase();case"upcase":return c.toUpperCase();default:return c}}else return r})}}function Vo(o,e){return o<e?-1:o>e?1:0}function Ko(o,e){if(o===null&&e===null)return 0;if(!o)return-1;if(!e)return 1;let t=o.length,n=e.length;if(t===n){for(let r=0;r<t;r++){let i=Vo(o[r],e[r]);if(i!==0)return i}return 0}return t-n}function Yo(o){return!!(/^#[0-9a-f]{6}$/i.test(o)||/^#[0-9a-f]{8}$/i.test(o)||/^#[0-9a-f]{3}$/i.test(o)||/^#[0-9a-f]{4}$/i.test(o))}function Xo(o){return o.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}class Qo{constructor(e){f(this,"fn");f(this,"cache",new Map);this.fn=e}get(e){if(this.cache.has(e))return this.cache.get(e);const t=this.fn(e);return this.cache.set(e,t),t}}class mt{constructor(e){f(this,"scopeName");this.scopeName=e}toKey(){return this.scopeName}}class Xs{constructor(e,t){f(this,"scopeName");f(this,"ruleName");this.scopeName=e,this.ruleName=t}toKey(){return`${this.scopeName}#${this.ruleName}`}}class Qs{constructor(){f(this,"_references",[]);f(this,"_seenReferenceKeys",new Set);f(this,"visitedRule",new Set)}get references(){return this._references}add(e){const t=e.toKey();this._seenReferenceKeys.has(t)||(this._seenReferenceKeys.add(t),this._references.push(e))}}class Js{constructor(e,t){f(this,"repo");f(this,"initialScopeName");f(this,"seenFullScopeRequests",new Set);f(this,"seenPartialScopeRequests",new Set);f(this,"Q");this.repo=e,this.initialScopeName=t,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new mt(this.initialScopeName)]}processQueue(){const e=this.Q;this.Q=[];const t=new Qs;for(const n of e)Zs(n,this.initialScopeName,this.repo,t);for(const n of t.references)if(n instanceof mt){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName)||this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}}function Zs(o,e,t,n){const r=t.lookup(o.scopeName);if(!r){if(o.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const i=t.lookup(e);o instanceof mt?Kt({baseGrammar:i,selfGrammar:r},n):In(o.ruleName,{baseGrammar:i,selfGrammar:r,repository:r.repository},n);const s=t.injections(o.scopeName);if(s)for(const l of s)n.add(new mt(l))}function In(o,e,t){if(e.repository&&e.repository[o]){const n=e.repository[o];Yt([n],e,t)}}function Kt(o,e){o.selfGrammar.patterns&&Array.isArray(o.selfGrammar.patterns)&&Yt(o.selfGrammar.patterns,{...o,repository:o.selfGrammar.repository},e),o.selfGrammar.injections&&Yt(Object.values(o.selfGrammar.injections),{...o,repository:o.selfGrammar.repository},e)}function Yt(o,e,t){for(const n of o){if(t.visitedRule.has(n))continue;t.visitedRule.add(n);const r=n.repository?Ho({},e.repository,n.repository):e.repository;Array.isArray(n.patterns)&&Yt(n.patterns,{...e,repository:r},t);const i=n.include;if(!i)continue;const s=Jo(i);switch(s.kind){case 0:Kt({...e,selfGrammar:e.baseGrammar},t);break;case 1:Kt(e,t);break;case 2:In(s.ruleName,{...e,repository:r},t);break;case 3:case 4:const l=s.scopeName===e.selfGrammar.scopeName?e.selfGrammar:s.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(l){const a={baseGrammar:e.baseGrammar,selfGrammar:l,repository:r};s.kind===4?In(s.ruleName,a,t):Kt(a,t)}else s.kind===4?t.add(new Xs(s.scopeName,s.ruleName)):t.add(new mt(s.scopeName));break}}}class ea{constructor(){f(this,"kind",0)}}class ta{constructor(){f(this,"kind",1)}}class na{constructor(e){f(this,"ruleName");f(this,"kind",2);this.ruleName=e}}class oa{constructor(e){f(this,"scopeName");f(this,"kind",3);this.scopeName=e}}class ra{constructor(e,t){f(this,"scopeName");f(this,"ruleName");f(this,"kind",4);this.scopeName=e,this.ruleName=t}}function Jo(o){if(o==="$base")return new ea;if(o==="$self")return new ta;const e=o.indexOf("#");if(e===-1)return new oa(o);if(e===0)return new na(o.substring(1));{const t=o.substring(0,e),n=o.substring(e+1);return new ra(t,n)}}const ia=/\\(\d+)/,Zo=/\\(\d+)/g,sa=-1,er=-2;class bt{constructor(e,t,n,r){f(this,"$location");f(this,"id");f(this,"_nameIsCapturing");f(this,"_name");f(this,"_contentNameIsCapturing");f(this,"_contentName");this.$location=e,this.id=t,this._name=n||null,this._nameIsCapturing=Vt.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=Vt.hasCaptures(this._contentName)}get debugName(){const e=this.$location?`${qo(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${e}`}getName(e,t){return!this._nameIsCapturing||this._name===null||e===null||t===null?this._name:Vt.replaceCaptures(this._name,e,t)}getContentName(e,t){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:Vt.replaceCaptures(this._contentName,e,t)}}class aa extends bt{constructor(t,n,r,i,s){super(t,n,r,i);f(this,"retokenizeCapturedWithRuleId");this.retokenizeCapturedWithRuleId=s}dispose(){}collectPatterns(t,n){throw new Error("Not supported!")}compile(t,n){throw new Error("Not supported!")}compileAG(t,n,r,i){throw new Error("Not supported!")}}class la extends bt{constructor(t,n,r,i,s){super(t,n,r,null);f(this,"_match");f(this,"captures");f(this,"_cachedCompiledPatterns");this._match=new Ue(i,this.id),this.captures=s,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(t,n){n.push(this._match)}compile(t,n){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,n,r,i){return this._getCachedCompiledPatterns(t).compileAG(t,r,i)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new yt,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}class tr extends bt{constructor(t,n,r,i,s){super(t,n,r,i);f(this,"hasMissingPatterns");f(this,"patterns");f(this,"_cachedCompiledPatterns");this.patterns=s.patterns,this.hasMissingPatterns=s.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(t,n){for(const r of this.patterns)t.getRule(r).collectPatterns(t,n)}compile(t,n){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,n,r,i){return this._getCachedCompiledPatterns(t).compileAG(t,r,i)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new yt,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}class Dn extends bt{constructor(t,n,r,i,s,l,a,c,u,p){super(t,n,r,i);f(this,"_begin");f(this,"beginCaptures");f(this,"_end");f(this,"endHasBackReferences");f(this,"endCaptures");f(this,"applyEndPatternLast");f(this,"hasMissingPatterns");f(this,"patterns");f(this,"_cachedCompiledPatterns");this._begin=new Ue(s,this.id),this.beginCaptures=l,this._end=new Ue(a||"\uFFFF",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=c,this.applyEndPatternLast=u||!1,this.patterns=p.patterns,this.hasMissingPatterns=p.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(t,n){return this._end.resolveBackReferences(t,n)}collectPatterns(t,n){n.push(this._begin)}compile(t,n){return this._getCachedCompiledPatterns(t,n).compile(t)}compileAG(t,n,r,i){return this._getCachedCompiledPatterns(t,n).compileAG(t,r,i)}_getCachedCompiledPatterns(t,n){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new yt;for(const r of this.patterns)t.getRule(r).collectPatterns(t,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,n):this._cachedCompiledPatterns.setSource(0,n)),this._cachedCompiledPatterns}}class Xt extends bt{constructor(t,n,r,i,s,l,a,c,u){super(t,n,r,i);f(this,"_begin");f(this,"beginCaptures");f(this,"whileCaptures");f(this,"_while");f(this,"whileHasBackReferences");f(this,"hasMissingPatterns");f(this,"patterns");f(this,"_cachedCompiledPatterns");f(this,"_cachedCompiledWhilePatterns");this._begin=new Ue(s,this.id),this.beginCaptures=l,this.whileCaptures=c,this._while=new Ue(a,er),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=u.patterns,this.hasMissingPatterns=u.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(t,n){return this._while.resolveBackReferences(t,n)}collectPatterns(t,n){n.push(this._begin)}compile(t,n){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,n,r,i){return this._getCachedCompiledPatterns(t).compileAG(t,r,i)}_getCachedCompiledPatterns(t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new yt;for(const n of this.patterns)t.getRule(n).collectPatterns(t,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(t,n){return this._getCachedCompiledWhilePatterns(t,n).compile(t)}compileWhileAG(t,n,r,i){return this._getCachedCompiledWhilePatterns(t,n).compileAG(t,r,i)}_getCachedCompiledWhilePatterns(t,n){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new yt,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,n||"\uFFFF"),this._cachedCompiledWhilePatterns}}class q{static createCaptureRule(e,t,n,r,i){return e.registerRule(s=>new aa(t,s,n,r,i))}static getCompiledRuleId(e,t,n){return e.id||t.registerRule(r=>{if(e.id=r,e.match)return new la(e.$vscodeTextmateLocation,e.id,e.name,e.match,q._compileCaptures(e.captures,t,n));if(typeof e.begin>"u"){e.repository&&(n=Ho({},n,e.repository));let i=e.patterns;return typeof i>"u"&&e.include&&(i=[{include:e.include}]),new tr(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,q._compilePatterns(i,t,n))}return e.while?new Xt(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,q._compileCaptures(e.beginCaptures||e.captures,t,n),e.while,q._compileCaptures(e.whileCaptures||e.captures,t,n),q._compilePatterns(e.patterns,t,n)):new Dn(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,q._compileCaptures(e.beginCaptures||e.captures,t,n),e.end,q._compileCaptures(e.endCaptures||e.captures,t,n),e.applyEndPatternLast,q._compilePatterns(e.patterns,t,n))}),e.id}static _compileCaptures(e,t,n){let r=[];if(e){let i=0;for(const s in e){if(s==="$vscodeTextmateLocation")continue;const l=parseInt(s,10);l>i&&(i=l)}for(let s=0;s<=i;s++)r[s]=null;for(const s in e){if(s==="$vscodeTextmateLocation")continue;const l=parseInt(s,10);let a=0;e[s].patterns&&(a=q.getCompiledRuleId(e[s],t,n)),r[l]=q.createCaptureRule(t,e[s].$vscodeTextmateLocation,e[s].name,e[s].contentName,a)}}return r}static _compilePatterns(e,t,n){let r=[];if(e)for(let i=0,s=e.length;i<s;i++){const l=e[i];let a=-1;if(l.include){const c=Jo(l.include);switch(c.kind){case 0:case 1:a=q.getCompiledRuleId(n[l.include],t,n);break;case 2:let u=n[c.ruleName];u&&(a=q.getCompiledRuleId(u,t,n));break;case 3:case 4:const p=c.scopeName,d=c.kind===4?c.ruleName:null,m=t.getExternalGrammar(p,n);if(m)if(d){let b=m.repository[d];b&&(a=q.getCompiledRuleId(b,t,m.repository))}else a=q.getCompiledRuleId(m.repository.$self,t,m.repository);break}}else a=q.getCompiledRuleId(l,t,n);if(a!==-1){const c=t.getRule(a);let u=!1;if((c instanceof tr||c instanceof Dn||c instanceof Xt)&&c.hasMissingPatterns&&c.patterns.length===0&&(u=!0),u)continue;r.push(a)}}return{patterns:r,hasMissingPatterns:(e?e.length:0)!==r.length}}}class Ue{constructor(e,t){f(this,"source");f(this,"ruleId");f(this,"hasAnchor");f(this,"hasBackReferences");f(this,"_anchorCache");if(e){const n=e.length;let r=0,i=[],s=!1;for(let l=0;l<n;l++)if(e.charAt(l)==="\\"&&l+1<n){const a=e.charAt(l+1);a==="z"?(i.push(e.substring(r,l)),i.push("$(?!\\n)(?<!\\n)"),r=l+2):(a==="A"||a==="G")&&(s=!0),l++}this.hasAnchor=s,r===0?this.source=e:(i.push(e.substring(r,n)),this.source=i.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=t,this.hasBackReferences=ia.test(this.source)}clone(){return new Ue(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,t){let n=t.map(r=>e.substring(r.start,r.end));return Zo.lastIndex=0,this.source.replace(Zo,(r,i)=>Xo(n[parseInt(i,10)]||""))}_buildAnchorCache(){let e=[],t=[],n=[],r=[],i,s,l,a;for(i=0,s=this.source.length;i<s;i++)l=this.source.charAt(i),e[i]=l,t[i]=l,n[i]=l,r[i]=l,l==="\\"&&i+1<s&&(a=this.source.charAt(i+1),a==="A"?(e[i+1]="\uFFFF",t[i+1]="\uFFFF",n[i+1]="A",r[i+1]="A"):a==="G"?(e[i+1]="\uFFFF",t[i+1]="G",n[i+1]="\uFFFF",r[i+1]="G"):(e[i+1]=a,t[i+1]=a,n[i+1]=a,r[i+1]=a),i++);return{A0_G0:e.join(""),A0_G1:t.join(""),A1_G0:n.join(""),A1_G1:r.join("")}}resolveAnchors(e,t){return!this.hasAnchor||!this._anchorCache?this.source:e?t?this._anchorCache.A1_G1:this._anchorCache.A1_G0:t?this._anchorCache.A0_G1:this._anchorCache.A0_G0}}class yt{constructor(){f(this,"_items");f(this,"_hasAnchors");f(this,"_cached");f(this,"_anchorCache");this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(e){this._items.push(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}unshift(e){this._items.unshift(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}length(){return this._items.length}setSource(e,t){this._items[e].source!==t&&(this._disposeCaches(),this._items[e].setSource(t))}compile(e){if(!this._cached){let t=this._items.map(n=>n.source);this._cached=new nr(e,t,this._items.map(n=>n.ruleId))}return this._cached}compileAG(e,t,n){return this._hasAnchors?t?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(e,t,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(e,t,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(e,t,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(e,t,n)),this._anchorCache.A0_G0):this.compile(e)}_resolveAnchors(e,t,n){let r=this._items.map(i=>i.resolveAnchors(t,n));return new nr(e,r,this._items.map(i=>i.ruleId))}}class nr{constructor(e,t,n){f(this,"regExps");f(this,"rules");f(this,"scanner");this.regExps=t,this.rules=n,this.scanner=e.createOnigScanner(t)}dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const e=[];for(let t=0,n=this.rules.length;t<n;t++)e.push("   - "+this.rules[t]+": "+this.regExps[t]);return e.join(`
`)}findNextMatchSync(e,t,n){const r=this.scanner.findNextMatchSync(e,t,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}}class Qt{constructor(e,t,n){f(this,"_colorMap");f(this,"_defaults");f(this,"_root");f(this,"_cachedMatchRoot",new Qo(e=>this._root.match(e)));this._colorMap=e,this._defaults=t,this._root=n}static createFromRawTheme(e,t){return this.createFromParsedTheme(ha(e),t)}static createFromParsedTheme(e,t){return da(e,t)}getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(e){if(e===null)return this._defaults;const t=e.scopeName,n=this._cachedMatchRoot.get(t).find(r=>ca(e.parent,r.parentScopes));return n?new or(n.fontStyle,n.foreground,n.background):null}}class Ge{constructor(e,t){f(this,"parent");f(this,"scopeName");this.parent=e,this.scopeName=t}static push(e,t){for(const n of t)e=new Ge(e,n);return e}static from(...e){let t=null;for(let n=0;n<e.length;n++)t=new Ge(t,e[n]);return t}push(e){return new Ge(this,e)}getSegments(){let e=this;const t=[];for(;e;)t.push(e.scopeName),e=e.parent;return t.reverse(),t}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const t=[];let n=this;for(;n&&n!==e;)t.push(n.scopeName),n=n.parent;return n===e?t.reverse():void 0}}function ca(o,e){if(e===null)return!0;let t=0,n=e[t];for(;o;){if(ua(o.scopeName,n)){if(t++,t===e.length)return!0;n=e[t]}o=o.parent}return!1}function ua(o,e){return e===o||o.startsWith(e)&&o[e.length]==="."}class or{constructor(e,t,n){f(this,"fontStyle");f(this,"foregroundId");f(this,"backgroundId");this.fontStyle=e,this.foregroundId=t,this.backgroundId=n}}function ha(o){if(!o)return[];if(!o.settings||!Array.isArray(o.settings))return[];let e=o.settings,t=[],n=0;for(let r=0,i=e.length;r<i;r++){let s=e[r];if(!s.settings)continue;let l;if(typeof s.scope=="string"){let p=s.scope;p=p.replace(/^[,]+/,""),p=p.replace(/[,]+$/,""),l=p.split(",")}else Array.isArray(s.scope)?l=s.scope:l=[""];let a=-1;if(typeof s.settings.fontStyle=="string"){a=0;let p=s.settings.fontStyle.split(" ");for(let d=0,m=p.length;d<m;d++)switch(p[d]){case"italic":a=a|1;break;case"bold":a=a|2;break;case"underline":a=a|4;break;case"strikethrough":a=a|8;break}}let c=null;typeof s.settings.foreground=="string"&&Yo(s.settings.foreground)&&(c=s.settings.foreground);let u=null;typeof s.settings.background=="string"&&Yo(s.settings.background)&&(u=s.settings.background);for(let p=0,d=l.length;p<d;p++){let m=l[p].trim().split(" "),b=m[m.length-1],g=null;m.length>1&&(g=m.slice(0,m.length-1),g.reverse()),t[n++]=new pa(b,g,r,a,c,u)}}return t}class pa{constructor(e,t,n,r,i,s){f(this,"scope");f(this,"parentScopes");f(this,"index");f(this,"fontStyle");f(this,"foreground");f(this,"background");this.scope=e,this.parentScopes=t,this.index=n,this.fontStyle=r,this.foreground=i,this.background=s}}function da(o,e){o.sort((a,c)=>{let u=Vo(a.scope,c.scope);return u!==0||(u=Ko(a.parentScopes,c.parentScopes),u!==0)?u:a.index-c.index});let t=0,n="#000000",r="#ffffff";for(;o.length>=1&&o[0].scope==="";){let a=o.shift();a.fontStyle!==-1&&(t=a.fontStyle),a.foreground!==null&&(n=a.foreground),a.background!==null&&(r=a.background)}let i=new fa(e),s=new or(t,i.getId(n),i.getId(r)),l=new xt(new Ct(0,null,-1,0,0),[]);for(let a=0,c=o.length;a<c;a++){let u=o[a];l.insert(0,u.scope,u.parentScopes,u.fontStyle,i.getId(u.foreground),i.getId(u.background))}return new Qt(i,s,l)}class fa{constructor(e){f(this,"_isFrozen");f(this,"_lastColorId");f(this,"_id2color");f(this,"_color2id");if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(e)){this._isFrozen=!0;for(let t=0,n=e.length;t<n;t++)this._color2id[e[t]]=t,this._id2color[t]=e[t]}else this._isFrozen=!1}getId(e){if(e===null)return 0;e=e.toUpperCase();let t=this._color2id[e];if(t)return t;if(this._isFrozen)throw new Error(`Missing color in color map - ${e}`);return t=++this._lastColorId,this._color2id[e]=t,this._id2color[t]=e,t}getColorMap(){return this._id2color.slice(0)}}class Ct{constructor(e,t,n,r,i){f(this,"scopeDepth");f(this,"parentScopes");f(this,"fontStyle");f(this,"foreground");f(this,"background");this.scopeDepth=e,this.parentScopes=t,this.fontStyle=n,this.foreground=r,this.background=i}clone(){return new Ct(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let t=[];for(let n=0,r=e.length;n<r;n++)t[n]=e[n].clone();return t}acceptOverwrite(e,t,n,r){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,t!==-1&&(this.fontStyle=t),n!==0&&(this.foreground=n),r!==0&&(this.background=r)}}class xt{constructor(e,t=[],n={}){f(this,"_mainRule");f(this,"_children");f(this,"_rulesWithParentScopes");this._mainRule=e,this._children=n,this._rulesWithParentScopes=t}static _sortBySpecificity(e){return e.length===1||e.sort(this._cmpBySpecificity),e}static _cmpBySpecificity(e,t){if(e.scopeDepth===t.scopeDepth){const n=e.parentScopes,r=t.parentScopes;let i=n===null?0:n.length,s=r===null?0:r.length;if(i===s)for(let l=0;l<i;l++){const a=n[l].length,c=r[l].length;if(a!==c)return c-a}return s-i}return t.scopeDepth-e.scopeDepth}match(e){if(e==="")return xt._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes));let t=e.indexOf("."),n,r;return t===-1?(n=e,r=""):(n=e.substring(0,t),r=e.substring(t+1)),this._children.hasOwnProperty(n)?this._children[n].match(r):xt._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes))}insert(e,t,n,r,i,s){if(t===""){this._doInsertHere(e,n,r,i,s);return}let l=t.indexOf("."),a,c;l===-1?(a=t,c=""):(a=t.substring(0,l),c=t.substring(l+1));let u;this._children.hasOwnProperty(a)?u=this._children[a]:(u=new xt(this._mainRule.clone(),Ct.cloneArr(this._rulesWithParentScopes)),this._children[a]=u),u.insert(e+1,c,n,r,i,s)}_doInsertHere(e,t,n,r,i){if(t===null){this._mainRule.acceptOverwrite(e,n,r,i);return}for(let s=0,l=this._rulesWithParentScopes.length;s<l;s++){let a=this._rulesWithParentScopes[s];if(Ko(a.parentScopes,t)===0){a.acceptOverwrite(e,n,r,i);return}}n===-1&&(n=this._mainRule.fontStyle),r===0&&(r=this._mainRule.foreground),i===0&&(i=this._mainRule.background),this._rulesWithParentScopes.push(new Ct(e,t,n,r,i))}}class Bn{constructor(e,t){f(this,"languageId");f(this,"tokenType");this.languageId=e,this.tokenType=t}}const Ze=class Ze{constructor(e,t){f(this,"_defaultAttributes");f(this,"_embeddedLanguagesMatcher");f(this,"_getBasicScopeAttributes",new Qo(e=>{const t=this._scopeToLanguage(e),n=this._toStandardTokenType(e);return new Bn(t,n)}));this._defaultAttributes=new Bn(e,8),this._embeddedLanguagesMatcher=new ga(Object.entries(t||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?Ze._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const t=e.match(Ze.STANDARD_TOKEN_TYPE_REGEXP);if(!t)return 8;switch(t[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}};f(Ze,"_NULL_SCOPE_METADATA",new Bn(0,0)),f(Ze,"STANDARD_TOKEN_TYPE_REGEXP",/\b(comment|string|regex|meta\.embedded)\b/);let Fn=Ze;class ga{constructor(e){f(this,"values");f(this,"scopesRegExp");if(e.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(e);const t=e.map(([n,r])=>Xo(n));t.sort(),t.reverse(),this.scopesRegExp=new RegExp(`^((${t.join(")|(")}))($|\\.)`,"")}}match(e){if(!this.scopesRegExp)return;const t=e.match(this.scopesRegExp);if(t)return this.values.get(t[1])}}class rr{constructor(e,t){f(this,"stack");f(this,"stoppedEarly");this.stack=e,this.stoppedEarly=t}}function ir(o,e,t,n,r,i,s,l){const a=e.content.length;let c=!1,u=-1;if(s){const m=ma(o,e,t,n,r,i);r=m.stack,n=m.linePos,t=m.isFirstLine,u=m.anchorPosition}const p=Date.now();for(;!c;){if(l!==0&&Date.now()-p>l)return new rr(r,!0);d()}return new rr(r,!1);function d(){const m=ba(o,e,t,n,r,u);if(!m){i.produce(r,a),c=!0;return}const b=m.captureIndices,g=m.matchedRuleId,v=b&&b.length>0?b[0].end>n:!1;if(g===sa){const C=r.getRule(o);i.produce(r,b[0].start),r=r.withContentNameScopesList(r.nameScopesList),vt(o,e,t,r,i,C.endCaptures,b),i.produce(r,b[0].end);const k=r;if(r=r.parent,u=k.getAnchorPos(),!v&&k.getEnterPos()===n){r=k,i.produce(r,a),c=!0;return}}else{const C=o.getRule(g);i.produce(r,b[0].start);const k=r,S=C.getName(e.content,b),h=r.contentNameScopesList.pushAttributed(S,o);if(r=r.push(g,n,u,b[0].end===a,null,h,h),C instanceof Dn){const _=C;vt(o,e,t,r,i,_.beginCaptures,b),i.produce(r,b[0].end),u=b[0].end;const y=_.getContentName(e.content,b),E=h.pushAttributed(y,o);if(r=r.withContentNameScopesList(E),_.endHasBackReferences&&(r=r.withEndRule(_.getEndWithResolvedBackReferences(e.content,b))),!v&&k.hasSameRuleAs(r)){r=r.pop(),i.produce(r,a),c=!0;return}}else if(C instanceof Xt){const _=C;vt(o,e,t,r,i,_.beginCaptures,b),i.produce(r,b[0].end),u=b[0].end;const y=_.getContentName(e.content,b),E=h.pushAttributed(y,o);if(r=r.withContentNameScopesList(E),_.whileHasBackReferences&&(r=r.withEndRule(_.getWhileWithResolvedBackReferences(e.content,b))),!v&&k.hasSameRuleAs(r)){r=r.pop(),i.produce(r,a),c=!0;return}}else if(vt(o,e,t,r,i,C.captures,b),i.produce(r,b[0].end),r=r.pop(),!v){r=r.safePop(),i.produce(r,a),c=!0;return}}b[0].end>n&&(n=b[0].end,t=!1)}}function ma(o,e,t,n,r,i){let s=r.beginRuleCapturedEOL?0:-1;const l=[];for(let a=r;a;a=a.pop()){const c=a.getRule(o);c instanceof Xt&&l.push({rule:c,stack:a})}for(let a=l.pop();a;a=l.pop()){const{ruleScanner:c,findOptions:u}=wa(a.rule,o,a.stack.endRule,t,n===s),p=c.findNextMatchSync(e,n,u);if(p){if(p.ruleId!==er){r=a.stack.pop();break}p.captureIndices&&p.captureIndices.length&&(i.produce(a.stack,p.captureIndices[0].start),vt(o,e,t,a.stack,i,a.rule.whileCaptures,p.captureIndices),i.produce(a.stack,p.captureIndices[0].end),s=p.captureIndices[0].end,p.captureIndices[0].end>n&&(n=p.captureIndices[0].end,t=!1))}else{r=a.stack.pop();break}}return{stack:r,linePos:n,anchorPosition:s,isFirstLine:t}}function ba(o,e,t,n,r,i){const s=ya(o,e,t,n,r,i),l=o.getInjections();if(l.length===0)return s;const a=va(l,o,e,t,n,r,i);if(!a)return s;if(!s)return a;const c=s.captureIndices[0].start,u=a.captureIndices[0].start;return u<c||a.priorityMatch&&u===c?a:s}function ya(o,e,t,n,r,i){const s=r.getRule(o),{ruleScanner:l,findOptions:a}=sr(s,o,r.endRule,t,n===i),c=l.findNextMatchSync(e,n,a);return c?{captureIndices:c.captureIndices,matchedRuleId:c.ruleId}:null}function va(o,e,t,n,r,i,s){let l=Number.MAX_VALUE,a=null,c,u=0;const p=i.contentNameScopesList.getScopeNames();for(let d=0,m=o.length;d<m;d++){const b=o[d];if(!b.matcher(p))continue;const g=e.getRule(b.ruleId),{ruleScanner:v,findOptions:C}=sr(g,e,null,n,r===s),k=v.findNextMatchSync(t,r,C);if(!k)continue;const S=k.captureIndices[0].start;if(!(S>=l)&&(l=S,a=k.captureIndices,c=k.ruleId,u=b.priority,l===r))break}return a?{priorityMatch:u===-1,captureIndices:a,matchedRuleId:c}:null}function sr(o,e,t,n,r){return{ruleScanner:o.compileAG(e,t,n,r),findOptions:0}}function wa(o,e,t,n,r){return{ruleScanner:o.compileWhileAG(e,t,n,r),findOptions:0}}function vt(o,e,t,n,r,i,s){if(i.length===0)return;const l=e.content,a=Math.min(i.length,s.length),c=[],u=s[0].end;for(let p=0;p<a;p++){const d=i[p];if(d===null)continue;const m=s[p];if(m.length===0)continue;if(m.start>u)break;for(;c.length>0&&c[c.length-1].endPos<=m.start;)r.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop();if(c.length>0?r.produceFromScopes(c[c.length-1].scopes,m.start):r.produce(n,m.start),d.retokenizeCapturedWithRuleId){const g=d.getName(l,s),v=n.contentNameScopesList.pushAttributed(g,o),C=d.getContentName(l,s),k=v.pushAttributed(C,o),S=n.push(d.retokenizeCapturedWithRuleId,m.start,-1,!1,null,v,k),h=o.createOnigString(l.substring(0,m.end));ir(o,h,t&&m.start===0,m.start,S,r,!1,0),zo(h);continue}const b=d.getName(l,s);if(b!==null){const g=(c.length>0?c[c.length-1].scopes:n.contentNameScopesList).pushAttributed(b,o);c.push(new Sa(g,m.end))}}for(;c.length>0;)r.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop()}class Sa{constructor(e,t){f(this,"scopes");f(this,"endPos");this.scopes=e,this.endPos=t}}function _a(o,e,t,n,r,i,s,l){return new xa(o,e,t,n,r,i,s,l)}function ar(o,e,t,n,r){const i=qt(e,Jt),s=q.getCompiledRuleId(t,n,r.repository);for(const l of i)o.push({debugSelector:e,matcher:l.matcher,ruleId:s,grammar:r,priority:l.priority})}function Jt(o,e){if(e.length<o.length)return!1;let t=0;return o.every(n=>{for(let r=t;r<e.length;r++)if(Ca(e[r],n))return t=r+1,!0;return!1})}function Ca(o,e){if(!o)return!1;if(o===e)return!0;const t=e.length;return o.length>t&&o.substr(0,t)===e&&o[t]==="."}class xa{constructor(e,t,n,r,i,s,l,a){f(this,"_rootScopeName");f(this,"balancedBracketSelectors");f(this,"_onigLib");f(this,"_rootId");f(this,"_lastRuleId");f(this,"_ruleId2desc");f(this,"_includedGrammars");f(this,"_grammarRepository");f(this,"_grammar");f(this,"_injections");f(this,"_basicScopeAttributesProvider");f(this,"_tokenTypeMatchers");if(this._rootScopeName=e,this.balancedBracketSelectors=s,this._onigLib=a,this._basicScopeAttributesProvider=new Fn(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=l,this._grammar=lr(t,null),this._injections=null,this._tokenTypeMatchers=[],i)for(const c of Object.keys(i)){const u=qt(c,Jt);for(const p of u)this._tokenTypeMatchers.push({matcher:p.matcher,type:i[c]})}}get themeProvider(){return this._grammarRepository}dispose(){for(const e of this._ruleId2desc)e&&e.dispose()}createOnigScanner(e){return this._onigLib.createOnigScanner(e)}createOnigString(e){return this._onigLib.createOnigString(e)}getMetadataForScope(e){return this._basicScopeAttributesProvider.getBasicScopeAttributes(e)}_collectInjections(){const e={lookup:i=>i===this._rootScopeName?this._grammar:this.getExternalGrammar(i),injections:i=>this._grammarRepository.injections(i)},t=[],n=this._rootScopeName,r=e.lookup(n);if(r){const i=r.injections;if(i)for(let l in i)ar(t,l,i[l],this,r);const s=this._grammarRepository.injections(n);s&&s.forEach(l=>{const a=this.getExternalGrammar(l);if(a){const c=a.injectionSelector;c&&ar(t,c,a,this,a)}})}return t.sort((i,s)=>i.priority-s.priority),t}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(e){const t=++this._lastRuleId,n=e(t);return this._ruleId2desc[t]=n,n}getRule(e){return this._ruleId2desc[e]}getExternalGrammar(e,t){if(this._includedGrammars[e])return this._includedGrammars[e];if(this._grammarRepository){const n=this._grammarRepository.lookup(e);if(n)return this._includedGrammars[e]=lr(n,t&&t.$base),this._includedGrammars[e]}}tokenizeLine(e,t,n=0){const r=this._tokenize(e,t,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(e,t,n=0){const r=this._tokenize(e,t,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(e,t,n,r){this._rootId===-1&&(this._rootId=q.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let i;if(!t||t===wt.NULL){i=!0;const u=this._basicScopeAttributesProvider.getDefaultAttributes(),p=this.themeProvider.getDefaults(),d=Ye.set(0,u.languageId,u.tokenType,null,p.fontStyle,p.foregroundId,p.backgroundId),m=this.getRule(this._rootId).getName(null,null);let b;m?b=Q.createRootAndLookUpScopeName(m,d,this):b=Q.createRoot("unknown",d),t=new wt(null,this._rootId,-1,-1,!1,null,b,b)}else i=!1,t.reset();e=e+`
`;const s=this.createOnigString(e),l=s.content.length,a=new Ta(n,e,this._tokenTypeMatchers,this.balancedBracketSelectors),c=ir(this,s,i,0,t,a,!0,r);return zo(s),{lineLength:l,lineTokens:a,ruleStack:c.stack,stoppedEarly:c.stoppedEarly}}}function lr(o,e){return o=Vs(o),o.repository=o.repository||{},o.repository.$self={$vscodeTextmateLocation:o.$vscodeTextmateLocation,patterns:o.patterns,name:o.scopeName},o.repository.$base=e||o.repository.$self,o}class Q{constructor(e,t,n){f(this,"parent");f(this,"scopePath");f(this,"tokenAttributes");this.parent=e,this.scopePath=t,this.tokenAttributes=n}static fromExtension(e,t){let n=e,r=(e==null?void 0:e.scopePath)??null;for(const i of t)r=Ge.push(r,i.scopeNames),n=new Q(n,r,i.encodedTokenAttributes);return n}static createRoot(e,t){return new Q(null,new Ge(null,e),t)}static createRootAndLookUpScopeName(e,t,n){const r=n.getMetadataForScope(e),i=new Ge(null,e),s=n.themeProvider.themeMatch(i),l=Q.mergeAttributes(t,r,s);return new Q(null,i,l)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return Q.equals(this,e)}static equals(e,t){do{if(e===t||!e&&!t)return!0;if(!e||!t||e.scopeName!==t.scopeName||e.tokenAttributes!==t.tokenAttributes)return!1;e=e.parent,t=t.parent}while(!0)}static mergeAttributes(e,t,n){let r=-1,i=0,s=0;return n!==null&&(r=n.fontStyle,i=n.foregroundId,s=n.backgroundId),Ye.set(e,t.languageId,t.tokenType,null,r,i,s)}pushAttributed(e,t){if(e===null)return this;if(e.indexOf(" ")===-1)return Q._pushAttributed(this,e,t);const n=e.split(/ /g);let r=this;for(const i of n)r=Q._pushAttributed(r,i,t);return r}static _pushAttributed(e,t,n){const r=n.getMetadataForScope(t),i=e.scopePath.push(t),s=n.themeProvider.themeMatch(i),l=Q.mergeAttributes(e.tokenAttributes,r,s);return new Q(e,i,l)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){var r;const t=[];let n=this;for(;n&&n!==e;)t.push({encodedTokenAttributes:n.tokenAttributes,scopeNames:n.scopePath.getExtensionIfDefined(((r=n.parent)==null?void 0:r.scopePath)??null)}),n=n.parent;return n===e?t.reverse():void 0}}const we=class we{constructor(e,t,n,r,i,s,l,a){f(this,"parent");f(this,"ruleId");f(this,"beginRuleCapturedEOL");f(this,"endRule");f(this,"nameScopesList");f(this,"contentNameScopesList");f(this,"_stackElementBrand");f(this,"_enterPos");f(this,"_anchorPos");f(this,"depth");this.parent=e,this.ruleId=t,this.beginRuleCapturedEOL=i,this.endRule=s,this.nameScopesList=l,this.contentNameScopesList=a,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=n,this._anchorPos=r}equals(e){return e===null?!1:we._equals(this,e)}static _equals(e,t){return e===t?!0:this._structuralEquals(e,t)?Q.equals(e.contentNameScopesList,t.contentNameScopesList):!1}static _structuralEquals(e,t){do{if(e===t||!e&&!t)return!0;if(!e||!t||e.depth!==t.depth||e.ruleId!==t.ruleId||e.endRule!==t.endRule)return!1;e=e.parent,t=t.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){we._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,t,n,r,i,s,l){return new we(this,e,t,n,r,i,s,l)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,t){var n,r;return this.parent&&(t=this.parent._writeString(e,t)),e[t++]=`(${this.ruleId}, ${(n=this.nameScopesList)==null?void 0:n.toString()}, ${(r=this.contentNameScopesList)==null?void 0:r.toString()})`,t}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new we(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let t=this;for(;t&&t._enterPos===e._enterPos;){if(t.ruleId===e.ruleId)return!0;t=t.parent}return!1}toStateStackFrame(){var e,t,n;return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:((t=this.nameScopesList)==null?void 0:t.getExtensionIfDefined(((e=this.parent)==null?void 0:e.nameScopesList)??null))??[],contentNameScopesList:((n=this.contentNameScopesList)==null?void 0:n.getExtensionIfDefined(this.nameScopesList))??[]}}static pushFrame(e,t){const n=Q.fromExtension((e==null?void 0:e.nameScopesList)??null,t.nameScopesList);return new we(e,t.ruleId,t.enterPos??-1,t.anchorPos??-1,t.beginRuleCapturedEOL,t.endRule,n,Q.fromExtension(n,t.contentNameScopesList))}};f(we,"NULL",new we(null,0,0,0,!1,null,null,null));let wt=we;class ka{constructor(e,t){f(this,"balancedBracketScopes");f(this,"unbalancedBracketScopes");f(this,"allowAny",!1);this.balancedBracketScopes=e.flatMap(n=>n==="*"?(this.allowAny=!0,[]):qt(n,Jt).map(r=>r.matcher)),this.unbalancedBracketScopes=t.flatMap(n=>qt(n,Jt).map(r=>r.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(e){for(const t of this.unbalancedBracketScopes)if(t(e))return!1;for(const t of this.balancedBracketScopes)if(t(e))return!0;return this.allowAny}}class Ta{constructor(e,t,n,r){f(this,"balancedBracketSelectors");f(this,"_emitBinaryTokens");f(this,"_lineText");f(this,"_tokens");f(this,"_binaryTokens");f(this,"_lastTokenEndIndex");f(this,"_tokenTypeOverrides");this.balancedBracketSelectors=r,this._emitBinaryTokens=e,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}produce(e,t){this.produceFromScopes(e.contentNameScopesList,t)}produceFromScopes(e,t){var r;if(this._lastTokenEndIndex>=t)return;if(this._emitBinaryTokens){let i=(e==null?void 0:e.tokenAttributes)??0,s=!1;if((r=this.balancedBracketSelectors)!=null&&r.matchesAlways&&(s=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const l=(e==null?void 0:e.getScopeNames())??[];for(const a of this._tokenTypeOverrides)a.matcher(l)&&(i=Ye.set(i,0,a.type,null,-1,0,0));this.balancedBracketSelectors&&(s=this.balancedBracketSelectors.match(l))}if(s&&(i=Ye.set(i,0,8,s,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===i){this._lastTokenEndIndex=t;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(i),this._lastTokenEndIndex=t;return}const n=(e==null?void 0:e.getScopeNames())??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:t,scopes:n}),this._lastTokenEndIndex=t}getResult(e,t){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===t-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(e,t){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===t-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let r=0,i=this._binaryTokens.length;r<i;r++)n[r]=this._binaryTokens[r];return n}}class Ea{constructor(e,t){f(this,"_onigLibPromise");f(this,"_grammars",new Map);f(this,"_rawGrammars",new Map);f(this,"_injectionGrammars",new Map);f(this,"_theme");this._onigLibPromise=t,this._theme=e}dispose(){for(const e of this._grammars.values())e.dispose()}setTheme(e){this._theme=e}getColorMap(){return this._theme.getColorMap()}addGrammar(e,t){this._rawGrammars.set(e.scopeName,e),t&&this._injectionGrammars.set(e.scopeName,t)}lookup(e){return this._rawGrammars.get(e)}injections(e){return this._injectionGrammars.get(e)}getDefaults(){return this._theme.getDefaults()}themeMatch(e){return this._theme.match(e)}async grammarForScopeName(e,t,n,r,i){if(!this._grammars.has(e)){let s=this._rawGrammars.get(e);if(!s)return null;this._grammars.set(e,_a(e,s,t,n,r,i,this,await this._onigLibPromise))}return this._grammars.get(e)}}let Aa=class{constructor(o){f(this,"_options");f(this,"_syncRegistry");f(this,"_ensureGrammarCache");this._options=o,this._syncRegistry=new Ea(Qt.createFromRawTheme(o.theme,o.colorMap),o.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(o,e){this._syncRegistry.setTheme(Qt.createFromRawTheme(o,e))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(o,e,t){return this.loadGrammarWithConfiguration(o,e,{embeddedLanguages:t})}loadGrammarWithConfiguration(o,e,t){return this._loadGrammar(o,e,t.embeddedLanguages,t.tokenTypes,new ka(t.balancedBracketSelectors||[],t.unbalancedBracketSelectors||[]))}loadGrammar(o){return this._loadGrammar(o,0,null,null,null)}async _loadGrammar(o,e,t,n,r){const i=new Js(this._syncRegistry,o);for(;i.Q.length>0;)await Promise.all(i.Q.map(s=>this._loadSingleGrammar(s.scopeName))),i.processQueue();return this._grammarForScopeName(o,e,t,n,r)}async _loadSingleGrammar(o){return this._ensureGrammarCache.has(o)||this._ensureGrammarCache.set(o,this._doLoadSingleGrammar(o)),this._ensureGrammarCache.get(o)}async _doLoadSingleGrammar(o){const e=await this._options.loadGrammar(o);if(e){const t=typeof this._options.getInjections=="function"?this._options.getInjections(o):void 0;this._syncRegistry.addGrammar(e,t)}}async addGrammar(o,e=[],t=0,n=null){return this._syncRegistry.addGrammar(o,e),await this._grammarForScopeName(o.scopeName,t,n)}_grammarForScopeName(o,e=0,t=null,n=null,r=null){return this._syncRegistry.grammarForScopeName(o,e,t,n,r)}};const cr=wt.NULL,K={LANGUAGEID_MASK:255,TOKEN_TYPE_MASK:768,BALANCED_BRACKETS_MASK:1024,FONT_STYLE_MASK:14336,FOREGROUND_MASK:8372224,BACKGROUND_MASK:4286578688,LANGUAGEID_OFFSET:0,TOKEN_TYPE_OFFSET:8,BALANCED_BRACKETS_OFFSET:10,FONT_STYLE_OFFSET:11,FOREGROUND_OFFSET:15,BACKGROUND_OFFSET:24};class Se{static toBinaryStr(e){let t=e.toString(2);for(;t.length<32;)t=`0${t}`;return t}static getLanguageId(e){return(e&K.LANGUAGEID_MASK)>>>K.LANGUAGEID_OFFSET}static getTokenType(e){return(e&K.TOKEN_TYPE_MASK)>>>K.TOKEN_TYPE_OFFSET}static getFontStyle(e){return(e&K.FONT_STYLE_MASK)>>>K.FONT_STYLE_OFFSET}static getForeground(e){return(e&K.FOREGROUND_MASK)>>>K.FOREGROUND_OFFSET}static getBackground(e){return(e&K.BACKGROUND_MASK)>>>K.BACKGROUND_OFFSET}static containsBalancedBrackets(e){return(e&K.BALANCED_BRACKETS_MASK)!==0}static set(e,t,n,r,i,s){let l=Se.getLanguageId(e),a=Se.getTokenType(e),c=Se.getFontStyle(e),u=Se.getForeground(e),p=Se.getBackground(e);const d=Se.containsBalancedBrackets(e)?1:0;return t!==0&&(l=t),n!==0&&(a=n===8?0:n),r!==ue.NotSet&&(c=r),i!==0&&(u=i),s!==0&&(p=s),(l<<K.LANGUAGEID_OFFSET|a<<K.TOKEN_TYPE_OFFSET|c<<K.FONT_STYLE_OFFSET|d<<K.BALANCED_BRACKETS_OFFSET|u<<K.FOREGROUND_OFFSET|p<<K.BACKGROUND_OFFSET)>>>0}}function Zt(o,e=!1){var i;const t=o.split(/(\r?\n)/g);let n=0;const r=[];for(let s=0;s<t.length;s+=2){const l=e?t[s]+(t[s+1]||""):t[s];r.push([l,n]),n+=t[s].length,n+=((i=t[s+1])==null?void 0:i.length)||0}return r}function Un(o){return!o||["plaintext","txt","text","plain"].includes(o)}function La(o){return o==="ansi"||Un(o)}function Gn(o){return o==="none"}function Na(o){return Gn(o)}function ur(o,e){var n;if(!e)return o;o.properties||(o.properties={}),(n=o.properties).class||(n.class=[]),typeof o.properties.class=="string"&&(o.properties.class=o.properties.class.split(/\s+/g)),Array.isArray(o.properties.class)||(o.properties.class=[]);const t=Array.isArray(e)?e:e.split(/\s+/g);for(const r of t)r&&!o.properties.class.includes(r)&&o.properties.class.push(r);return o}function Oa(o,e){let t=0;const n=[];for(const r of e)r>t&&n.push({...o,content:o.content.slice(t,r),offset:o.offset+t}),t=r;return t<o.content.length&&n.push({...o,content:o.content.slice(t),offset:o.offset+t}),n}function Pa(o,e){const t=Array.from(e instanceof Set?e:new Set(e)).sort((n,r)=>n-r);return t.length?o.map(n=>n.flatMap(r=>{const i=t.filter(s=>r.offset<s&&s<r.offset+r.content.length).map(s=>s-r.offset).sort((s,l)=>s-l);return i.length?Oa(r,i):r})):o}function en(o,e){const t=typeof o=="string"?{}:{...o.colorReplacements},n=typeof o=="string"?o:o.name;for(const[r,i]of Object.entries((e==null?void 0:e.colorReplacements)||{}))typeof i=="string"?t[r]=i:r===n&&Object.assign(t,i);return t}function Ie(o,e){return o&&((e==null?void 0:e[o==null?void 0:o.toLowerCase()])||o)}function hr(o){const e={};return o.color&&(e.color=o.color),o.bgColor&&(e["background-color"]=o.bgColor),o.fontStyle&&(o.fontStyle&ue.Italic&&(e["font-style"]="italic"),o.fontStyle&ue.Bold&&(e["font-weight"]="bold"),o.fontStyle&ue.Underline&&(e["text-decoration"]="underline")),e}function pr(o){return Object.entries(o).map(([e,t])=>`${e}:${t}`).join(";")}function Ra(o){const e=Zt(o,!0).map(([r])=>r);function t(r){if(r===o.length)return{line:e.length-1,character:e[e.length-1].length};let i=r,s=0;for(const l of e){if(i<l.length)break;i-=l.length,s++}return{line:s,character:i}}function n(r,i){let s=0;for(let l=0;l<r;l++)s+=e[l].length;return s+=i,s}return{lines:e,indexToPos:t,posToIndex:n}}var De=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],jn={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",9:"strikethrough"};function Ma(o,e){const t=o.indexOf("\x1B[",e);if(t!==-1){const n=o.indexOf("m",t);return{sequence:o.substring(t+2,n).split(";"),startPosition:t,position:n+1}}return{position:o.length}}function dr(o,e){let t=1;const n=o[e+t++];let r;if(n==="2"){const i=[o[e+t++],o[e+t++],o[e+t]].map(s=>Number.parseInt(s));i.length===3&&!i.some(s=>Number.isNaN(s))&&(r={type:"rgb",rgb:i})}else if(n==="5"){const i=Number.parseInt(o[e+t]);Number.isNaN(i)||(r={type:"table",index:Number(i)})}return[t,r]}function Ia(o){const e=[];for(let t=0;t<o.length;t++){const n=o[t],r=Number.parseInt(n);if(!Number.isNaN(r))if(r===0)e.push({type:"resetAll"});else if(r<=9)jn[r]&&e.push({type:"setDecoration",value:jn[r]});else if(r<=29){const i=jn[r-20];i&&e.push({type:"resetDecoration",value:i})}else if(r<=37)e.push({type:"setForegroundColor",value:{type:"named",name:De[r-30]}});else if(r===38){const[i,s]=dr(o,t);s&&e.push({type:"setForegroundColor",value:s}),t+=i}else if(r===39)e.push({type:"resetForegroundColor"});else if(r<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:De[r-40]}});else if(r===48){const[i,s]=dr(o,t);s&&e.push({type:"setBackgroundColor",value:s}),t+=i}else r===49?e.push({type:"resetBackgroundColor"}):r>=90&&r<=97?e.push({type:"setForegroundColor",value:{type:"named",name:De[r-90+8]}}):r>=100&&r<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:De[r-100+8]}})}return e}function Da(){let o=null,e=null,t=new Set;return{parse(n){const r=[];let i=0;do{const s=Ma(n,i),l=s.sequence?n.substring(i,s.startPosition):n.substring(i);if(l.length>0&&r.push({value:l,foreground:o,background:e,decorations:new Set(t)}),s.sequence){const a=Ia(s.sequence);for(const c of a)c.type==="resetAll"?(o=null,e=null,t.clear()):c.type==="resetForegroundColor"?o=null:c.type==="resetBackgroundColor"?e=null:c.type==="resetDecoration"&&t.delete(c.value);for(const c of a)c.type==="setForegroundColor"?o=c.value:c.type==="setBackgroundColor"?e=c.value:c.type==="setDecoration"&&t.add(c.value)}i=s.position}while(i<n.length);return r}}}var Ba={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function Fa(o=Ba){function e(l){return o[l]}function t(l){return`#${l.map(a=>Math.max(0,Math.min(a,255)).toString(16).padStart(2,"0")).join("")}`}let n;function r(){if(n)return n;n=[];for(let c=0;c<De.length;c++)n.push(e(De[c]));let l=[0,95,135,175,215,255];for(let c=0;c<6;c++)for(let u=0;u<6;u++)for(let p=0;p<6;p++)n.push(t([l[c],l[u],l[p]]));let a=8;for(let c=0;c<24;c++,a+=10)n.push(t([a,a,a]));return n}function i(l){return r()[l]}function s(l){switch(l.type){case"named":return e(l.name);case"rgb":return t(l.rgb);case"table":return i(l.index)}}return{value:s}}function Ua(o,e,t){const n=en(o,t),r=Zt(e),i=Fa(Object.fromEntries(De.map(l=>{var a;return[l,(a=o.colors)==null?void 0:a[`terminal.ansi${l[0].toUpperCase()}${l.substring(1)}`]]}))),s=Da();return r.map(l=>s.parse(l[0]).map(a=>{let c,u;a.decorations.has("reverse")?(c=a.background?i.value(a.background):o.bg,u=a.foreground?i.value(a.foreground):o.fg):(c=a.foreground?i.value(a.foreground):o.fg,u=a.background?i.value(a.background):void 0),c=Ie(c,n),u=Ie(u,n),a.decorations.has("dim")&&(c=Ga(c));let p=ue.None;return a.decorations.has("bold")&&(p|=ue.Bold),a.decorations.has("italic")&&(p|=ue.Italic),a.decorations.has("underline")&&(p|=ue.Underline),{content:a.value,offset:l[1],color:c,bgColor:u,fontStyle:p}}))}function Ga(o){const e=o.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/);if(e)if(e[3]){const n=Math.round(Number.parseInt(e[3],16)/2).toString(16).padStart(2,"0");return`#${e[1]}${e[2]}${n}`}else return e[2]?`#${e[1]}${e[2]}80`:`#${Array.from(e[1]).map(n=>`${n}${n}`).join("")}80`;const t=o.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return t?`var(${t[1]}-dim)`:o}class U extends Error{constructor(e){super(e),this.name="ShikiError"}}class hn{constructor(e,t,n){f(this,"_stack");f(this,"lang");f(this,"theme");this._stack=e,this.lang=t,this.theme=n}static initial(e,t){return new hn(cr,e,t)}get scopes(){return ja(this._stack)}toJSON(){return{lang:this.lang,theme:this.theme,scopes:this.scopes}}}function ja(o){const e=[],t=new Set;function n(r){var s;if(t.has(r))return;t.add(r);const i=(s=r==null?void 0:r.nameScopesList)==null?void 0:s.scopeName;i&&e.push(i),r.parent&&n(r.parent)}return n(o),e}function Wa(o){if(!(o instanceof hn))throw new U("Invalid grammar state");return o._stack}function Wn(o,e,t={}){const{lang:n="text",theme:r=o.getLoadedThemes()[0]}=t;if(Un(n)||Gn(r))return Zt(e).map(a=>[{content:a[0],offset:a[1]}]);const{theme:i,colorMap:s}=o.setTheme(r);if(n==="ansi")return Ua(i,e,t);const l=o.getLanguage(n);if(t.grammarState){if(t.grammarState.lang!==l.name)throw new U(`Grammar state language "${t.grammarState.lang}" does not match highlight language "${l.name}"`);if(t.grammarState.theme!==r)throw new U(`Grammar state theme "${t.grammarState.theme}" does not match highlight theme "${r}"`)}return za(e,l,i,s,t)}function $a(o,e,t={}){const{lang:n="text",theme:r=o.getLoadedThemes()[0]}=t;if(Un(n)||Gn(r))throw new U("Plain language does not have grammar state");if(n==="ansi")throw new U("ANSI language does not have grammar state");const{theme:i,colorMap:s}=o.setTheme(r),l=o.getLanguage(n);return new hn($n(e,l,i,s,t).stateStack,l.name,i.name)}function za(o,e,t,n,r){return $n(o,e,t,n,r).tokens}function $n(o,e,t,n,r){const i=en(t,r),{tokenizeMaxLineLength:s=0,tokenizeTimeLimit:l=500}=r,a=Zt(o);let c=r.grammarState?Wa(r.grammarState):r.grammarContextCode!=null?$n(r.grammarContextCode,e,t,n,{...r,grammarState:void 0,grammarContextCode:void 0}).stateStack:cr,u=[];const p=[];for(let d=0,m=a.length;d<m;d++){const[b,g]=a[d];if(b===""){u=[],p.push([]);continue}if(s>0&&b.length>=s){u=[],p.push([{content:b,offset:g,color:"",fontStyle:0}]);continue}let v,C,k;r.includeExplanation&&(v=e.tokenizeLine(b,c),C=v.tokens,k=0);const S=e.tokenizeLine2(b,c,l),h=S.tokens.length/2;for(let _=0;_<h;_++){const y=S.tokens[2*_],E=_+1<h?S.tokens[2*_+2]:b.length;if(y===E)continue;const N=S.tokens[2*_+1],A=Ie(n[Se.getForeground(N)],i),R=Se.getFontStyle(N),I={content:b.substring(y,E),offset:g+y,color:A,fontStyle:R};if(r.includeExplanation){const D=[];if(r.includeExplanation!=="scopeName")for(const G of t.settings){let j;switch(typeof G.scope){case"string":j=G.scope.split(/,/).map(W=>W.trim());break;case"object":j=G.scope;break;default:continue}D.push({settings:G,selectors:j.map(W=>W.split(/ /))})}I.explanation=[];let B=0;for(;y+B<E;){const G=C[k],j=b.substring(G.startIndex,G.endIndex);B+=j.length,I.explanation.push({content:j,scopes:r.includeExplanation==="scopeName"?Ha(G.scopes):qa(D,G.scopes)}),k+=1}}u.push(I)}p.push(u),u=[],c=S.ruleStack}return{tokens:p,stateStack:c}}function Ha(o){return o.map(e=>({scopeName:e}))}function qa(o,e){const t=[];for(let n=0,r=e.length;n<r;n++){const i=e[n];t[n]={scopeName:i,themeMatches:Ka(o,i,e.slice(0,n))}}return t}function fr(o,e){return o===e||e.substring(0,o.length)===o&&e[o.length]==="."}function Va(o,e,t){if(!fr(o[o.length-1],e))return!1;let n=o.length-2,r=t.length-1;for(;n>=0&&r>=0;)fr(o[n],t[r])&&(n-=1),r-=1;return n===-1}function Ka(o,e,t){const n=[];for(const{selectors:r,settings:i}of o)for(const s of r)if(Va(s,e,t)){n.push(i);break}return n}function gr(o,e,t){const n=Object.entries(t.themes).filter(i=>i[1]).map(i=>({color:i[0],theme:i[1]})),r=Ya(...n.map(i=>Wn(o,e,{...t,theme:i.theme})));return r[0].map((i,s)=>i.map((l,a)=>{const c={content:l.content,variants:{},offset:l.offset};return"includeExplanation"in t&&t.includeExplanation&&(c.explanation=l.explanation),r.forEach((u,p)=>{const{content:d,explanation:m,offset:b,...g}=u[s][a];c.variants[n[p].color]=g}),c}))}function Ya(...o){const e=o.map(()=>[]),t=o.length;for(let n=0;n<o[0].length;n++){const r=o.map(a=>a[n]),i=e.map(()=>[]);e.forEach((a,c)=>a.push(i[c]));const s=r.map(()=>0),l=r.map(a=>a[0]);for(;l.every(a=>a);){const a=Math.min(...l.map(c=>c.content.length));for(let c=0;c<t;c++){const u=l[c];u.content.length===a?(i[c].push(u),s[c]+=1,l[c]=r[c][s[c]]):(i[c].push({...u,content:u.content.slice(0,a)}),l[c]={...u,content:u.content.slice(a),offset:u.offset+a})}}}return e}function tn(o,e,t){let n,r,i,s,l;if("themes"in t){const{defaultColor:a="light",cssVariablePrefix:c="--shiki-"}=t,u=Object.entries(t.themes).filter(g=>g[1]).map(g=>({color:g[0],theme:g[1]})).sort((g,v)=>g.color===a?-1:v.color===a?1:0);if(u.length===0)throw new U("`themes` option must not be empty");const p=gr(o,e,t);if(a&&!u.find(g=>g.color===a))throw new U(`\`themes\` option must contain the defaultColor key \`${a}\``);const d=u.map(g=>o.getTheme(g.theme)),m=u.map(g=>g.color);i=p.map(g=>g.map(v=>Xa(v,m,c,a)));const b=u.map(g=>en(g.theme,t));r=u.map((g,v)=>(v===0&&a?"":`${c+g.color}:`)+(Ie(d[v].fg,b[v])||"inherit")).join(";"),n=u.map((g,v)=>(v===0&&a?"":`${c+g.color}-bg:`)+(Ie(d[v].bg,b[v])||"inherit")).join(";"),s=`shiki-themes ${d.map(g=>g.name).join(" ")}`,l=a?void 0:[r,n].join(";")}else if("theme"in t){const a=en(t.theme,t);i=Wn(o,e,t);const c=o.getTheme(t.theme);n=Ie(c.bg,a),r=Ie(c.fg,a),s=c.name}else throw new U("Invalid options, either `theme` or `themes` must be provided");return{tokens:i,fg:r,bg:n,themeName:s,rootStyle:l}}function Xa(o,e,t,n){const r={content:o.content,explanation:o.explanation,offset:o.offset},i=e.map(a=>hr(o.variants[a])),s=new Set(i.flatMap(a=>Object.keys(a))),l=i.reduce((a,c,u)=>{for(const p of s){const d=c[p]||"inherit";if(u===0&&n)a[p]=d;else{const m=p==="color"?"":p==="background-color"?"-bg":`-${p}`,b=t+e[u]+(p==="color"?"":m);a[p]?a[p]+=`;${b}:${d}`:a[p]=`${b}:${d}`}}return a},{});return r.htmlStyle=n?pr(l):Object.values(l).join(";"),r}function Qa(){const o=new WeakMap;function e(n){if(!o.has(n.meta)){let r=function(l){if(typeof l=="number"){if(l<0||l>n.source.length)throw new U(`Invalid decoration offset: ${l}. Code length: ${n.source.length}`);return{...i.indexToPos(l),offset:l}}else{const a=i.lines[l.line];if(a===void 0)throw new U(`Invalid decoration position ${JSON.stringify(l)}. Lines length: ${i.lines.length}`);if(l.character<0||l.character>a.length)throw new U(`Invalid decoration position ${JSON.stringify(l)}. Line ${l.line} length: ${a.length}`);return{...l,offset:i.posToIndex(l.line,l.character)}}};const i=Ra(n.source),s=(n.options.decorations||[]).map(l=>({...l,start:r(l.start),end:r(l.end)}));t(s),o.set(n.meta,{decorations:s,converter:i,source:n.source})}return o.get(n.meta)}function t(n){for(let r=0;r<n.length;r++){const i=n[r];if(i.start.offset>i.end.offset)throw new U(`Invalid decoration range: ${JSON.stringify(i.start)} - ${JSON.stringify(i.end)}`);for(let s=r+1;s<n.length;s++){const l=n[s],a=i.start.offset<l.start.offset&&l.start.offset<i.end.offset,c=i.start.offset<l.end.offset&&l.end.offset<i.end.offset,u=l.start.offset<i.start.offset&&i.start.offset<l.end.offset,p=l.start.offset<i.end.offset&&i.end.offset<l.end.offset;if(a||c||u||p){if(c&&c||u&&p)continue;throw new U(`Decorations ${JSON.stringify(i.start)} and ${JSON.stringify(l.start)} intersect.`)}}}}return{name:"shiki:decorations",tokens(n){var i;if(!((i=this.options.decorations)!=null&&i.length))return;const r=e(this).decorations.flatMap(s=>[s.start.offset,s.end.offset]);return Pa(n,r)},code(n){var p;if(!((p=this.options.decorations)!=null&&p.length))return;const r=e(this),i=Array.from(n.children).filter(d=>d.type==="element"&&d.tagName==="span");if(i.length!==r.converter.lines.length)throw new U(`Number of lines in code element (${i.length}) does not match the number of lines in the source (${r.converter.lines.length}). Failed to apply decorations.`);function s(d,m,b,g){const v=i[d];let C="",k=-1,S=-1;function h(y){return y.type==="text"?y.value:y.type==="element"?y.children.map(h).join(""):""}if(m===0&&(k=0),b===0&&(S=0),b===Number.POSITIVE_INFINITY&&(S=v.children.length),k===-1||S===-1)for(let y=0;y<v.children.length;y++)C+=h(v.children[y]),k===-1&&C.length===m&&(k=y+1),S===-1&&C.length===b&&(S=y+1);if(k===-1)throw new U(`Failed to find start index for decoration ${JSON.stringify(g.start)}`);if(S===-1)throw new U(`Failed to find end index for decoration ${JSON.stringify(g.end)}`);const _=v.children.slice(k,S);if(!g.alwaysWrap&&_.length===v.children.length)a(v,g,"line");else if(!g.alwaysWrap&&_.length===1&&_[0].type==="element")a(_[0],g,"token");else{const y={type:"element",tagName:"span",properties:{},children:_};a(y,g,"wrapper"),v.children.splice(k,_.length,y)}}function l(d,m){i[d]=a(i[d],m,"line")}function a(d,m,b){var C;const g=m.properties||{},v=m.transform||(k=>k);return d.tagName=m.tagName||"span",d.properties={...d.properties,...g,class:d.properties.class},(C=m.properties)!=null&&C.class&&ur(d,m.properties.class),d=v(d,b)||d,d}const c=[],u=r.decorations.sort((d,m)=>m.start.offset-d.start.offset);for(const d of u){const{start:m,end:b}=d;if(m.line===b.line)s(m.line,m.character,b.character,d);else if(m.line<b.line){s(m.line,m.character,Number.POSITIVE_INFINITY,d);for(let g=m.line+1;g<b.line;g++)c.unshift(()=>l(g,d));s(b.line,0,b.character,d)}}c.forEach(d=>d())}}}const Ja=[Qa()];function nn(o){return[...o.transformers||[],...Ja]}function on(o,e,t,n={meta:{},options:t,codeToHast:(r,i)=>on(o,r,i),codeToTokens:(r,i)=>tn(o,r,i)}){var d,m;let r=e;for(const b of nn(t))r=((d=b.preprocess)==null?void 0:d.call(n,r,t))||r;let{tokens:i,fg:s,bg:l,themeName:a,rootStyle:c}=tn(o,r,t);const{mergeWhitespaces:u=!0}=t;u===!0?i=el(i):u==="never"&&(i=tl(i));const p={...n,get source(){return r}};for(const b of nn(t))i=((m=b.tokens)==null?void 0:m.call(p,i))||i;return Za(i,{...t,fg:s,bg:l,themeName:a,rootStyle:c},p)}function Za(o,e,t){var d,m,b;const n=nn(e),r=[],i={type:"root",children:[]},{structure:s="classic"}=e;let l={type:"element",tagName:"pre",properties:{class:`shiki ${e.themeName||""}`,style:e.rootStyle||`background-color:${e.bg};color:${e.fg}`,tabindex:"0",...Object.fromEntries(Array.from(Object.entries(e.meta||{})).filter(([g])=>!g.startsWith("_")))},children:[]},a={type:"element",tagName:"code",properties:{},children:r};const c=[],u={...t,structure:s,addClassToHast:ur,get source(){return t.source},get tokens(){return o},get options(){return e},get root(){return i},get pre(){return l},get code(){return a},get lines(){return c}};if(o.forEach((g,v)=>{var S,h;v&&(s==="inline"?i.children.push({type:"element",tagName:"br",properties:{},children:[]}):s==="classic"&&r.push({type:"text",value:`
`}));let C={type:"element",tagName:"span",properties:{class:"line"},children:[]},k=0;for(const _ of g){let y={type:"element",tagName:"span",properties:{},children:[{type:"text",value:_.content}]};const E=_.htmlStyle||pr(hr(_));E&&(y.properties.style=E);for(const N of n)y=((S=N==null?void 0:N.span)==null?void 0:S.call(u,y,v+1,k,C))||y;s==="inline"?i.children.push(y):s==="classic"&&C.children.push(y),k+=_.content.length}if(s==="classic"){for(const _ of n)C=((h=_==null?void 0:_.line)==null?void 0:h.call(u,C,v+1))||C;c.push(C),r.push(C)}}),s==="classic"){for(const g of n)a=((d=g==null?void 0:g.code)==null?void 0:d.call(u,a))||a;l.children.push(a);for(const g of n)l=((m=g==null?void 0:g.pre)==null?void 0:m.call(u,l))||l;i.children.push(l)}let p=i;for(const g of n)p=((b=g==null?void 0:g.root)==null?void 0:b.call(u,p))||p;return p}function el(o){return o.map(e=>{const t=[];let n="",r=0;return e.forEach((i,s)=>{const l=!(i.fontStyle&&i.fontStyle&ue.Underline);l&&i.content.match(/^\s+$/)&&e[s+1]?(r||(r=i.offset),n+=i.content):n?(l?t.push({...i,offset:r,content:n+i.content}):t.push({content:n,offset:r},i),r=0,n=""):t.push(i)}),t})}function tl(o){return o.map(e=>e.flatMap(t=>{if(t.content.match(/^\s+$/))return t;const n=t.content.match(/^(\s*)(.*?)(\s*)$/);if(!n)return t;const[,r,i,s]=n;if(!r&&!s)return t;const l=[{...t,offset:t.offset+r.length,content:i}];return r&&l.unshift({content:r,offset:t.offset}),s&&l.push({content:s,offset:t.offset+r.length+i.length}),l}))}const nl=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];class St{constructor(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}}St.prototype.property={},St.prototype.normal={},St.prototype.space=null;function mr(o,e){const t={},n={};let r=-1;for(;++r<o.length;)Object.assign(t,o[r].property),Object.assign(n,o[r].normal);return new St(t,n,e)}function zn(o){return o.toLowerCase()}class le{constructor(e,t){this.property=e,this.attribute=t}}le.prototype.space=null,le.prototype.boolean=!1,le.prototype.booleanish=!1,le.prototype.overloadedBoolean=!1,le.prototype.number=!1,le.prototype.commaSeparated=!1,le.prototype.spaceSeparated=!1,le.prototype.commaOrSpaceSeparated=!1,le.prototype.mustUseProperty=!1,le.prototype.defined=!1;let ol=0;const O=Be(),$=Be(),br=Be(),x=Be(),F=Be(),Xe=Be(),ne=Be();function Be(){return 2**++ol}var Hn=Object.freeze({__proto__:null,boolean:O,booleanish:$,commaOrSpaceSeparated:ne,commaSeparated:Xe,number:x,overloadedBoolean:br,spaceSeparated:F});const qn=Object.keys(Hn);class Vn extends le{constructor(e,t,n,r){let i=-1;if(super(e,t),yr(this,"space",r),typeof n=="number")for(;++i<qn.length;){const s=qn[i];yr(this,qn[i],(n&Hn[s])===Hn[s])}}}Vn.prototype.defined=!0;function yr(o,e,t){t&&(o[e]=t)}const rl={}.hasOwnProperty;function Qe(o){const e={},t={};let n;for(n in o.properties)if(rl.call(o.properties,n)){const r=o.properties[n],i=new Vn(n,o.transform(o.attributes||{},n),r,o.space);o.mustUseProperty&&o.mustUseProperty.includes(n)&&(i.mustUseProperty=!0),e[n]=i,t[zn(n)]=n,t[zn(i.attribute)]=n}return new St(e,t,o.space)}const vr=Qe({space:"xlink",transform(o,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),wr=Qe({space:"xml",transform(o,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Sr(o,e){return e in o?o[e]:e}function _r(o,e){return Sr(o,e.toLowerCase())}const Cr=Qe({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:_r,properties:{xmlns:null,xmlnsXLink:null}}),xr=Qe({transform(o,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:$,ariaAutoComplete:null,ariaBusy:$,ariaChecked:$,ariaColCount:x,ariaColIndex:x,ariaColSpan:x,ariaControls:F,ariaCurrent:null,ariaDescribedBy:F,ariaDetails:null,ariaDisabled:$,ariaDropEffect:F,ariaErrorMessage:null,ariaExpanded:$,ariaFlowTo:F,ariaGrabbed:$,ariaHasPopup:null,ariaHidden:$,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:F,ariaLevel:x,ariaLive:null,ariaModal:$,ariaMultiLine:$,ariaMultiSelectable:$,ariaOrientation:null,ariaOwns:F,ariaPlaceholder:null,ariaPosInSet:x,ariaPressed:$,ariaReadOnly:$,ariaRelevant:null,ariaRequired:$,ariaRoleDescription:F,ariaRowCount:x,ariaRowIndex:x,ariaRowSpan:x,ariaSelected:$,ariaSetSize:x,ariaSort:null,ariaValueMax:x,ariaValueMin:x,ariaValueNow:x,ariaValueText:null,role:null}}),il=Qe({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:_r,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Xe,acceptCharset:F,accessKey:F,action:null,allow:null,allowFullScreen:O,allowPaymentRequest:O,allowUserMedia:O,alt:null,as:null,async:O,autoCapitalize:null,autoComplete:F,autoFocus:O,autoPlay:O,blocking:F,capture:null,charSet:null,checked:O,cite:null,className:F,cols:x,colSpan:null,content:null,contentEditable:$,controls:O,controlsList:F,coords:x|Xe,crossOrigin:null,data:null,dateTime:null,decoding:null,default:O,defer:O,dir:null,dirName:null,disabled:O,download:br,draggable:$,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:O,formTarget:null,headers:F,height:x,hidden:O,high:x,href:null,hrefLang:null,htmlFor:F,httpEquiv:F,id:null,imageSizes:null,imageSrcSet:null,inert:O,inputMode:null,integrity:null,is:null,isMap:O,itemId:null,itemProp:F,itemRef:F,itemScope:O,itemType:F,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:O,low:x,manifest:null,max:null,maxLength:x,media:null,method:null,min:null,minLength:x,multiple:O,muted:O,name:null,nonce:null,noModule:O,noValidate:O,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:O,optimum:x,pattern:null,ping:F,placeholder:null,playsInline:O,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:O,referrerPolicy:null,rel:F,required:O,reversed:O,rows:x,rowSpan:x,sandbox:F,scope:null,scoped:O,seamless:O,selected:O,shadowRootDelegatesFocus:O,shadowRootMode:null,shape:null,size:x,sizes:null,slot:null,span:x,spellCheck:$,src:null,srcDoc:null,srcLang:null,srcSet:null,start:x,step:null,style:null,tabIndex:x,target:null,title:null,translate:null,type:null,typeMustMatch:O,useMap:null,value:$,width:x,wrap:null,align:null,aLink:null,archive:F,axis:null,background:null,bgColor:null,border:x,borderColor:null,bottomMargin:x,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:O,declare:O,event:null,face:null,frame:null,frameBorder:null,hSpace:x,leftMargin:x,link:null,longDesc:null,lowSrc:null,marginHeight:x,marginWidth:x,noResize:O,noHref:O,noShade:O,noWrap:O,object:null,profile:null,prompt:null,rev:null,rightMargin:x,rules:null,scheme:null,scrolling:$,standby:null,summary:null,text:null,topMargin:x,valueType:null,version:null,vAlign:null,vLink:null,vSpace:x,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:O,disableRemotePlayback:O,prefix:null,property:null,results:x,security:null,unselectable:null}}),sl=Qe({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Sr,properties:{about:ne,accentHeight:x,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:x,amplitude:x,arabicForm:null,ascent:x,attributeName:null,attributeType:null,azimuth:x,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:x,by:null,calcMode:null,capHeight:x,className:F,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:x,diffuseConstant:x,direction:null,display:null,dur:null,divisor:x,dominantBaseline:null,download:O,dx:null,dy:null,edgeMode:null,editable:null,elevation:x,enableBackground:null,end:null,event:null,exponent:x,externalResourcesRequired:null,fill:null,fillOpacity:x,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Xe,g2:Xe,glyphName:Xe,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:x,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:x,horizOriginX:x,horizOriginY:x,id:null,ideographic:x,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:x,k:x,k1:x,k2:x,k3:x,k4:x,kernelMatrix:ne,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:x,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:x,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:x,overlineThickness:x,paintOrder:null,panose1:null,path:null,pathLength:x,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:F,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:x,pointsAtY:x,pointsAtZ:x,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ne,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ne,rev:ne,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ne,requiredFeatures:ne,requiredFonts:ne,requiredFormats:ne,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:x,specularExponent:x,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:x,strikethroughThickness:x,string:null,stroke:null,strokeDashArray:ne,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:x,strokeOpacity:x,strokeWidth:null,style:null,surfaceScale:x,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ne,tabIndex:x,tableValues:null,target:null,targetX:x,targetY:x,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ne,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:x,underlineThickness:x,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:x,values:null,vAlphabetic:x,vMathematical:x,vectorEffect:null,vHanging:x,vIdeographic:x,version:null,vertAdvY:x,vertOriginX:x,vertOriginY:x,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:x,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),al=/^data[-\w.:]+$/i,kr=/-[a-z]/g,ll=/[A-Z]/g;function cl(o,e){const t=zn(e);let n=e,r=le;if(t in o.normal)return o.property[o.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&al.test(e)){if(e.charAt(4)==="-"){const i=e.slice(5).replace(kr,hl);n="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=e.slice(4);if(!kr.test(i)){let s=i.replace(ll,ul);s.charAt(0)!=="-"&&(s="-"+s),e="data"+s}}r=Vn}return new r(n,e)}function ul(o){return"-"+o.toLowerCase()}function hl(o){return o.charAt(1).toUpperCase()}const pl=mr([wr,vr,Cr,xr,il],"html"),Tr=mr([wr,vr,Cr,xr,sl],"svg"),Er={}.hasOwnProperty;function dl(o,e){const t=e||{};function n(r,...i){let s=n.invalid;const l=n.handlers;if(r&&Er.call(r,o)){const a=String(r[o]);s=Er.call(l,a)?l[a]:n.unknown}if(s)return s.call(this,r,...i)}return n.handlers=t.handlers||{},n.invalid=t.invalid,n.unknown=t.unknown,n}function fl(o,e){if(o=o.replace(e.subset?gl(e.subset):/["&'<>`]/g,n),e.subset||e.escapeOnly)return o;return o.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,t).replace(/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,n);function t(r,i,s){return e.format((r.charCodeAt(0)-55296)*1024+r.charCodeAt(1)-56320+65536,s.charCodeAt(i+2),e)}function n(r,i,s){return e.format(r.charCodeAt(0),s.charCodeAt(i+1),e)}}function gl(o){const e=[];let t=-1;for(;++t<o.length;)e.push(o[t].replace(/[|\\{}()[\]^$+*?.]/g,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}function ml(o,e,t){const n="&#x"+o.toString(16).toUpperCase();return t&&e&&!/[\dA-Fa-f]/.test(String.fromCharCode(e))?n:n+";"}function bl(o,e,t){const n="&#"+String(o);return t&&e&&!/\d/.test(String.fromCharCode(e))?n:n+";"}const yl=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],Kn={nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",times:"\xD7",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",divide:"\xF7",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",fnof:"\u0192",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",bull:"\u2022",hellip:"\u2026",prime:"\u2032",Prime:"\u2033",oline:"\u203E",frasl:"\u2044",weierp:"\u2118",image:"\u2111",real:"\u211C",trade:"\u2122",alefsym:"\u2135",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lArr:"\u21D0",uArr:"\u21D1",rArr:"\u21D2",dArr:"\u21D3",hArr:"\u21D4",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",lang:"\u2329",rang:"\u232A",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666",quot:'"',amp:"&",lt:"<",gt:">",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",circ:"\u02C6",tilde:"\u02DC",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",permil:"\u2030",lsaquo:"\u2039",rsaquo:"\u203A",euro:"\u20AC"},vl=["cent","copy","divide","gt","lt","not","para","times"],Ar={}.hasOwnProperty,Yn={};let rn;for(rn in Kn)Ar.call(Kn,rn)&&(Yn[Kn[rn]]=rn);function wl(o,e,t,n){const r=String.fromCharCode(o);if(Ar.call(Yn,r)){const i=Yn[r],s="&"+i;return t&&yl.includes(i)&&!vl.includes(i)&&(!n||e&&e!==61&&/[^\da-z]/i.test(String.fromCharCode(e)))?s:s+";"}return""}function Sl(o,e,t){let n=ml(o,e,t.omitOptionalSemicolons),r;if((t.useNamedReferences||t.useShortestReferences)&&(r=wl(o,e,t.omitOptionalSemicolons,t.attribute)),(t.useShortestReferences||!r)&&t.useShortestReferences){const i=bl(o,e,t.omitOptionalSemicolons);i.length<n.length&&(n=i)}return r&&(!t.useShortestReferences||r.length<n.length)?r:n}function Je(o,e){return fl(o,Object.assign({format:Sl},e))}const _l=/^>|^->|<!--|-->|--!>|<!-$/g,Cl=[">"],xl=["<",">"];function kl(o,e,t,n){return n.settings.bogusComments?"<?"+Je(o.value,Object.assign({},n.settings.characterReferences,{subset:Cl}))+">":"<!--"+o.value.replace(_l,r)+"-->";function r(i){return Je(i,Object.assign({},n.settings.characterReferences,{subset:xl}))}}function Tl(o,e,t,n){return"<!"+(n.settings.upperDoctype?"DOCTYPE":"doctype")+(n.settings.tightDoctype?"":" ")+"html>"}function Lr(o,e){const t=String(o);if(typeof e!="string")throw new TypeError("Expected character");let n=0,r=t.indexOf(e);for(;r!==-1;)n++,r=t.indexOf(e,r+e.length);return n}function El(o,e){const t=e||{};return(o[o.length-1]===""?[...o,""]:o).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}function Al(o){return o.join(" ").trim()}const Ll=/[ \t\n\f\r]/g;function Xn(o){return typeof o=="object"?o.type==="text"?Nr(o.value):!1:Nr(o)}function Nr(o){return o.replace(Ll,"")===""}const z=Pr(1),Or=Pr(-1),Nl=[];function Pr(o){return e;function e(t,n,r){const i=t?t.children:Nl;let s=(n||0)+o,l=i[s];if(!r)for(;l&&Xn(l);)s+=o,l=i[s];return l}}const Ol={}.hasOwnProperty;function Rr(o){return e;function e(t,n,r){return Ol.call(o,t.tagName)&&o[t.tagName](t,n,r)}}const Qn=Rr({body:Rl,caption:Jn,colgroup:Jn,dd:Bl,dt:Dl,head:Jn,html:Pl,li:Il,optgroup:Fl,option:Ul,p:Ml,rp:Mr,rt:Mr,tbody:jl,td:Ir,tfoot:Wl,th:Ir,thead:Gl,tr:$l});function Jn(o,e,t){const n=z(t,e,!0);return!n||n.type!=="comment"&&!(n.type==="text"&&Xn(n.value.charAt(0)))}function Pl(o,e,t){const n=z(t,e);return!n||n.type!=="comment"}function Rl(o,e,t){const n=z(t,e);return!n||n.type!=="comment"}function Ml(o,e,t){const n=z(t,e);return n?n.type==="element"&&(n.tagName==="address"||n.tagName==="article"||n.tagName==="aside"||n.tagName==="blockquote"||n.tagName==="details"||n.tagName==="div"||n.tagName==="dl"||n.tagName==="fieldset"||n.tagName==="figcaption"||n.tagName==="figure"||n.tagName==="footer"||n.tagName==="form"||n.tagName==="h1"||n.tagName==="h2"||n.tagName==="h3"||n.tagName==="h4"||n.tagName==="h5"||n.tagName==="h6"||n.tagName==="header"||n.tagName==="hgroup"||n.tagName==="hr"||n.tagName==="main"||n.tagName==="menu"||n.tagName==="nav"||n.tagName==="ol"||n.tagName==="p"||n.tagName==="pre"||n.tagName==="section"||n.tagName==="table"||n.tagName==="ul"):!t||!(t.type==="element"&&(t.tagName==="a"||t.tagName==="audio"||t.tagName==="del"||t.tagName==="ins"||t.tagName==="map"||t.tagName==="noscript"||t.tagName==="video"))}function Il(o,e,t){const n=z(t,e);return!n||n.type==="element"&&n.tagName==="li"}function Dl(o,e,t){const n=z(t,e);return!!(n&&n.type==="element"&&(n.tagName==="dt"||n.tagName==="dd"))}function Bl(o,e,t){const n=z(t,e);return!n||n.type==="element"&&(n.tagName==="dt"||n.tagName==="dd")}function Mr(o,e,t){const n=z(t,e);return!n||n.type==="element"&&(n.tagName==="rp"||n.tagName==="rt")}function Fl(o,e,t){const n=z(t,e);return!n||n.type==="element"&&n.tagName==="optgroup"}function Ul(o,e,t){const n=z(t,e);return!n||n.type==="element"&&(n.tagName==="option"||n.tagName==="optgroup")}function Gl(o,e,t){const n=z(t,e);return!!(n&&n.type==="element"&&(n.tagName==="tbody"||n.tagName==="tfoot"))}function jl(o,e,t){const n=z(t,e);return!n||n.type==="element"&&(n.tagName==="tbody"||n.tagName==="tfoot")}function Wl(o,e,t){return!z(t,e)}function $l(o,e,t){const n=z(t,e);return!n||n.type==="element"&&n.tagName==="tr"}function Ir(o,e,t){const n=z(t,e);return!n||n.type==="element"&&(n.tagName==="td"||n.tagName==="th")}const zl=Rr({body:Vl,colgroup:Kl,head:ql,html:Hl,tbody:Yl});function Hl(o){const e=z(o,-1);return!e||e.type!=="comment"}function ql(o){const e=o.children,t=[];let n=-1;for(;++n<e.length;){const r=e[n];if(r.type==="element"&&(r.tagName==="title"||r.tagName==="base")){if(t.includes(r.tagName))return!1;t.push(r.tagName)}}return e.length>0}function Vl(o){const e=z(o,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&Xn(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function Kl(o,e,t){const n=Or(t,e),r=z(o,-1,!0);return t&&n&&n.type==="element"&&n.tagName==="colgroup"&&Qn(n,t.children.indexOf(n),t)?!1:!!(r&&r.type==="element"&&r.tagName==="col")}function Yl(o,e,t){const n=Or(t,e),r=z(o,-1);return t&&n&&n.type==="element"&&(n.tagName==="thead"||n.tagName==="tbody")&&Qn(n,t.children.indexOf(n),t)?!1:!!(r&&r.type==="element"&&r.tagName==="tr")}const sn={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function Xl(o,e,t,n){const r=n.schema,i=r.space==="svg"?!1:n.settings.omitOptionalTags;let s=r.space==="svg"?n.settings.closeEmptyElements:n.settings.voids.includes(o.tagName.toLowerCase());const l=[];let a;r.space==="html"&&o.tagName==="svg"&&(n.schema=Tr);const c=Ql(n,o.properties),u=n.all(r.space==="html"&&o.tagName==="template"?o.content:o);return n.schema=r,u&&(s=!1),(c||!i||!zl(o,e,t))&&(l.push("<",o.tagName,c?" "+c:""),s&&(r.space==="svg"||n.settings.closeSelfClosing)&&(a=c.charAt(c.length-1),(!n.settings.tightSelfClosing||a==="/"||a&&a!=='"'&&a!=="'")&&l.push(" "),l.push("/")),l.push(">")),l.push(u),!s&&(!i||!Qn(o,e,t))&&l.push("</"+o.tagName+">"),l.join("")}function Ql(o,e){const t=[];let n=-1,r;if(e){for(r in e)if(e[r]!==null&&e[r]!==void 0){const i=Jl(o,r,e[r]);i&&t.push(i)}}for(;++n<t.length;){const i=o.settings.tightAttributes?t[n].charAt(t[n].length-1):void 0;n!==t.length-1&&i!=='"'&&i!=="'"&&(t[n]+=" ")}return t.join("")}function Jl(o,e,t){const n=cl(o.schema,e),r=o.settings.allowParseErrors&&o.schema.space==="html"?0:1,i=o.settings.allowDangerousCharacters?0:1;let s=o.quote,l;if(n.overloadedBoolean&&(t===n.attribute||t==="")?t=!0:(n.boolean||n.overloadedBoolean&&typeof t!="string")&&(t=!!t),t==null||t===!1||typeof t=="number"&&Number.isNaN(t))return"";const a=Je(n.attribute,Object.assign({},o.settings.characterReferences,{subset:sn.name[r][i]}));return t===!0||(t=Array.isArray(t)?(n.commaSeparated?El:Al)(t,{padLeft:!o.settings.tightCommaSeparatedLists}):String(t),o.settings.collapseEmptyAttributes&&!t)?a:(o.settings.preferUnquoted&&(l=Je(t,Object.assign({},o.settings.characterReferences,{attribute:!0,subset:sn.unquoted[r][i]}))),l!==t&&(o.settings.quoteSmart&&Lr(t,s)>Lr(t,o.alternative)&&(s=o.alternative),l=s+Je(t,Object.assign({},o.settings.characterReferences,{subset:(s==="'"?sn.single:sn.double)[r][i],attribute:!0}))+s),a+(l&&"="+l))}const Zl=["<","&"];function Dr(o,e,t,n){return t&&t.type==="element"&&(t.tagName==="script"||t.tagName==="style")?o.value:Je(o.value,Object.assign({},n.settings.characterReferences,{subset:Zl}))}function ec(o,e,t,n){return n.settings.allowDangerousHtml?o.value:Dr(o,e,t,n)}function tc(o,e,t,n){return n.all(o)}const nc=dl("type",{invalid:oc,unknown:rc,handlers:{comment:kl,doctype:Tl,element:Xl,raw:ec,root:tc,text:Dr}});function oc(o){throw new Error("Expected node, not `"+o+"`")}function rc(o){const e=o;throw new Error("Cannot compile unknown node `"+e.type+"`")}const ic={},sc={},ac=[];function lc(o,e){const t=ic,n=t.quote||'"',r=n==='"'?"'":'"';if(n!=='"'&&n!=="'")throw new Error("Invalid quote `"+n+"`, expected `'` or `\"`");return{one:cc,all:uc,settings:{omitOptionalTags:t.omitOptionalTags||!1,allowParseErrors:t.allowParseErrors||!1,allowDangerousCharacters:t.allowDangerousCharacters||!1,quoteSmart:t.quoteSmart||!1,preferUnquoted:t.preferUnquoted||!1,tightAttributes:t.tightAttributes||!1,upperDoctype:t.upperDoctype||!1,tightDoctype:t.tightDoctype||!1,bogusComments:t.bogusComments||!1,tightCommaSeparatedLists:t.tightCommaSeparatedLists||!1,tightSelfClosing:t.tightSelfClosing||!1,collapseEmptyAttributes:t.collapseEmptyAttributes||!1,allowDangerousHtml:t.allowDangerousHtml||!1,voids:t.voids||nl,characterReferences:t.characterReferences||sc,closeSelfClosing:t.closeSelfClosing||!1,closeEmptyElements:t.closeEmptyElements||!1},schema:t.space==="svg"?Tr:pl,quote:n,alternative:r}.one(Array.isArray(o)?{type:"root",children:o}:o,void 0,void 0)}function cc(o,e,t){return nc(o,e,t,this)}function uc(o){const e=[],t=o&&o.children||ac;let n=-1;for(;++n<t.length;)e[n]=this.one(t[n],n,o);return e.join("")}function hc(o,e,t){var i;const n={meta:{},options:t,codeToHast:(s,l)=>on(o,s,l),codeToTokens:(s,l)=>tn(o,s,l)};let r=lc(on(o,e,t,n));for(const s of nn(t))r=((i=s.postprocess)==null?void 0:i.call(n,r,t))||r;return r}async function pc(o){let e,t;const n={};function r(g){t=g,n.HEAPU8=new Uint8Array(g),n.HEAPU32=new Uint32Array(g)}function i(){return typeof performance<"u"?performance.now():Date.now()}function s(g,v,C){n.HEAPU8.copyWithin(g,v,v+C)}function l(){return 2147483648}function a(g){try{return e.grow(g-t.byteLength+65535>>>16),r(e.buffer),1}catch{}}function c(g){const v=n.HEAPU8.length;g=g>>>0;const C=l();if(g>C)return!1;const k=(S,h)=>S+(h-S%h)%h;for(let S=1;S<=4;S*=2){let h=v*(1+.2/S);h=Math.min(h,g+100663296);const _=Math.min(C,k(Math.max(g,h),65536));if(a(_))return!0}return!1}const u=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function p(g,v,C=1024){const k=v+C;let S=v;for(;g[S]&&!(S>=k);)++S;if(S-v>16&&g.buffer&&u)return u.decode(g.subarray(v,S));let h="";for(;v<S;){let _=g[v++];if(!(_&128)){h+=String.fromCharCode(_);continue}const y=g[v++]&63;if((_&224)===192){h+=String.fromCharCode((_&31)<<6|y);continue}const E=g[v++]&63;if((_&240)===224?_=(_&15)<<12|y<<6|E:_=(_&7)<<18|y<<12|E<<6|g[v++]&63,_<65536)h+=String.fromCharCode(_);else{const N=_-65536;h+=String.fromCharCode(55296|N>>10,56320|N&1023)}}return h}function d(g,v){return g?p(n.HEAPU8,g,v):""}const m={emscripten_get_now:i,emscripten_memcpy_big:s,emscripten_resize_heap:c,fd_write:()=>0};async function b(){const g=await o({env:m,wasi_snapshot_preview1:m});e=g.memory,r(e.buffer),Object.assign(n,g),n.UTF8ToString=d}return await b(),n}let H=null,dc=!1;function fc(o){throw new U(o.UTF8ToString(o.getLastOnigError()))}class pn{constructor(e){f(this,"utf16Length");f(this,"utf8Length");f(this,"utf16Value");f(this,"utf8Value");f(this,"utf16OffsetToUtf8");f(this,"utf8OffsetToUtf16");const t=e.length,n=pn._utf8ByteLength(e),r=n!==t,i=r?new Uint32Array(t+1):null;r&&(i[t]=n);const s=r?new Uint32Array(n+1):null;r&&(s[n]=t);const l=new Uint8Array(n);let a=0;for(let c=0;c<t;c++){const u=e.charCodeAt(c);let p=u,d=!1;if(u>=55296&&u<=56319&&c+1<t){const m=e.charCodeAt(c+1);m>=56320&&m<=57343&&(p=(u-55296<<10)+65536|m-56320,d=!0)}r&&(i[c]=a,d&&(i[c+1]=a),p<=127?s[a+0]=c:p<=2047?(s[a+0]=c,s[a+1]=c):p<=65535?(s[a+0]=c,s[a+1]=c,s[a+2]=c):(s[a+0]=c,s[a+1]=c,s[a+2]=c,s[a+3]=c)),p<=127?l[a++]=p:p<=2047?(l[a++]=192|(p&1984)>>>6,l[a++]=128|(p&63)>>>0):p<=65535?(l[a++]=224|(p&61440)>>>12,l[a++]=128|(p&4032)>>>6,l[a++]=128|(p&63)>>>0):(l[a++]=240|(p&1835008)>>>18,l[a++]=128|(p&258048)>>>12,l[a++]=128|(p&4032)>>>6,l[a++]=128|(p&63)>>>0),d&&c++}this.utf16Length=t,this.utf8Length=n,this.utf16Value=e,this.utf8Value=l,this.utf16OffsetToUtf8=i,this.utf8OffsetToUtf16=s}static _utf8ByteLength(e){let t=0;for(let n=0,r=e.length;n<r;n++){const i=e.charCodeAt(n);let s=i,l=!1;if(i>=55296&&i<=56319&&n+1<r){const a=e.charCodeAt(n+1);a>=56320&&a<=57343&&(s=(i-55296<<10)+65536|a-56320,l=!0)}s<=127?t+=1:s<=2047?t+=2:s<=65535?t+=3:t+=4,l&&n++}return t}createString(e){const t=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,t),t}}const ee=class ee{constructor(e){f(this,"id",++ee.LAST_ID);f(this,"_onigBinding");f(this,"content");f(this,"utf16Length");f(this,"utf8Length");f(this,"utf16OffsetToUtf8");f(this,"utf8OffsetToUtf16");f(this,"ptr");if(!H)throw new U("Must invoke loadWasm first.");this._onigBinding=H,this.content=e;const t=new pn(e);this.utf16Length=t.utf16Length,this.utf8Length=t.utf8Length,this.utf16OffsetToUtf8=t.utf16OffsetToUtf8,this.utf8OffsetToUtf16=t.utf8OffsetToUtf16,this.utf8Length<1e4&&!ee._sharedPtrInUse?(ee._sharedPtr||(ee._sharedPtr=H.omalloc(1e4)),ee._sharedPtrInUse=!0,H.HEAPU8.set(t.utf8Value,ee._sharedPtr),this.ptr=ee._sharedPtr):this.ptr=t.createString(H)}convertUtf8OffsetToUtf16(e){return this.utf8OffsetToUtf16?e<0?0:e>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[e]:e}convertUtf16OffsetToUtf8(e){return this.utf16OffsetToUtf8?e<0?0:e>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[e]:e}dispose(){this.ptr===ee._sharedPtr?ee._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};f(ee,"LAST_ID",0),f(ee,"_sharedPtr",0),f(ee,"_sharedPtrInUse",!1);let an=ee;class gc{constructor(e){f(this,"_onigBinding");f(this,"_ptr");if(!H)throw new U("Must invoke loadWasm first.");const t=[],n=[];for(let l=0,a=e.length;l<a;l++){const c=new pn(e[l]);t[l]=c.createString(H),n[l]=c.utf8Length}const r=H.omalloc(4*e.length);H.HEAPU32.set(t,r/4);const i=H.omalloc(4*e.length);H.HEAPU32.set(n,i/4);const s=H.createOnigScanner(r,i,e.length);for(let l=0,a=e.length;l<a;l++)H.ofree(t[l]);H.ofree(i),H.ofree(r),s===0&&fc(H),this._onigBinding=H,this._ptr=s}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,t,n){let r=dc,i=0;if(typeof n=="number"?(n&8&&(r=!0),i=n):typeof n=="boolean"&&(r=n),typeof e=="string"){e=new an(e);const s=this._findNextMatchSync(e,t,r,i);return e.dispose(),s}return this._findNextMatchSync(e,t,r,i)}_findNextMatchSync(e,t,n,r){const i=this._onigBinding;let s;if(n?s=i.findNextOnigScannerMatchDbg(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(t),r):s=i.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(t),r),s===0)return null;const l=i.HEAPU32;let a=s/4;const c=l[a++],u=l[a++],p=[];for(let d=0;d<u;d++){const m=e.convertUtf8OffsetToUtf16(l[a++]),b=e.convertUtf8OffsetToUtf16(l[a++]);p[d]={start:m,end:b,length:b-m}}return{index:c,captureIndices:p}}}function mc(o){return typeof o.instantiator=="function"}function bc(o){return typeof o.default=="function"}function yc(o){return typeof o.data<"u"}function vc(o){return typeof Response<"u"&&o instanceof Response}function wc(o){var e,t;return typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||ArrayBuffer.isView(o))||typeof eo<"u"&&((t=(e=eo).isBuffer)==null?void 0:t.call(e,o))||typeof SharedArrayBuffer<"u"&&o instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&o instanceof Uint32Array}let ln;function Br(o){if(ln)return ln;async function e(){H=await pc(async t=>{let n=o;return n=await n,typeof n=="function"&&(n=await n(t)),typeof n=="function"&&(n=await n(t)),mc(n)?n=await n.instantiator(t):bc(n)?n=await n.default(t):(yc(n)&&(n=n.data),vc(n)?typeof WebAssembly.instantiateStreaming=="function"?n=await Sc(n)(t):n=await _c(n)(t):wc(n)?n=await Zn(n)(t):n instanceof WebAssembly.Module?n=await Zn(n)(t):"default"in n&&n.default instanceof WebAssembly.Module&&(n=await Zn(n.default)(t))),"instance"in n&&(n=n.instance),"exports"in n&&(n=n.exports),n})}return ln=e(),ln}function Zn(o){return e=>WebAssembly.instantiate(o,e)}function Sc(o){return e=>WebAssembly.instantiateStreaming(o,e)}function _c(o){return async e=>{const t=await o.arrayBuffer();return WebAssembly.instantiate(t,e)}}function Cc(o){return new an(o)}function xc(o){return new gc(o)}const Fr={light:"#333333",dark:"#bbbbbb"},Ur={light:"#fffffe",dark:"#1e1e1e"},Gr="__shiki_resolved";function jr(o){var l,a,c,u,p;if(o!=null&&o[Gr])return o;const e={...o};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||(e.type="dark"),e.colorReplacements={...e.colorReplacements},e.settings||(e.settings=[]);let{bg:t,fg:n}=e;if(!t||!n){const d=e.settings?e.settings.find(m=>!m.name&&!m.scope):void 0;(l=d==null?void 0:d.settings)!=null&&l.foreground&&(n=d.settings.foreground),(a=d==null?void 0:d.settings)!=null&&a.background&&(t=d.settings.background),!n&&((c=e==null?void 0:e.colors)!=null&&c["editor.foreground"])&&(n=e.colors["editor.foreground"]),!t&&((u=e==null?void 0:e.colors)!=null&&u["editor.background"])&&(t=e.colors["editor.background"]),n||(n=e.type==="light"?Fr.light:Fr.dark),t||(t=e.type==="light"?Ur.light:Ur.dark),e.fg=n,e.bg=t}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let r=0;const i=new Map;function s(d){var b;if(i.has(d))return i.get(d);r+=1;const m=`#${r.toString(16).padStart(8,"0").toLowerCase()}`;return(b=e.colorReplacements)!=null&&b[`#${m}`]?s(d):(i.set(d,m),m)}e.settings=e.settings.map(d=>{var v,C;const m=((v=d.settings)==null?void 0:v.foreground)&&!d.settings.foreground.startsWith("#"),b=((C=d.settings)==null?void 0:C.background)&&!d.settings.background.startsWith("#");if(!m&&!b)return d;const g={...d,settings:{...d.settings}};if(m){const k=s(d.settings.foreground);e.colorReplacements[k]=d.settings.foreground,g.settings.foreground=k}if(b){const k=s(d.settings.background);e.colorReplacements[k]=d.settings.background,g.settings.background=k}return g});for(const d of Object.keys(e.colors||{}))if((d==="editor.foreground"||d==="editor.background"||d.startsWith("terminal.ansi"))&&!((p=e.colors[d])!=null&&p.startsWith("#"))){const m=s(e.colors[d]);e.colorReplacements[m]=e.colors[d],e.colors[d]=m}return Object.defineProperty(e,Gr,{enumerable:!1,writable:!1,value:!0}),e}class kc extends Aa{constructor(t,n,r,i={}){super(t);f(this,"_resolver");f(this,"_themes");f(this,"_langs");f(this,"_alias");f(this,"_resolvedThemes",new Map);f(this,"_resolvedGrammars",new Map);f(this,"_langMap",new Map);f(this,"_langGraph",new Map);f(this,"_textmateThemeCache",new WeakMap);f(this,"_loadedThemesCache",null);f(this,"_loadedLanguagesCache",null);this._resolver=t,this._themes=n,this._langs=r,this._alias=i,n.forEach(s=>this.loadTheme(s)),r.forEach(s=>this.loadLanguage(s))}getTheme(t){return typeof t=="string"?this._resolvedThemes.get(t):this.loadTheme(t)}loadTheme(t){const n=jr(t);return n.name&&(this._resolvedThemes.set(n.name,n),this._loadedThemesCache=null),n}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(t){let n=this._textmateThemeCache.get(t);n||(n=Qt.createFromRawTheme(t),this._textmateThemeCache.set(t,n)),this._syncRegistry.setTheme(n)}getGrammar(t){if(this._alias[t]){const n=new Set([t]);for(;this._alias[t];){if(t=this._alias[t],n.has(t))throw new U(`Circular alias \`${Array.from(n).join(" -> ")} -> ${t}\``);n.add(t)}}return this._resolvedGrammars.get(t)}async loadLanguage(t){var s,l,a,c;if(this.getGrammar(t.name))return;const n=new Set([...this._langMap.values()].filter(u=>{var p;return(p=u.embeddedLangsLazy)==null?void 0:p.includes(t.name)}));this._resolver.addLanguage(t);const r={balancedBracketSelectors:t.balancedBracketSelectors||["*"],unbalancedBracketSelectors:t.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(t.scopeName,t);const i=await this.loadGrammarWithConfiguration(t.scopeName,1,r);if(i.name=t.name,this._resolvedGrammars.set(t.name,i),t.aliases&&t.aliases.forEach(u=>{this._alias[u]=t.name}),this._loadedLanguagesCache=null,n.size)for(const u of n)this._resolvedGrammars.delete(u.name),this._loadedLanguagesCache=null,(l=(s=this._syncRegistry)==null?void 0:s._injectionGrammars)==null||l.delete(u.scopeName),(c=(a=this._syncRegistry)==null?void 0:a._grammars)==null||c.delete(u.scopeName),await this.loadLanguage(this._langMap.get(u.name))}async init(){this._themes.map(t=>this.loadTheme(t)),await this.loadLanguages(this._langs)}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}async loadLanguages(t){for(const i of t)this.resolveEmbeddedLanguages(i);const n=Array.from(this._langGraph.entries()),r=n.filter(([i,s])=>!s);if(r.length){const i=n.filter(([s,l])=>{var a;return l&&((a=l.embeddedLangs)==null?void 0:a.some(c=>r.map(([u])=>u).includes(c)))}).filter(s=>!r.includes(s));throw new U(`Missing languages ${r.map(([s])=>`\`${s}\``).join(", ")}, required by ${i.map(([s])=>`\`${s}\``).join(", ")}`)}for(const[i,s]of n)this._resolver.addLanguage(s);for(const[i,s]of n)await this.loadLanguage(s)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(t){if(this._langMap.set(t.name,t),this._langGraph.set(t.name,t),t.embeddedLangs)for(const n of t.embeddedLangs)this._langGraph.set(n,this._langMap.get(n))}}class Tc{constructor(e,t){f(this,"_langs",new Map);f(this,"_scopeToLang",new Map);f(this,"_injections",new Map);f(this,"_onigLibPromise");this._onigLibPromise=e,t.forEach(n=>this.addLanguage(n))}get onigLib(){return this._onigLibPromise}getLangRegistration(e){return this._langs.get(e)}async loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(t=>{this._langs.set(t,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(t=>{this._injections.get(t)||this._injections.set(t,[]),this._injections.get(t).push(e.scopeName)})}getInjections(e){const t=e.split(".");let n=[];for(let r=1;r<=t.length;r++){const i=t.slice(0,r).join(".");n=[...n,...this._injections.get(i)||[]]}return n}}let Ec,_t=0;async function Ac(o={}){_t+=1,o.warnings!==!1&&_t>=10&&_t%10===0&&console.warn(`[Shiki] ${_t} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;async function t(S){return Promise.resolve(typeof S=="function"?S():S).then(h=>h.default||h)}async function n(S){return Array.from(new Set((await Promise.all(S.filter(h=>!La(h)).map(async h=>await t(h).then(_=>Array.isArray(_)?_:[_])))).flat()))}const r=o.loadWasm||Ec,[i,s]=await Promise.all([Promise.all((o.themes||[]).map(t)).then(S=>S.map(jr)),n(o.langs||[]),r?Br(r):void 0]),l=new Tc(Promise.resolve({createOnigScanner(S){return xc(S)},createOnigString(S){return Cc(S)}}),s),a=new kc(l,i,s,o.langAlias);await a.init();let c;function u(S){C();const h=a.getGrammar(typeof S=="string"?S:S.name);if(!h)throw new U(`Language \`${S}\` not found, you may need to load it first`);return h}function p(S){if(S==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};C();const h=a.getTheme(S);if(!h)throw new U(`Theme \`${S}\` not found, you may need to load it first`);return h}function d(S){C();const h=p(S);c!==S&&(a.setTheme(h),c=S);const _=a.getColorMap();return{theme:h,colorMap:_}}function m(){return C(),a.getLoadedThemes()}function b(){return C(),a.getLoadedLanguages()}async function g(...S){C(),await a.loadLanguages(await n(S))}async function v(...S){C(),await Promise.all(S.map(async h=>Na(h)?null:a.loadTheme(await t(h))))}function C(){if(e)throw new U("Shiki instance has been disposed")}function k(){e||(e=!0,a.dispose(),_t-=1)}return{setTheme:d,getTheme:p,getLanguage:u,getLoadedThemes:m,getLoadedLanguages:b,loadLanguage:g,loadTheme:v,dispose:k,[Symbol.dispose]:k}}async function Lc(o={}){const e=await Ac(o);return{getLastGrammarState:(t,n)=>$a(e,t,n),codeToTokensBase:(t,n)=>Wn(e,t,n),codeToTokensWithThemes:(t,n)=>gr(e,t,n),codeToTokens:(t,n)=>tn(e,t,n),codeToHast:(t,n)=>on(e,t,n),codeToHtml:(t,n)=>hc(e,t,n),...e,getInternalContext:()=>e}}function cn(o,e){this.init(o,e)}cn.instance=function(o,e){return new cn(o,e)},cn.prototype={ID:"hit",init:function(o,e){typeof o=="string"?this.el=document.querySelector(o):this.el=o,this.getType(e)==="custom"?(this.highlight=e,this.generate()):console.error("valid config object not provided")},getType:function(o){let e=typeof o;if(o){if(Array.isArray(o))return o.length===2&&typeof o[0]=="number"&&typeof o[1]=="number"?"range":"array";if(e==="object"){if(o instanceof RegExp)return"regexp";if(o.hasOwnProperty("highlight"))return"custom"}else if(e==="function"||e==="string")return e}else return"falsey";return"other"},generate:function(){this.el.classList.add(this.ID+"-input",this.ID+"-content"),this.el.addEventListener("input",this.handleInput.bind(this)),this.el.addEventListener("scroll",this.handleScroll.bind(this)),this.highlights=document.createElement("div"),this.highlights.classList.add(this.ID+"-highlights",this.ID+"-content"),this.backdrop=document.createElement("div"),this.backdrop.classList.add(this.ID+"-backdrop"),this.backdrop.append(this.highlights),this.container=document.createElement("div"),this.container.classList.add(this.ID+"-container"),this.el.parentNode.insertBefore(this.container,this.el.nextSibling),this.container.append(this.backdrop),this.container.append(this.el),this.container.addEventListener("scroll",this.blockContainerScroll.bind(this)),this.handleInput()},handleInput:function(){let o=this.el.value,e=this.getRanges(o,this.highlight),t=this.removeStaggeredRanges(e),n=this.getBoundaries(t);this.renderMarks(n)},getRanges:function(o,e){switch(this.getType(e)){case"array":return this.getArrayRanges(o,e);case"function":return this.getFunctionRanges(o,e);case"regexp":return this.getRegExpRanges(o,e);case"string":return this.getStringRanges(o,e);case"range":return this.getRangeRanges(o,e);case"custom":return this.getCustomRanges(o,e);default:if(e)console.error("unrecognized highlight type");else return[]}},getArrayRanges:function(o,e){let t=e.map(this.getRanges.bind(this,o));return Array.prototype.concat.apply([],t)},getFunctionRanges:function(o,e){return this.getRanges(o,e(o))},getRegExpRanges:function(o,e){let t=[],n;for(;n=e.exec(o),n!==null&&(t.push([n.index,n.index+n[0].length]),!!e.global););return t},getStringRanges:function(o,e){let t=[],n=o.toLowerCase(),r=e.toLowerCase(),i=0;for(;i=n.indexOf(r,i),i!==-1;)t.push([i,i+r.length]),i+=r.length;return t},getRangeRanges:function(o,e){return[e]},getCustomRanges:function(o,e){let t=this.getRanges(o,e.highlight);return e.className&&t.forEach(function(n){n.className?n.className=e.className+" "+n.className:n.className=e.className}),e.blank&&t.forEach(function(n){n.blank=e.blank}),t},removeStaggeredRanges:function(o){let e=[];return o.forEach(function(t){e.some(function(n){let r=t[0]>n[0]&&t[0]<n[1],i=t[1]>n[0]&&t[1]<n[1];return r!==i})||e.push(t)}),e},getBoundaries:function(o){let e=[];return o.forEach(function(t){e.push({type:"start",index:t[0],className:t.className,blank:t.blank}),e.push({type:"stop",index:t[1]})}),this.sortBoundaries(e),e},sortBoundaries:function(o){o.sort(function(e,t){return e.index!==t.index?t.index-e.index:e.type==="stop"&&t.type==="start"?1:e.type==="start"&&t.type==="stop"?-1:0})},renderMarks:function(o){let e=this.el.value;const t=e;o.forEach(function(n,r){let i;n.type==="start"?i="{{hit-mark-start|"+r+"}}":i="{{hit-mark-stop}}",e=e.slice(0,n.index)+i+e.slice(n.index)}),e=e.replace(/\n({{hit-mark-stop}})?$/,`

$1`),e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/{{hit-mark-start\|(\d+)}}/g,function(n,r){const i=o[+r].className;if(i){let s='<mark class="'+i+'"';if(i==="word"){let l=t.slice(o[+r].index,o[+r-1].index);l=l.replace(/"/g,"&quot;"),s+=' data-word="'+l+'"'}return s+">"}else return"<mark>"}),e=e.replace(/{{hit-mark-stop}}/g,"</mark>"),e+='<mark class="placeholder"> \u26A1 </mark>',this.highlights.innerHTML=e,this.el.dispatchEvent(new CustomEvent("highlights-updated"))},handleScroll:function(){this.backdrop.scrollTop=this.el.scrollTop;let o=this.el.scrollLeft;o>0?this.backdrop.style.transform="translateX("+-o+"px)":this.backdrop.style.transform=""},blockContainerScroll:function(){this.container.scrollLeft=0},destroy:function(){this.container.parentElement.replaceChild(this.el,this.container),this.el.classList.remove(this.ID+"-content",this.ID+"-input")}};export{cn as H,Fe as T,Lc as c,ci as d,Us as f,Br as l,Ws as n,dt as t};
