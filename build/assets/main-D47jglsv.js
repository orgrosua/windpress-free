import{_ as d}from"./preload-helper-Tcd9XBoB.js";import{l as R}from"./logger-BTW-zIW3.js";import{l as F,c as N,n as h,T as O,H as D}from"./highlight-in-textarea-D0Dt3T53.js";import{i as o,o as g,a as k}from"./constant-Cdlzk0w4.js";import{r as A,w as P,n as c}from"./runtime-core.esm-bundler-DpP2Prln.js";import"./index-BHzFOpFs.js";import"./index-BbP3371Q.js";(async()=>{(async()=>(await F(d(()=>import("./wasm-CsTmP73Z.js"),[],import.meta.url)),await N({themes:[d(()=>import("./dark-plus-KEYLhlmT.js"),[],import.meta.url),d(()=>import("./light-plus-BsvsQ1iS.js"),[],import.meta.url)],langs:[d(()=>import("./css-CbYhyuC0.js"),[],import.meta.url)]})))();const i=document.createRange().createContextualFragment(`
    <textarea id="windpressoxygen-plc-input" class="windpressoxygen-plc-input" rows="2" spellcheck="false"></textarea>
`).querySelector("#windpressoxygen-plc-input"),v=document.createRange().createContextualFragment(`
    <div class="windpressoxygen-plc-action-container">
        <div class="actions">
        </div>
    </div>
`).querySelector(".windpressoxygen-plc-action-container"),M=v.querySelector(".actions"),w=document.createRange().createContextualFragment(`
        <span id="windpressoxygen-plc-class-sort" class="oxygen-svg-wrapper windpressoxygen-plc-class-sort">
            <svg  xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round" class="oxygen-svg icon icon-tabler icons-tabler-outline icon-tabler-reorder"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" /><path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" /><path d="M17 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" /><path d="M5 11v-3a3 3 0 0 1 3 -3h8a3 3 0 0 1 3 3v3" /><path d="M16.5 8.5l2.5 2.5l2.5 -2.5" /></svg>    
        </span>
`).querySelector("#windpressoxygen-plc-class-sort");M.appendChild(w);const b=A(!1),p=A(null);let f=null;h(i);let y=[];wp.hooks.addAction("windpressoxygen-autocomplete-items-refresh","windpressoxygen",()=>{y=wp.hooks.applyFilters("windpressoxygen-autocomplete-items",[],i.value)}),wp.hooks.doAction("windpressoxygen-autocomplete-items-refresh");const r=new O({containerClass:"windpressoxygen-tribute-container",autocompleteMode:!0,menuItemLimit:40,noMatchTemplate:"",values:async function(t,n){const e=await wp.hooks.applyFilters("windpressoxygen-autocomplete-items-query",y,t);n(e)},lookup:"value",itemClass:"class-item",menuItemTemplate:function(t){let n="";return t.original.color!==void 0&&(n+=`background-color: ${t.original.color};`),t.original.fontWeight!==void 0&&(n+=`font-weight: ${t.original.fontWeight};`),`
            <span class="class-name" data-tribute-class-name="${t.original.value}">${t.string}</span>
            <span class="class-hint" style="${n}"></span>
        `}});r.setMenuContainer=function(t){this.menuContainer=t};const I=r.events.callbacks;r.events.callbacks=function(){return{...I.call(this),up:(t,n)=>{if(this.tribute.isActive&&this.tribute.current.filteredItems){t.preventDefault(),t.stopPropagation();let e=this.tribute.current.filteredItems.length,s=this.tribute.menuSelected;e>s&&s>0?(this.tribute.menuSelected--,this.setActiveLi()):s===0&&(this.tribute.menuSelected=e-1,this.setActiveLi(),this.tribute.menu.scrollTop=this.tribute.menu.scrollHeight),S()}},down:(t,n)=>{if(this.tribute.isActive&&this.tribute.current.filteredItems){t.preventDefault(),t.stopPropagation();let e=this.tribute.current.filteredItems.length-1,s=this.tribute.menuSelected;e>s?(this.tribute.menuSelected++,this.setActiveLi()):e===s&&(this.tribute.menuSelected=0,this.setActiveLi(),this.tribute.menu.scrollTop=0),S()}}}},r.attach(i),new MutationObserver(function(t){b.value=!t[0].target.classList.contains("ng-hide")}).observe(document.querySelector(".oxygen-sidebar-currently-editing"),{attributes:!0,attributeFilter:["class"]});const q=o.activateComponent;o.activateComponent=function(t,n,e){q(t,n,e),p.value=o.component.active.id};function x(t){const n=o.component.active.id,e=o.component.active.name;if(n===0)return;const s=o.component.options[n];if(s.model===void 0)return;s.model["custom-attributes"]===void 0&&k.addCustomAttribute("plainclass",t);const a=s.model["custom-attributes"],l=a.find(m=>m.name==="plainclass");l?l.value=t:a.push({name:"plainclass",value:t}),o.component.options[n].model["custom-attributes"]=a,o.setOption(n,e,"custom-attributes"),o.applyCustomAttributes(n)}P([p,b],(t,n)=>{t[0]!==n[0]&&c(()=>{var l;const e=o.component.active.id;if(e===0)return;const s=o.component.options[e];if(s.model===void 0)return;s.model["custom-attributes"]===void 0&&k.addCustomAttribute("plainclass","");const a=s.model["custom-attributes"];i.value=((l=a==null?void 0:a.find(m=>m.name==="plainclass"))==null?void 0:l.value)||"",_()}),t[0]&&t[1]&&c(()=>{const e=document.querySelector(".oxygen-sidebar-currently-editing");e.querySelector(".windpressoxygen-plc-input")===null&&(e.appendChild(v),window.tippy(".windpressoxygen-plc-class-sort",{content:"Automatic Class Sorting",animation:"shift-toward",placement:"right"}),e.appendChild(i),f=new D(i,{highlight:[{highlight:new RegExp("(?<=\\s|^)(?:(?!\\s).)+(?=\\s|$)","g"),className:"word"},{highlight:new RegExp("(?<=\\s)\\s","g"),className:"multispace",blank:!0}]}),h.update(i))})}),i.addEventListener("input",function(t){x(t.target.value)});function _(){c(()=>{try{f.handleInput()}catch{}h.update(i),r.hideMenu()})}i.addEventListener("highlights-updated",function(t){});const T=new MutationObserver(function(t){t.forEach(function(n){n.type==="childList"&&n.addedNodes.length>0&&n.addedNodes.forEach(e=>{e.addEventListener("mouseenter",s=>{const a=e.querySelector(".class-name").dataset.tributeClassName;C(a)}),e.addEventListener("mouseleave",s=>{L()}),e.addEventListener("click",s=>{L()})})})});let u=null;i.addEventListener("tribute-active-true",function(t){u===null&&(u=document.querySelector(".windpressoxygen-tribute-container>ul")),c(()=>{u&&T.observe(u,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"]})})}),w.addEventListener("click",async function(t){var n,e,s;((s=(e=(n=g.contentWindow.windpress)==null?void 0:n.loaded)==null?void 0:e.module)==null?void 0:s.classSorter)===!0&&(i.value=await g.contentWindow.windpress.module.classSorter.sort(i.value),x(i.value),_())});function C(t){E({action:"windpressoxygen-preview-class",do:"add",elementId:p.value,className:t})}function L(){E({action:"windpressoxygen-preview-class",do:"remove"})}function S(){c(()=>{let t=r.menu.querySelector("li.highlight>span.class-name");C(t.dataset.tributeClassName)})}function E(t){g.contentWindow.postMessage(t,"*")}R("Module loaded!",{module:"plain-classes"})})();
