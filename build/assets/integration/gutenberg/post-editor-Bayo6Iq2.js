import{l as n}from"../../logger-BTW-zIW3.js";n("Loading..."),(async()=>{let r,i;for(;!r;)r=document.querySelector('iframe[name="editor-canvas"]'),await new Promise(t=>setTimeout(t,100));let o=!1,a=setTimeout(()=>{o=!0},45e3);for(;!o;){if(i=document.querySelectorAll("script"),i=Array.from(i).filter(t=>{let e=t.getAttribute("id");return e&&e.startsWith("windpress:")&&!e.startsWith("windpress:integration-")}),i.length>0){clearTimeout(a);break}await new Promise(t=>setTimeout(t,100))}if(o){n("time out! failed to find WindPress script");return}let c=r.contentWindow||r,s=r.contentDocument||c.document;for(;!s.head;)await new Promise(t=>setTimeout(t,300));n("injecting WindPress script into the root container");let d=s.querySelectorAll("script");Array.from(d).some(t=>{let e=t.getAttribute("id");return e&&e.startsWith("windpress:")})?n("WindPress script is already injected"):(n("starting the root injection process..."),i.forEach(t=>{s.head.appendChild(document.createRange().createContextualFragment(t.outerHTML))}))})();
