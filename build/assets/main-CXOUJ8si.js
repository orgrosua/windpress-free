import{_ as u}from"./preload-helper-Tcd9XBoB.js";import{l as N}from"./logger-DdRf9qrq.js";import{l as A,c as I,n as h,T as M,H as q}from"./highlight-in-textarea-BjgYI_NM.js";import{b as r,a as E,c as n}from"./constant-CW0EH67T.js";import{F as y,E as c,C as T}from"./runtime-core.esm-bundler-cDi-oBs7.js";import"./index-BHzFOpFs.js";import"./index-BbP3371Q.js";(async()=>{(async()=>(await A(u(()=>import("./wasm-CsTmP73Z.js"),[],import.meta.url)),await I({themes:[u(()=>import("./dark-plus-KEYLhlmT.js"),[],import.meta.url),u(()=>import("./light-plus-BsvsQ1iS.js"),[],import.meta.url)],langs:[u(()=>import("./css-CbYhyuC0.js"),[],import.meta.url)]})))();const i=document.createRange().createContextualFragment(`
    <textarea id="windpressbricks-plc-input" class="windpressbricks-plc-input" rows="2" spellcheck="false"></textarea>
`).querySelector("#windpressbricks-plc-input"),v=document.createRange().createContextualFragment(`
    <div class="windpressbricks-plc-action-container">
        <div class="actions">
        </div>
    </div>
`).querySelector(".windpressbricks-plc-action-container"),L=v.querySelector(".actions"),b=document.createRange().createContextualFragment(`
    <span id="windpressbricks-plc-class-sort" class="bricks-svg-wrapper windpressbricks-plc-class-sort" data-balloon="Automatic Class Sorting" data-balloon-pos="bottom-right">
        <svg  xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round" class="bricks-svg icon icon-tabler icons-tabler-outline icon-tabler-reorder"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" /><path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" /><path d="M17 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" /><path d="M5 11v-3a3 3 0 0 1 3 -3h8a3 3 0 0 1 3 3v3" /><path d="M16.5 8.5l2.5 2.5l2.5 -2.5" /></svg>    
    </span>
`).querySelector("#windpressbricks-plc-class-sort");L.appendChild(b);const d=y(!1),p=y(null);let g=null;h(i);let w=[];wp.hooks.addAction("windpressbricks-autocomplete-items-refresh","windpressbricks",()=>{w=wp.hooks.applyFilters("windpressbricks-autocomplete-items",[],i.value)}),wp.hooks.doAction("windpressbricks-autocomplete-items-refresh");const l=new M({containerClass:"windpressbricks-tribute-container",autocompleteMode:!0,menuItemLimit:40,noMatchTemplate:"",values:async function(e,t){const s=await wp.hooks.applyFilters("windpressbricks-autocomplete-items-query",w,e);t(s)},lookup:"value",itemClass:"class-item",menuItemTemplate:function(e){let t="";return e.original.color!==void 0&&(t+=`background-color: ${e.original.color};`),e.original.fontWeight!==void 0&&(t+=`font-weight: ${e.original.fontWeight};`),`
            <span class="class-name" data-tribute-class-name="${e.original.value}">${e.string}</span>
            <span class="class-hint" style="${t}"></span>
        `}});l.setMenuContainer=function(e){this.menuContainer=e};const C=l.events.callbacks;l.events.callbacks=function(){return{...C.call(this),up:(e,t)=>{if(this.tribute.isActive&&this.tribute.current.filteredItems){e.preventDefault(),e.stopPropagation();let s=this.tribute.current.filteredItems.length,a=this.tribute.menuSelected;s>a&&a>0?(this.tribute.menuSelected--,this.setActiveLi()):a===0&&(this.tribute.menuSelected=s-1,this.setActiveLi(),this.tribute.menu.scrollTop=this.tribute.menu.scrollHeight),f()}},down:(e,t)=>{if(this.tribute.isActive&&this.tribute.current.filteredItems){e.preventDefault(),e.stopPropagation();let s=this.tribute.current.filteredItems.length-1,a=this.tribute.menuSelected;s>a?(this.tribute.menuSelected++,this.setActiveLi()):s===a&&(this.tribute.menuSelected=0,this.setActiveLi(),this.tribute.menu.scrollTop=0),f()}}}},l.attach(i),new MutationObserver(function(e){e.forEach(function(t){t.type==="attributes"?t.target.id==="bricks-panel-element"&&t.attributeName==="style"?t.target.style.display!=="none"?d.value=!0:d.value=!1:t.attributeName==="placeholder"&&t.target.tagName==="INPUT"&&t.target.classList.contains("placeholder")&&(p.value=r.$_activeElement.value.id):t.type==="childList"&&t.addedNodes.length>0&&(t.target.id==="bricks-panel-sticky"&&t.addedNodes[0].id==="bricks-panel-element-classes"?p.value=r.$_activeElement.value.id:t.target.dataset&&t.target.dataset.controlkey==="_cssClasses"&&t.addedNodes[0].childNodes.length>0&&document.querySelector("#_cssClasses").addEventListener("input",function(s){c(()=>{i.value=s.target.value,m()})}))})}).observe(document.getElementById("bricks-panel-element"),{subtree:!0,attributes:!0,childList:!0}),T([p,d],(e,t)=>{e[0]!==t[0]&&c(()=>{var s,a;i.value=((a=(s=r.$_activeElement.value)==null?void 0:s.settings)==null?void 0:a._cssClasses)||"",m()}),e[0]&&e[1]&&c(()=>{const s=document.querySelector("#bricks-panel-element-classes");s.querySelector(".windpressbricks-plc-input")===null&&(s.appendChild(v),s.appendChild(i),g=new q(i,{highlight:[{highlight:new RegExp("(?<=\\s|^)(?:(?!\\s).)+(?=\\s|$)","g"),className:"word"},{highlight:new RegExp("(?<=\\s)\\s","g"),className:"multispace",blank:!0}]}),h.update(i))})}),i.addEventListener("input",function(e){r.$_activeElement.value.settings._cssClasses=e.target.value});function m(){c(()=>{try{g.handleInput()}catch{}h.update(i),l.hideMenu()})}i.addEventListener("highlights-updated",function(e){});const S=new MutationObserver(function(e){e.forEach(function(t){t.type==="childList"&&t.addedNodes.length>0&&t.addedNodes.forEach(s=>{const a=s.querySelector(".class-name").dataset.tributeClassName;s.addEventListener("mouseenter",_=>{$(a)}),s.addEventListener("mouseleave",_=>{k()}),s.addEventListener("click",_=>{k()})})})});let o=null;i.addEventListener("tribute-active-true",function(e){o===null&&(o=document.querySelector(".windpressbricks-tribute-container>ul")),c(()=>{o&&S.observe(o,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"]})})}),b.addEventListener("click",async function(e){var t,s,a;((a=(s=(t=E.contentWindow.windpress)==null?void 0:t.loaded)==null?void 0:s.module)==null?void 0:a.classSorter)===!0&&(i.value=await E.contentWindow.windpress.module.classSorter.sort(i.value),r.$_activeElement.value.settings._cssClasses=i.value,m())});function $(e){n.$_getElementNode(n.$_activeElement.value).classList.add(e)}function k(){const e=n.$_activeElement.value,t=n.$_getElementNode(e),s=n.$_getElementClasses(e);t.classList.value=s.join(" ")}function f(){let e=l.menu.querySelector("li.highlight>span.class-name");const t=n.$_activeElement.value,s=n.$_getElementNode(t),a=n.$_getElementClasses(t);s.classList.value=a.join(" ")+" "+e.dataset.tributeClassName}N("Module loaded!",{module:"plain-classes"})})();
