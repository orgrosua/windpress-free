import{i as ut,l as dt,r as pt,b as vt,L as mt,_ as le,T as bt,P as ft,K as yt,M as ht,N as gt,O as kt,__tla as wt}from"./_plugin-vue_export-helper-DYCxEJ4r.js";import{l as ae}from"./logger-BTW-zIW3.js";import{c as Et,g as _t,_ as xt}from"./lib-CaXClALh.js";import{d as we,b as se,a as $t}from"./constant-CWUMdlVX.js";import{i as C,a as Ee,q as ie,u as F,v as h,x as g,y as $,C as A,z as L,A as T,F as Ct,r as I,w as ce,S as _e,J as V,K as P,E as j,M as R,Q as H,B as ue,G as Lt,H as It,D as St,T as Tt,n as Pt}from"./runtime-core.esm-bundler-DpP2Prln.js";import{__tla as At}from"./build-Clr6x0gJ.js";import{__tla as Mt}from"./oxide_parser_wasm-Bf4OlVG6.js";import{g as Wt}from"./intellisense-C6LKsBAx.js";import{a as qt}from"./index-BCqmp6kJ.js";import{s as Vt}from"./set-DMzY-ey4.js";import"./index-BbP3371Q.js";import"./preload-helper-Tcd9XBoB.js";import"./_MapCache-DN36xuwU.js";Promise.all([(()=>{try{return wt}catch{}})(),(()=>{try{return At}catch{}})(),(()=>{try{return Mt}catch{}})()]).then(async()=>{ut({scope:"#windpressbricks-variable-app",rootSize:10}),dt.add(pt,vt);var de={exports:{}};(function(a,o){(function(n,p){a.exports=p()})(Et,function(){var n=["t","r","b","l","tr","br","bl","tl"],p={handles:n,minWidth:0,maxWidth:Number.MAX_SAFE_INTEGER,minHeight:0,maxHeight:Number.MAX_SAFE_INTEGER,handleWidth:12,handleZIndex:100},s=function(t,l){var e=l.value,r=l.modifiers,f,u,y,w,ye,he,G,M,Q,Z,J,ee,te,oe,ne;t.style.position="absolute",lt(),at(),t.addEventListener("mousedown",re),t.addEventListener("touchstart",re),t.onMouseDown=re;function lt(){var i=function(_){return e&&e[_]&&typeof e[_]=="number"?e[_]:null},x=function(_){return i(_)||p[_]};Z=x("minWidth"),J=x("maxWidth"),ee=x("minHeight"),te=x("maxHeight"),oe=x("handleWidth"),ne=x("handleZIndex")}function at(){Object.keys(r).some(function(i){return n.includes(i)})?Q=n.filter(function(i){return r[i]}):Q=p.handles,G=Q.map(st),G.forEach(function(i){return t.appendChild(i)})}function st(i){var x=oe+"px",_=-oe/2+"px",W=ne+1,d=document.createElement("div");return d.dataset.handle=i,d.style.position="absolute",d.style.touchAction="none",d.style.userSelect="none",d.style.zIndex=i.length===1?ne:W,d.style.cursor=k(i),i.includes("t")&&(d.style.top=_,d.style.height=x,i==="t"&&(d.style.left=0,d.style.width="100%")),i.includes("b")&&(d.style.bottom=_,d.style.height=x,i==="b"&&(d.style.left=0,d.style.width="100%")),i.includes("r")&&(d.style.right=_,d.style.width=x,i==="r"&&(d.style.top=0,d.style.height="100%")),i.includes("l")&&(d.style.left=_,d.style.width=x,i==="l"&&(d.style.top=0,d.style.height="100%")),d}function re(i){if(G.includes(i.target)){var x=i.type==="touchstart"&&i.touches.length>0,_=x?i.touches[0]:i;ye=_.clientX,he=_.clientY,f=t.offsetLeft,u=t.offsetTop,y=parseInt(window.getComputedStyle(t).getPropertyValue("width")),w=parseInt(window.getComputedStyle(t).getPropertyValue("height")),document.documentElement.style.cursor=k(i.target.dataset.handle),M=i.target.dataset.handle,document.addEventListener("mousemove",z),document.addEventListener("mouseup",O),document.addEventListener("touchmove",z),document.addEventListener("touchend",O),i.preventDefault()}}function z(i){var x=i.type==="touchmove"&&i.touches.length>0,_=x?i.touches[0]:i,W=_.clientX-ye,d=_.clientY-he;if(M.includes("t")){var ge=Math.min(te,Math.max(ee,w-d));d=w-ge,t.style.height=ge+"px",t.style.top=u+d+"px"}if(M.includes("b")){var it=Math.min(te,Math.max(ee,w+d));t.style.height=it+"px",t.style.top=u+"px"}if(M.includes("l")){var ke=Math.min(J,Math.max(Z,y-W));W=y-ke,t.style.width=ke+"px",t.style.left=f+W+"px"}if(M.includes("r")){var ct=Math.min(J,Math.max(Z,y+W));t.style.width=ct+"px",t.style.left=f+"px"}t.dispatchEvent(new CustomEvent("resize")),i.preventDefault()}function O(){document.documentElement.style.cursor="",M=null,document.removeEventListener("mousemove",z),document.removeEventListener("mouseup",O),document.removeEventListener("touchmove",z),document.removeEventListener("touchend",O)}},m=function(t){document.documentElement.style.cursor="",t.removeEventListener("mousedown",t.onMouseDown),t.removeEventListener("touchstart",t.onMouseDown)};function k(t){var l={t:"n",r:"e",b:"s",l:"w"};return t.split("").map(function(e){return l[e]}).join("")+"-resize"}var b=function(t){p=Object.assign({},p,t)},c={bind:s,beforeMount:s,unbind:m,unmounted:m},v=function(t,l){l&&b(l),t.directive("resizable",c)};typeof window<"u"&&window.Vue&&window.Vue.use&&(window.VResizable={setDefaults:b},window.Vue.use(v));var E={install:v};return E})})(de);var xe=de.exports;const $e=_t(xe),Ce={id:"windpressbricks-variable-app-header",class:"bg:$(builder-bg) cursor:grab bb:1|solid|$(builder-border-color)"},Le={class:"flex gap:10 align-items:center px:12 py:8"},Ie=["href"],Se={class:"font:bold flex gap:10 align-items:center cursor:default"},Te={__name:"PanelHeader",setup(a){const o=C("variableApp"),n=C("isOpen");function p(){const s=o.querySelector("#windpressbricks-variable-app-header");let m=I(!1),k=0,b=0;ce(m,t=>{t?(document.body.style.userSelect="none",we.style.pointerEvents="none",s.style.cursor="grabbing"):(document.body.style.removeProperty("user-select"),we.style.removeProperty("pointer-events"),s.style.cursor="grab")});const c=t=>{m.value=!0;const l=s.getBoundingClientRect();k=t.clientX-l.left,b=t.clientY-l.top};s.removeEventListener("mousedown",c),s.addEventListener("mousedown",c);const v=t=>{if(!m.value)return;const l=s.getBoundingClientRect(),e=t.clientX,r=t.clientY,f=e-k,u=r-b,y=f<0?0:f>window.innerWidth-l.width?window.innerWidth-l.width:f,w=u<0?0:u>window.innerHeight-l.height?window.innerHeight-l.height:u;o.style.left=`${y}px`,o.style.top=`${w}px`};document.removeEventListener("mousemove",v),document.addEventListener("mousemove",v);const E=t=>{m.value=!1};document.removeEventListener("mouseup",E),document.addEventListener("mouseup",E)}return Ee(()=>{p()}),(s,m)=>{const k=ie("inline-svg"),b=ie("font-awesome-icon"),c=F("tooltip");return h(),g("div",Ce,[$("div",Le,[A((h(),g("a",{href:s.windpressbricks.site_meta.admin_url,target:"_blank",class:"flex align-items:center fg:$(builder-color-accent):hover"},[L(k,{src:T(mt),class:"inline-svg fill:current font:24"},null,8,["src"])],8,Ie)),[[c,{placement:"top",content:"Open WindPress plugin"}]]),A((h(),g("div",Se,[Ct(" WindPress ")])),[[c,{placement:"top",content:`v${s.windpressbricks._version}`}]]),A((h(),g("button",{onClick:m[0]||(m[0]=v=>n.value=!T(n)),class:"ml:auto p:6 bg:transparent bg:$(builder-bg-accent):hover r:$(builder-border-radius)"},[L(b,{icon:["fas","xmark"],class:"fg:$(builder-color)"})])),[[c,{placement:"top",content:"Close"}]])])])}}},Pe={class:"flex-grow:1"},Ae={key:0,class:"expansion-panel__body"},Me={__name:"ExpansionPanel",props:{namespace:{type:String,required:!0},name:{type:String,required:!0}},setup(a,{expose:o}){const n=a,p=I(null),s=qt(`windpressbricks-variable-app.ui.expansion-panels.${n.namespace}`,{[`${n.name}`]:!1},void 0,{mergeDefaults:!0});function m(b){s.value[n.name]=b===null?!s.value[n.name]:b}function k(){p.value.scrollIntoView()}return o({togglePanel:m,scrollIntoView:k}),(b,c)=>{const v=ie("font-awesome-icon");return h(),g("div",{ref_key:"sectionRef",ref:p,class:"expansion-panel m:10 mr:4"},[$("div",{onClick:c[0]||(c[0]=E=>T(s)[a.name]=!T(s)[a.name]),class:V([{"bg:$(builder-bg-3)!":T(s)[a.name]},"expansion-panel__header flex bg:$(builder-bg-2) bg:$(builder-bg-3):hover justify-content:space-between p:10 r:8 cursor:pointer"])},[$("div",Pe,[_e(b.$slots,"header",{},void 0,!0)]),$("div",null,[L(v,{icon:["fas","chevron-right"],class:V([{"rotate(-90)":T(s)[a.name]},"~duration:300 font:18"])},null,8,["class"])])],2),L(bt,null,{default:P(()=>[T(s)[a.name]?(h(),g("div",Ae,[_e(b.$slots,"default",{},void 0,!0)])):j("",!0)]),_:3})],512)}}},B=le(Me,[["__scopeId","data-v-37676007"]]),We={class:"{m:10;pb:15}>div bb:1|solid|$(builder-border-color)>div:not(:last-child)"},qe={class:"variable-section-title font:14 my:10"},Ve={class:"variable-section-items flex flex:row gap:8 flex-wrap:wrap"},De=["onClick","onMouseenter"],ze={class:"font:14"},Oe=1e3,pe={__name:"CommonVariableItems",props:{variableItems:{type:Object,required:!0}},setup(a){const o=C("focusedInput"),n=C("recentVariableSelectionTimestamp"),p=C("tempInputValue");function s(b,c){performance.now()-n.value<Oe||o.value&&(o.value.value=`var(${c})`,o.value.dispatchEvent(new Event("input")),o.value.focus())}function m(b){!o.value||p.value===null||(o.value.value=p.value,o.value.dispatchEvent(new Event("input")),o.value.focus())}function k(b,c){o.value&&(o.value.value=`var(${c})`,o.value.dispatchEvent(new Event("input")),o.value.focus(),p.value=`var(${c})`,n.value=performance.now())}return(b,c)=>{const v=F("tooltip");return h(),g("div",We,[(h(!0),g(R,null,H(a.variableItems,(E,t)=>(h(),g("div",{key:t,class:""},[$("div",qe,ue(t.replace("_","-")),1),$("div",Ve,[E.length>0?(h(!0),g(R,{key:0},H(E,(l,e)=>A((h(),g("button",{key:e,onClick:r=>k(r,l.key),onMouseenter:r=>s(r,l.key),onMouseleave:m,class:"px:12 py:8 r:$(builder-border-radius) fg:$(builder-color) bg:$(builder-bg-2) bg:$(builder-bg-3):hover {opacity:.5;font:semibold}>span opacity:100:hover>span"},[$("span",ze,ue(l.label),1)],40,De)),[[v,{placement:"top",content:`var(${l.key})`}]])),128)):j("",!0)])]))),128))])}}};function N(){var o,n;if(se.$_state.activePanel!=="element")return null;const a=(o=se.$_state)==null?void 0:o.activeElement.id;return(n=se.$_getIframeDoc())==null?void 0:n.getElementById(`brxe-${a}`)}function Fe({selector:a,callback:o,options:n}){const p=new MutationObserver(o),s=document.querySelector(a);if(!s){logger(`Target not found for selector: ${a}`,{module:"variable-picker",type:"error"});return}const m={childList:!0,subtree:!0};p.observe(s,Object.assign(Object.assign({},m),n))}const je={class:"{m:10;pb:15}>div bb:1|solid|$(builder-border-color)>div:not(:last-child)"},Re={class:"variable-section-title font:14 my:10"},He={key:0,class:"variable-section-items"},Be=["onClick","onMouseenter"],Ne=["onClick","onMouseenter"],Ue=1e3,Xe={__name:"ColorVariableItems",props:{variableItems:{type:Object,required:!0}},setup(a){const o=C("focusedInput"),n=C("recentColorPickerTarget"),p=C("recentVariableSelectionTimestamp"),s=C("tempInputValue");function m(t,l){var e;if(!(performance.now()-p.value<Ue)){if(!o.value){const r=N();if(!r)return;const f=[{property:"color",control:"typography"},{property:"backgroundColor",control:"background"},{property:"borderColor",control:"border"}];for(const{property:u,control:y}of f)(e=n.value)!=null&&e.closest(`[data-control="${y}"]`)&&(r.style[u]=`var(${l})`);return}o.value.value=`var(${l})`,o.value.dispatchEvent(new Event("input")),o.value.focus()}}function k(t){var l;if(!o.value||s.value===null){const e=N();if(!e)return;const r=[{property:"color",control:"typography"},{property:"backgroundColor",control:"background"},{property:"borderColor",control:"border"}];for(const{property:f,control:u}of r)(l=n.value)!=null&&l.closest(`[data-control="${u}"]`)&&(e.style[f]="");return}o.value.value=s.value,o.value.dispatchEvent(new Event("input")),o.value.focus()}function b(t,l){if(t.stopPropagation(),t.preventDefault(),!o.value){const e=n.value;E(l),p.value=performance.now(),setTimeout(()=>{const r=N();if(!r)return;const f=[{property:"color",control:"typography"},{property:"backgroundColor",control:"background"},{property:"borderColor",control:"border"}];for(const{property:u,control:y}of f)e!=null&&e.closest(`[data-control="${y}"]`)&&(r.style[u]="")},5);return}o.value.value=`var(${l})`,o.value.dispatchEvent(new Event("input")),o.value.focus(),s.value=`var(${l})`,p.value=performance.now()}function c(){document.querySelectorAll(".windpressbricks-variable-app-colorpopup").forEach(t=>{t.remove()})}function v(){if(document.querySelector(".windpressbricks-variable-app-colorpopup"))return;const t=".bricks-control-popup { display: none !important; }",l=document.createElement("style");l.id="windpressbricks-variable-app-bricks-popup",l.appendChild(document.createTextNode(t)),l.classList.add("windpressbricks-variable-app-colorpopup"),document.head.appendChild(l)}async function E(t){var e,r,f,u,y;v(),document.querySelector(".bricks-control-popup .color-palette.grid")||((r=(e=n.value)==null?void 0:e.closest(".bricks-control-preview"))==null||r.click(),await new Promise(w=>setTimeout(w,25)));const l=document.querySelector(".bricks-control-popup .color-palette.grid");l?(u=(f=l.querySelector(`[data-balloon="var(${t})"]`))==null?void 0:f.parentElement)==null||u.click():ae("Failed to select color. Color grid not found.",{module:"variable-picker",type:"error"}),(y=document.querySelector("body"))==null||y.click(),await new Promise(w=>setTimeout(w,2)),document.querySelector(".bricks-control-popup")?(setTimeout(()=>{var w;(w=document.querySelector("body"))==null||w.click(),setTimeout(()=>{c()},5)},5),ae("Failed to close color picker. Delaying close.",{module:"variable-picker",type:"error"})):c()}return(t,l)=>{const e=F("tooltip");return h(),g("div",je,[(h(!0),g(R,null,H(a.variableItems,(r,f)=>(h(),g("div",{key:f,class:""},[$("div",Re,ue(f),1),r.DEFAULT?(h(),g("div",He,[A($("button",{onClick:u=>b(u,r.DEFAULT.key),onMouseenter:u=>m(u,r.DEFAULT.key),onMouseleave:k,class:V([`bg:$(${r.DEFAULT.key.slice(2)})`,"w:full r:4 h:24 border:1|solid|transparent border:white:hover"])},null,42,Be),[[e,{placement:"top",content:`var(${r.DEFAULT.key})`}]])])):j("",!0),r.shades&&Object.keys(r.shades).length>0?(h(),g("div",{key:1,class:V([[{},`grid-template-cols:repeat(${Object.keys(r.shades).length},auto)`],"variable-section-items grid r:4 overflow:hidden"])},[(h(!0),g(R,null,H(r.shades,(u,y)=>(h(),g("div",{key:y,class:"flex gap:10"},[A($("button",{onClick:w=>b(w,u.key),onMouseenter:w=>m(w,u.key),onMouseleave:k,class:V([`bg:$(${u.key.slice(2)})`,"w:full h:24 border:1|solid|transparent border:white:hover"])},null,42,Ne),[[e,{placement:"top",content:`var(${u.key})`}]])]))),128))],2)):j("",!0)]))),128))])}}},U=a=>(Lt("data-v-d9172fa2"),a=a(),It(),a),Ke={id:"windpressbricks-variable-app-body",class:"rel w:full h:full overflow-y:scroll!"},Ye=U(()=>$("span",{class:"font:semibold"},"Color",-1)),Ge=U(()=>$("span",{class:"font:semibold"},"Typography",-1)),Qe=U(()=>$("span",{class:"font:semibold"},"Sizing",-1)),Ze={__name:"PanelBody",setup(a){const o=I({colors:{},typography:{},sizing:{}}),n=C("focusedInput"),p=C("recentColorPickerTarget");async function s(){const c=await $t.contentWindow.wp.hooks.applyFilters("windpress.module.design_system.main_css"),v=Wt(xt(c)),E={};v.filter(e=>e.key.startsWith("--color")).forEach(e=>{const r=e.key.slice(8),f=r.split("-");let u="";if(f.length>1){const y=f[0],w=f.slice(1).join("-");u=`${y}.shades.'${w}'`}else u=`${r}.DEFAULT`;Vt(E,u,e)}),o.value.colors=Object.keys(E).sort().reduce((e,r)=>(e[r]=E[r],e),{});const t={font_size:[],line_height:[],letter_spacing:[]};v.filter(e=>e.key.startsWith("--font-size-")&&!e.key.endsWith("--line-height")).forEach(e=>{const r=e.key.slice(12);t.font_size.push({key:e.key,label:r,value:e.value})}),v.filter(e=>e.key.startsWith("--line-height-")||e.key.endsWith("--line-height")).forEach(e=>{const r=e.key.startsWith("--line-height-")?e.key.slice(14):e.key.slice(2,-13);t.line_height.push({key:e.key,label:r,value:e.value})}),t.line_height.sort((e,r)=>e.label.startsWith("font-size-")&&!r.label.startsWith("font-size-")?1:!e.label.startsWith("font-size-")&&r.label.startsWith("font-size-")?-1:0),v.filter(e=>e.key.startsWith("--letter-spacing-")).forEach(e=>{const r=e.key.slice(17);t.letter_spacing.push({key:e.key,label:r,value:e.value})}),o.value.typography=t;const l={spacing:[],width:[],breakpoint:[]};v.filter(e=>e.key.startsWith("--spacing-")).forEach(e=>{const r=e.key.slice(10);l.spacing.push({key:e.key,label:r,value:e.value})}),v.filter(e=>e.key.startsWith("--width-")).forEach(e=>{const r=e.key.slice(8);l.width.push({key:e.key,label:r,value:e.value})}),v.filter(e=>e.key.startsWith("--breakpoint-")).forEach(e=>{const r=e.key.slice(13);l.breakpoint.push({key:e.key,label:r,value:e.value})}),o.value.sizing=l}const m=I(null),k=I(null),b=I(null);return ce(n,c=>{var v,E,t,l;if(c){const e=((E=(v=c.closest("[data-controlkey]"))==null?void 0:v.dataset.controlkey)==null?void 0:E.toLocaleLowerCase())??"",r=["typography","font"].some(y=>e.includes(y)),f=["padding","margin","gap","width","height"].some(y=>e.includes(y)),u=(l=(t=c.parentElement)==null?void 0:t.parentElement)==null?void 0:l.classList.contains("color-input");["_gridTemplateColumns","_gridTemplateRows"].some(y=>e.includes(y.toLocaleLowerCase())),k.value.togglePanel(!1),b.value.togglePanel(!1),m.value.togglePanel(!1),u?(m.value.togglePanel(!0),m.value.scrollIntoView()):r?(k.value.togglePanel(!0),k.value.scrollIntoView()):f&&(b.value.togglePanel(!0),b.value.scrollIntoView())}}),ce(p,c=>{c&&(m.value.togglePanel(!0),m.value.scrollIntoView())}),Ee(()=>{s()}),new BroadcastChannel("windpress").addEventListener("message",async c=>{const v=c.data;v.source==="windpress/autocomplete"&&v.task==="windpress.main_css.saved.done"&&setTimeout(()=>{s()},1e3)}),(c,v)=>(h(),g("div",Ke,[L(B,{namespace:"variable",name:"color",ref_key:"sectionColor",ref:m},{header:P(()=>[Ye]),default:P(()=>[L(Xe,{variableItems:o.value.colors},null,8,["variableItems"])]),_:1},512),L(B,{namespace:"variable",name:"typography",ref_key:"sectionTypography",ref:k},{header:P(()=>[Ge]),default:P(()=>[L(pe,{variableItems:o.value.typography},null,8,["variableItems"])]),_:1},512),L(B,{namespace:"variable",name:"spacing",ref_key:"sectionSpacing",ref:b,class:""},{header:P(()=>[Qe]),default:P(()=>[L(pe,{variableItems:o.value.sizing},null,8,["variableItems"])]),_:1},512)]))}},Je=le(Ze,[["__scopeId","data-v-d9172fa2"]]),et={id:"windpressbricks-variable-app-container",class:"flex flex:column w:full h:full fg:$(builder-color) bg:$(builder-bg) r:10 overflow:hidden box-shadow:$(builder-box-shadow) outline:1|solid|$(builder-color-accent)"},tt={__name:"App",setup(a){const o=C("isOpen");return(n,p)=>{const s=F("resizable");return A((h(),g("div",et,[L(Te),(h(),St(Tt,null,{default:P(()=>[L(Je)]),_:1}))])),[[ft,T(o)],[s,{minWidth:300,minHeight:500},void 0,{br:!0}]])}}},ot=le(tt,[["__scopeId","data-v-1d394937"]]),X=document.createElement("windpressbricks-variable-app");X.id="windpressbricks-variable-app",document.body.appendChild(X);const q=I(!1),D=I(null),ve=I(null),K=I(null),nt=I(0),S=yt(ot);S.config.globalProperties.windpressbricks=window.windpressbricks,S.provide("variableApp",X),S.provide("isOpen",q),S.provide("focusedInput",D),S.provide("tempInputValue",ve),S.provide("recentColorPickerTarget",K),S.provide("recentVariableSelectionTimestamp",nt),S.use(ht,{container:"#windpressbricks-variable-app"}).use($e),S.component("font-awesome-icon",gt).component("inline-svg",kt),S.mount("#windpressbricks-variable-app");function me(a){var o;!a.shiftKey||!a.target||((o=document==null?void 0:document.getSelection())==null||o.removeAllRanges(),a.preventDefault(),a.stopPropagation(),D.value=a.target,ve.value=a.target.value,q.value=!0)}function be(a){D.value=a.target}const rt={includedFields:['div[data-control="number"]',{selector:'div[data-control="text"]',hasChild:["#_cssTransition","#_transformOrigin","#_flexBasis","#_overflow","#_gridTemplateColumns","#_gridTemplateRows","#_gridAutoColumns","#_gridAutoRows","#_objectPosition",'[id^="raw-"]']}],excludedFields:[".control-query",'div[data-controlkey="start"]','div[data-controlkey="perPage"]','div[data-controlkey="perMove"]','div[data-controlkey="speed"]']};function fe(){setTimeout(()=>{rt.includedFields.forEach(a=>{(typeof a=="string"?[...document.querySelectorAll(a)]:[...document.querySelectorAll(a.selector)].filter(o=>a.hasChild.some(n=>o.querySelector(n)))).forEach(o=>{const n=o.querySelector("input[type='text']");(n==null?void 0:n.getAttribute("windpressbricks-variable-app"))!=="true"&&(n==null||n.removeEventListener("click",me),n==null||n.addEventListener("click",me),n==null||n.removeEventListener("focus",be),n==null||n.addEventListener("focus",be),n==null||n.setAttribute("windpressbricks-variable-app","true"))})}),[...document.querySelectorAll(".bricks-control-preview")].filter(a=>{var o,n;return((n=(o=a.closest(".control-inner"))==null?void 0:o.querySelector("label"))==null?void 0:n.getAttribute("for"))==="color"}).forEach(a=>{const o=a.querySelector(".color-value-tooltip");o&&o.setAttribute("data-balloon",o.getAttribute("data-balloon")||"Shift + right click to open the Variable Picker"),a.addEventListener("contextmenu",n=>{var p;!n.shiftKey||!n.target||(n.preventDefault(),n.stopPropagation(),(p=document==null?void 0:document.getSelection())==null||p.removeAllRanges(),D.value=null,q.value=!0,K.value=null,Pt(()=>{K.value=n.target}))})})},100)}let Y=!1;Fe({selector:"#bricks-panel-inner",options:{subtree:!0,childList:!0},callback(){Y||(Y=!0,fe(),setTimeout(()=>{Y=!1},100))}}),fe(),document.addEventListener("keydown",a=>{a.key==="Escape"&&q.value&&(q.value=!1)}),ae("Module loaded!",{module:"variable-picker"})});
