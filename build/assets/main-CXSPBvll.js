import{_ as w}from"./preload-helper-Tcd9XBoB.js";import{l as z}from"./logger-BTW-zIW3.js";import{l as V,c as j,n as y,T as B,t as X,d as Y,f as U,H as G}from"./highlight-in-textarea-D3BQRh7N.js";import{i as a,o as p,a as F}from"./constant-Cdlzk0w4.js";import{r as b,w as N,n as h}from"./runtime-core.esm-bundler-CuuCWbwv.js";import"./isObject-B5R9K1Pz.js";import"./isSymbol-DJmTqBMq.js";import"./index-BHzFOpFs.js";(async()=>{let x=null;(async()=>(await V(w(()=>import("./wasm-CsTmP73Z.js"),[],import.meta.url)),x=await j({themes:[w(()=>import("./dark-plus-KEYLhlmT.js"),[],import.meta.url),w(()=>import("./light-plus-BsvsQ1iS.js"),[],import.meta.url)],langs:[w(()=>import("./css-CbYhyuC0.js"),[],import.meta.url)]})))();const i=document.createRange().createContextualFragment(`
    <textarea id="windpressoxygen-plc-input" class="windpressoxygen-plc-input" rows="2" spellcheck="false"></textarea>
`).querySelector("#windpressoxygen-plc-input"),C=document.createRange().createContextualFragment(`
    <div class="windpressoxygen-plc-action-container">
        <div class="actions">
        </div>
    </div>
`).querySelector(".windpressoxygen-plc-action-container"),O=C.querySelector(".actions"),L=document.createRange().createContextualFragment(`
        <span id="windpressoxygen-plc-class-sort" class="oxygen-svg-wrapper windpressoxygen-plc-class-sort">
            <svg  xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round" class="oxygen-svg icon icon-tabler icons-tabler-outline icon-tabler-reorder"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" /><path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" /><path d="M17 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" /><path d="M5 11v-3a3 3 0 0 1 3 -3h8a3 3 0 0 1 3 3v3" /><path d="M16.5 8.5l2.5 2.5l2.5 -2.5" /></svg>    
        </span>
`).querySelector("#windpressoxygen-plc-class-sort");O.appendChild(L);const _=b(!1),f=b(null);let E=null;y(i);let S=[];wp.hooks.addAction("windpressoxygen-autocomplete-items-refresh","windpressoxygen",()=>{S=wp.hooks.applyFilters("windpressoxygen-autocomplete-items",[],i.value)}),wp.hooks.doAction("windpressoxygen-autocomplete-items-refresh");const c=new B({containerClass:"windpressoxygen-tribute-container",autocompleteMode:!0,menuItemLimit:40,noMatchTemplate:"",values:async function(e,n){const t=await wp.hooks.applyFilters("windpressoxygen-autocomplete-items-query",S,e);n(t)},lookup:"value",itemClass:"class-item",menuItemTemplate:function(e){let n="";return e.original.color!==void 0&&(n+=`background-color: ${e.original.color};`),e.original.fontWeight!==void 0&&(n+=`font-weight: ${e.original.fontWeight};`),`
            <span class="class-name" data-tribute-class-name="${e.original.value}">${e.string}</span>
            <span class="class-hint" style="${n}"></span>
        `}});c.setMenuContainer=function(e){this.menuContainer=e};const P=c.events.callbacks;c.events.callbacks=function(){return{...P.call(this),up:(e,n)=>{if(this.tribute.isActive&&this.tribute.current.filteredItems){e.preventDefault(),e.stopPropagation();let t=this.tribute.current.filteredItems.length,s=this.tribute.menuSelected;t>s&&s>0?(this.tribute.menuSelected--,this.setActiveLi()):s===0&&(this.tribute.menuSelected=t-1,this.setActiveLi(),this.tribute.menu.scrollTop=this.tribute.menu.scrollHeight),I()}},down:(e,n)=>{if(this.tribute.isActive&&this.tribute.current.filteredItems){e.preventDefault(),e.stopPropagation();let t=this.tribute.current.filteredItems.length-1,s=this.tribute.menuSelected;t>s?(this.tribute.menuSelected++,this.setActiveLi()):t===s&&(this.tribute.menuSelected=0,this.setActiveLi(),this.tribute.menu.scrollTop=0),I()}}}},c.attach(i),new MutationObserver(function(e){_.value=!e[0].target.classList.contains("ng-hide")}).observe(document.querySelector(".oxygen-sidebar-currently-editing"),{attributes:!0,attributeFilter:["class"]});const R=a.activateComponent;a.activateComponent=function(e,n,t){R(e,n,t),f.value=a.component.active.id};function k(e){const n=a.component.active.id,t=a.component.active.name;if(n===0)return;const s=a.component.options[n];if(s.model===void 0)return;s.model["custom-attributes"]===void 0&&F.addCustomAttribute("plainclass",e);const o=s.model["custom-attributes"],l=o.find(u=>u.name==="plainclass");l?l.value=e:o.push({name:"plainclass",value:e}),a.component.options[n].model["custom-attributes"]=o,a.setOption(n,t,"custom-attributes"),a.applyCustomAttributes(n)}N([f,_],(e,n)=>{e[0]!==n[0]&&h(()=>{var l;const t=a.component.active.id;if(t===0)return;const s=a.component.options[t];if(s.model===void 0)return;s.model["custom-attributes"]===void 0&&F.addCustomAttribute("plainclass","");const o=s.model["custom-attributes"];i.value=((l=o==null?void 0:o.find(u=>u.name==="plainclass"))==null?void 0:l.value)||"",A()}),e[0]&&e[1]&&h(()=>{const t=document.querySelector(".oxygen-sidebar-currently-editing");t.querySelector(".windpressoxygen-plc-input")===null&&(t.appendChild(C),window.tippy(".windpressoxygen-plc-class-sort",{content:"Automatic Class Sorting",animation:"shift-toward",placement:"right"}),t.appendChild(i),E=new G(i,{highlight:[{highlight:new RegExp("(?<=\\s|^)(?:(?!\\s).)+(?=\\s|$)","g"),className:"word"},{highlight:new RegExp("(?<=\\s)\\s","g"),className:"multispace",blank:!0}]}),y.update(i))})}),i.addEventListener("input",function(e){k(e.target.value)});function A(){h(()=>{try{E.handleInput()}catch{}y.update(i),c.hideMenu()})}i.addEventListener("highlights-updated",function(e){W()});let g=X(document.createElement("div"),{plugins:[U],allowHTML:!0,arrow:!1,duration:[500,null],followCursor:!0,trigger:"manual"});function W(){var o,l,u;if(((u=(l=(o=p.contentWindow.windpress)==null?void 0:o.loaded)==null?void 0:l.module)==null?void 0:u.classnameToCss)!==!0)return;const e=document.querySelector(".hit-container");if(e===null)return;g.reference=e;async function n(r){const d=r.textContent,m=await p.contentWindow.windpress.module.classnameToCss.generate(d);if(m===null||m.trim()==="")return null;g.setContent(x.codeToHtml(m,{lang:"css",theme:"dark-plus"})),g.show()}const t=b(null),s=Y(function(r){const d=r.clientX,m=r.clientY,$=document.elementsFromPoint(d,m).find(H=>H.matches('mark[class="word"]'));t.value=$||null},10);e.addEventListener("mousemove",s),e.addEventListener("mouseleave",function(r){t.value=null}),N(t,(r,d)=>{r&&r!==d?n(r):g.hide()})}const D=new MutationObserver(function(e){e.forEach(function(n){n.type==="childList"&&n.addedNodes.length>0&&n.addedNodes.forEach(t=>{t.addEventListener("mouseenter",s=>{const o=t.querySelector(".class-name").dataset.tributeClassName;M(o)}),t.addEventListener("mouseleave",s=>{T()}),t.addEventListener("click",s=>{T()})})})});let v=null;i.addEventListener("tribute-active-true",function(e){v===null&&(v=document.querySelector(".windpressoxygen-tribute-container>ul")),h(()=>{v&&D.observe(v,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"]})})}),L.addEventListener("click",async function(e){var n,t,s;((s=(t=(n=p.contentWindow.windpress)==null?void 0:n.loaded)==null?void 0:t.module)==null?void 0:s.classSorter)===!0&&(i.value=await p.contentWindow.windpress.module.classSorter.sort(i.value),k(i.value),A())});function M(e){q({action:"windpressoxygen-preview-class",do:"add",elementId:f.value,className:e})}function T(){q({action:"windpressoxygen-preview-class",do:"remove"})}function I(){h(()=>{let e=c.menu.querySelector("li.highlight>span.class-name");M(e.dataset.tributeClassName)})}function q(e){p.contentWindow.postMessage(e,"*")}z("Module loaded!",{module:"plain-classes"})})();
